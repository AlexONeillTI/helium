import{j as s,a as u,F as q}from"./jsx-runtime-670450c2.js";import{r as m,R as ee}from"./index-f1f749bf.js";import{g as pe,u as me,a as he,L as fe}from"./course-run-78bbd7bb.js";import{u as L}from"./useTranslation-622fecac.js";import{A as S}from"./headlessui.esm-df411afd.js";import{c as ge}from"./clsx.m-1229b3e0.js";import"./_commonjsHelpers-042e6b4d.js";import"./tslib.es6-33423134.js";import"./ApolloContext-2edf0031.js";import"./nonIterableRest-1390a7e0.js";import"./index-96c5f47c.js";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var te=be,G=ve,Ce=decodeURIComponent,ye=encodeURIComponent,O=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function be(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var n={},r=t||{},o=e.split(";"),i=r.decode||Ce,a=0;a<o.length;a++){var c=o[a],d=c.indexOf("=");if(!(d<0)){var l=c.substring(0,d).trim();if(n[l]==null){var p=c.substring(d+1,c.length).trim();p[0]==='"'&&(p=p.slice(1,-1)),n[l]=Ie(p,i)}}}return n}function ve(e,t,n){var r=n||{},o=r.encode||ye;if(typeof o!="function")throw new TypeError("option encode is invalid");if(!O.test(e))throw new TypeError("argument name is invalid");var i=o(t);if(i&&!O.test(i))throw new TypeError("argument val is invalid");var a=e+"="+i;if(r.maxAge!=null){var c=r.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(c)}if(r.domain){if(!O.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!O.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.sameSite){var d=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(d){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a}function Ie(e,t){try{return t(e)}catch{return e}}function xe(){return typeof document=="object"&&typeof document.cookie=="string"}function ke(e,t){return typeof e=="string"?te(e,t):typeof e=="object"&&e!==null?e:{}}function we(e,t){return typeof t>"u"&&(t=!e||e[0]!=="{"&&e[0]!=="["&&e[0]!=='"'),!t}function $(e,t){t===void 0&&(t={});var n=Ne(e);if(we(n,t.doNotParse))try{return JSON.parse(n)}catch{}return e}function Ne(e){return e&&e[0]==="j"&&e[1]===":"?e.substr(2):e}var N=globalThis&&globalThis.__assign||function(){return N=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},N.apply(this,arguments)},_e=function(){function e(t,n){var r=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=ke(t,n),new Promise(function(){r.HAS_DOCUMENT_COOKIE=xe()}).catch(function(){})}return e.prototype._updateBrowserValues=function(t){this.HAS_DOCUMENT_COOKIE&&(this.cookies=te(document.cookie,t))},e.prototype._emitChange=function(t){for(var n=0;n<this.changeListeners.length;++n)this.changeListeners[n](t)},e.prototype.get=function(t,n,r){return n===void 0&&(n={}),this._updateBrowserValues(r),$(this.cookies[t],n)},e.prototype.getAll=function(t,n){t===void 0&&(t={}),this._updateBrowserValues(n);var r={};for(var o in this.cookies)r[o]=$(this.cookies[o],t);return r},e.prototype.set=function(t,n,r){var o;typeof n=="object"&&(n=JSON.stringify(n)),this.cookies=N(N({},this.cookies),(o={},o[t]=n,o)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=G(t,n,r)),this._emitChange({name:t,value:n,options:r})},e.prototype.remove=function(t,n){var r=n=N(N({},n),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=N({},this.cookies),delete this.cookies[t],this.HAS_DOCUMENT_COOKIE&&(document.cookie=G(t,"",r)),this._emitChange({name:t,value:void 0,options:n})},e.prototype.addChangeListener=function(t){this.changeListeners.push(t)},e.prototype.removeChangeListener=function(t){var n=this.changeListeners.indexOf(t);n>=0&&this.changeListeners.splice(n,1)},e}();const Pe=_e,M="cartv2",V="cart",re=m.createContext(void 0);var v=(e=>(e.DiscountGroup="discountGroup",e.PickableGroup="pickableGroup",e.Bundle="bundle",e.Product="product",e.Course="course",e.LearningPath="learningPath",e.ProductSubscription="productSubscription",e))(v||{}),ne=(e=>(e.Year="year",e.Month="month",e))(ne||{}),_=(e=>(e.WithInstructorAccess="with-instructor-access",e.WithoutInstructorAccess="without-instructor-access",e))(_||{}),y=(e=>(e[e.InitializeCart=0]="InitializeCart",e[e.AddCartItem=1]="AddCartItem",e[e.RemoveCartItem=2]="RemoveCartItem",e[e.ToggleCartItemInstructorAccess=3]="ToggleCartItemInstructorAccess",e))(y||{});function Re(e,t,n){let r=0;t?r=e*t/100:n&&(r=n),r=Math.abs(r);const o=e-r;return o<=0?0:o}function j({total:e,quantity:t=0,priceInCents:n,variation:r,coupon:o,purchasableType:i}){if(e)return e;let a=t,c=n;return c+=(r==null?void 0:r.priceInCents)||0,o&&(i==="bundle"&&a>1&&(c=c*a,a=1),c=Math.round(Re(c,o.percentOff,o.amountOffInCents))),c*a}function Ae(e){return e.purchasableType==="bundle"?e.coupon&&e.coupon.duration==="forever"?j(e):e.priceInCents*(e.quantity||1):null}const Se=e=>{const t={id:V,items:[]};if(!e)return t;try{const r=e.split(".")[0].replace("-","+").replace("_","/"),{cartItems:o=[]}=JSON.parse(window.atob(r));return{...t,items:o}}catch{return t}},oe=e=>{const t={id:V,cartItems:[...e.items]};return window.btoa(JSON.stringify(t))},Oe=(e,t=[],n=0)=>{const r=t.sort((a,c)=>a.seats-c.seats),o=r.find((a,c)=>{const d=c===0?1:r[c-1].seats+1,l=c===r.length+1?1/0:a.seats;return e>=d&&e<=l});return((o==null?void 0:o.priceInCents)||n)*e},Te=({purchasableType:e,purchasable:t,coupon:n,interval:r,quantity:o=1})=>{const{priceInCents:i,id:a,name:c,asset:d}=t,{clientSubscription:l,isBulkPurchase:p=!1,seatTiers:h,lastTierPriceInCents:g,annualPriceInCents:C=0,title:k,instructorAccessPriceInCents:b,suffixedTitle:f,selectedCourseIds:w=[],currentPriceInCents:P=0}=t;let I=i||0;l||p?I=Oe(o,h,g)/o:r===ne.Year&&(I=C),n&&(I=j({quantity:1,priceInCents:I,coupon:n}));const H={purchasableType:e,purchasableId:a,title:k||c||"",asset:d,interval:r,priceInCents:I,couponCode:n==null?void 0:n.code,instructorAccessPriceInCents:b,quantity:o,relatedProducts:[],relatedCourseGroups:[],isBulkPurchase:p};return e===v.PickableGroup?{...H,title:f||"",courses:[...w],priceInCents:p?I:P}:H},z=({purchasableId:e,purchasableType:t})=>({purchasableId:n,purchasableType:r})=>(t===v.Bundle||n===e)&&r===t,ae=({quantity:e,variationLabel:t,priceInCents:n,instructorAccessPriceInCents:r,purchasableType:o})=>{const c=t===_.WithInstructorAccess?{...{priceInCents:r}}:void 0;return{quantity:e,priceInCents:n,purchasableType:o,variation:c}},F=e=>j(ae(e)),qe=e=>Ae(ae(e)),Ee=e=>e.reduce((t,n)=>t+F(n),0),Ue=({purchasableType:e})=>e===v.ProductSubscription||e===v.Bundle,Be=e=>!F(e)&&!qe(e),Le=e=>e.filter(t=>Be(t)).length===e.length,ze={cart:{id:V,items:[]},isInitialized:!1};function Me(e,t){switch(t.type){case y.InitializeCart:return e.isInitialized?{...e}:{...e,cart:{...t.cart},isInitialized:!0};case y.AddCartItem:{if(e.isInitialized){const n=z(t.item),{items:r,foundExistingItem:o}=e.cart.items.reduce((i,a)=>(!i.foundExistingItem&&n(a)?(i.foundExistingItem=!0,a.purchasableType===v.Product?i.items.push({...a,quantity:a.quantity+t.item.quantity}):i.items.push({...t.item})):i.items.push({...a}),i),{items:[]});return o||r.push({...t.item}),{...e,cart:{...e.cart,items:r}}}return{...e}}case y.RemoveCartItem:{if(e.isInitialized){const n=z(t.item);return{...e,cart:{...e.cart,items:e.cart.items.filter(r=>!n(r))}}}return{...e}}case y.ToggleCartItemInstructorAccess:{if(e.isInitialized){const n=z(t.item),{items:r}=e.cart.items.reduce((o,i)=>(!o.foundExistingItem&&n(i)?(o.foundExistingItem=!0,o.items.push({...i,variationLabel:i.variationLabel===_.WithInstructorAccess?_.WithoutInstructorAccess:_.WithInstructorAccess})):o.items.push({...i}),o),{items:[]});return{...e,cart:{...e.cart,items:r}}}return{...e}}}}function De(e,t){const n=m.useCallback((o,i)=>{t.set(e,o,i)},[e]),r=m.useCallback((o,i)=>{const a=Me(o,i),{cart:c}=a;return i.type!==y.InitializeCart&&n(oe(c),{secure:!1,httpOnly:!1}),a},[n]);return m.useReducer(r,ze)}const Ve=({children:e,checkoutUrl:t})=>{const n=new Pe,[r,o]=De(M,n),i=m.useCallback(l=>{const p=Te(l);o({type:y.AddCartItem,item:p})},[]),a=m.useCallback(l=>{o({type:y.RemoveCartItem,item:l})},[]),c=m.useCallback(l=>{o({type:y.ToggleCartItemInstructorAccess,item:l})},[]);m.useEffect(()=>{r.isInitialized||o({type:y.InitializeCart,cart:Se(n.get(M))})},[r]);const d=m.useMemo(()=>({items:[...r.cart.items],isInitialized:r.isInitialized,totalQuantity:r.cart.items.reduce((l,p)=>l+p.quantity,0),addPurchaseableItem:l=>i(l),removeItem:l=>a(l),toggleItemInstructorAccess:l=>c(l),checkoutUrl:t}),[r,i,a,t]);return s(re.Provider,{value:d,children:e})};try{provider.displayName="provider",provider.__docgenInfo={description:"The `CartProvider` component creates a context for using a cart. It creates a cart object and callbacks\nthat can be accessed by any descendent component using the `useCart` hook and related hooks.\n\nYou must use this component if you want to use the `useCart` hook or related hooks, or if you would like\nto use the `CartCheckoutButton` component.",displayName:"provider",props:{checkoutUrl:{defaultValue:null,description:"url for checkout link",name:"checkoutUrl",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}}}}}catch{}function A(){const e=ee.useContext(re);if(!e)throw new Error("Expected a Cart Context, but no Cart Context was found");return e}const je=e=>{const t=e.map(({purchasableId:n,purchasableType:r,quantity:o,isBulkPurchase:i,couponCode:a,interval:c,variationLabel:d,courses:l,priceInCents:p})=>({purchasableId:n,purchasableType:r,quantity:o,isBulkPurchase:i,couponCode:a,interval:c,variationLabel:d,courses:l,priceInCents:p||void 0}));return JSON.stringify(t)};function se(){const[e,t]=m.useState(!1),{isInitialized:n,checkoutUrl:r,items:o}=A(),i=m.useCallback(()=>t(!0),[]);return m.useEffect(()=>{e&&r&&n&&(window.location.href=`${r}?cart=${encodeURIComponent(je(o))}`)},[e,n,r,o]),{isCheckoutRequested:e,startCheckout:i}}const ce=m.createContext(void 0),Fe=({children:e,...t})=>{const[n,r]=m.useState(!1),o=m.useCallback(()=>{r(!0)},[r]),i=m.useCallback(()=>{r(!1)},[r]),a=m.useCallback(()=>{r(d=>!d)},[r]),c=m.useMemo(()=>({isCartOpen:n,openCart:o,closeCart:i,toggleCart:a}),[n,o,i,a]);return s(ce.Provider,{value:c,children:s(Ve,{...t,children:e})})};try{provider.displayName="provider",provider.__docgenInfo={description:"A component that defines the behavior that occurs when a user is interacting with\na cart (for example, opening or closing it), it also creates a cart object and\nprovides callbacks that can be accessed by any descendent component using the\n`useCartUI` hook, the `useCart` hook, and related hooks.",displayName:"provider",props:{checkoutUrl:{defaultValue:null,description:"url for checkout link",name:"checkoutUrl",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}}}}}catch{}function Q(){const e=ee.useContext(ce);if(!e)throw new Error("Expected a Cart UI Context, but no Cart UI Context was found");return e}const E=m.forwardRef(({purchasableType:e,purchasable:t,coupon:n,interval:r,quantity:o,children:i,shouldOpenCart:a,...c},d)=>{const{instructorAccessPriceInCents:l}=t,[p,h]=m.useState(!1),{isCheckoutRequested:g,startCheckout:C}=se(),{isInitialized:k,addPurchaseableItem:b}=A(),{openCart:f}=Q(),w=!k||p||g||c.disabled;return m.useEffect(()=>{p&&k&&h(!1)},[k,p]),s("button",{...c,ref:d,disabled:w,onClick:()=>{h(!0),b({purchasableType:e,purchasable:t,coupon:n,interval:r,quantity:o});const P=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/.test(navigator.userAgent);a&&P&&l?C():a&&f()},children:i})});E.displayName="AddToCartButton";try{E.displayName="AddToCartButton",E.__docgenInfo={description:"The `AddToCartButton` component renders a button that adds a purchaseable item to the cart\nwhen pressed. With additional props, it will follow up with step to either open the cart modal\nor take the user directly to the checkout flow. It must be a descendent of the `CartUIProvider`\ncomponent.",displayName:"AddToCartButton",props:{purchasableType:{defaultValue:null,description:"type of purchaseable item (one of the ecommerce item type)",name:"purchasableType",required:!0,type:{name:"enum",value:[{value:'"discountGroup"'},{value:'"pickableGroup"'},{value:'"bundle"'},{value:'"product"'},{value:'"course"'},{value:'"learningPath"'},{value:'"productSubscription"'}]}},purchasable:{defaultValue:null,description:"object of the purchaseable item",name:"purchasable",required:!0,type:{name:"PurchaseableItem"}},coupon:{defaultValue:null,description:"optional coupon object",name:"coupon",required:!1,type:{name:"Coupon"}},interval:{defaultValue:null,description:"optional payment interval (one of the interval type)",name:"interval",required:!1,type:{name:"enum",value:[{value:'"year"'},{value:'"month"'}]}},quantity:{defaultValue:null,description:"optional quantity (a default value will be applied when not sepcified)",name:"quantity",required:!1,type:{name:"number"}},shouldOpenCart:{defaultValue:null,description:"option to open cart modal as a follow-up action",name:"shouldOpenCart",required:!1,type:{name:"boolean"}}}}}catch{}const U=m.forwardRef(({children:e,...t},n)=>{const{isInitialized:r}=A(),{isCheckoutRequested:o,startCheckout:i}=se(),a=!r||o||t.disabled;return s("button",{...t,ref:n,disabled:a,onClick:i,children:e})});U.displayName="CartCheckoutButton";try{U.displayName="CartCheckoutButton",U.__docgenInfo={description:"The `CartCheckoutButton` component renders a button that redirects to the checkout URL for the cart.\nIt must be a descendent of a `CartProvider` component.",displayName:"CartCheckoutButton",props:{}}}catch{}const ie={},W=pe`
  query RelatedProducts($productIds: [ID!]!, $courseIds: [ID!]!) {
    RelatedProducts(productIds: $productIds, courseIds: $courseIds) {
      id
      asset
      name
      suggestedRetailPriceInCents
      priceInCents
    }
  }
`;function D(e){const t={...ie,...e};return me(W,t)}function K(e){const t={...ie,...e};return he(W,t)}try{D.displayName="useRelatedProductsQuery",D.__docgenInfo={description:"__useRelatedProductsQuery__\n\nTo run a query within a React component, call `useRelatedProductsQuery` and pass it any options that fit your needs.\nWhen your component renders, `useRelatedProductsQuery` returns an object from Apollo Client that contains loading, error, and data properties\nyou can use to render your UI.",displayName:"useRelatedProductsQuery",props:{}}}catch{}try{K.displayName="useRelatedProductsLazyQuery",K.__docgenInfo={description:"",displayName:"useRelatedProductsLazyQuery",props:{}}}catch{}const le=()=>{const{items:e}=A(),{toggleCart:t}=Q(),{t:n}=L(),r=m.useCallback(()=>{t()},[]);return u("button",{className:"transition-colors ease-in-out duration-200 leading-normal cursor-pointer text-center text-black hover:text-blue-700 focus:outline focus:outline-1 focus:outline-blue-500 focus:shadow focus:shadow-blue-500 p-4",id:"cart-button",onClick:r,children:[n("header-cart"),u("span",{children:["(",e.length,")"]})]})};le.displayName="CartButton";const Qe="en-US",We="USD",ue=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),He=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"none",viewBox:"0 0 82 82",stroke:"currentColor",children:s("path",{d:"M45.525,40.357l-3.041,6.492h-3.613l-3.141-6.492c0-0.623,0.504-1.125,1.127-1.125H44.4 C45.021,39.233,45.525,39.735,45.525,40.357z M42.146,47.527h-3.039c-0.119,0-0.217,0.09-0.225,0.209l-1.465,22.404 c-0.002,0.049,0.01,0.096,0.035,0.135l2.928,4.617c0.041,0.064,0.111,0.104,0.186,0.104c0.002,0,0.004,0,0.006,0 c0.074,0,0.143-0.035,0.186-0.101l3.152-4.613c0.027-0.043,0.043-0.092,0.037-0.145l-1.574-22.402 C42.362,47.617,42.266,47.527,42.146,47.527z M40.509,34.434c9.506,0,17.215-7.709,17.215-17.217S50.016,0,40.509,0 C31,0,23.292,7.709,23.292,17.217S31,34.434,40.509,34.434z M69.854,57.648v17.869h-0.121l-1.15,0.584 C68,76.395,58.609,81.016,42.41,81.016c-8.295,0-18.373-1.211-29.971-4.834l-1.232-0.385l-0.045-0.279V57.648 c0-12.154,9.889-22.042,22.041-22.042h14.607C59.967,35.606,69.854,45.494,69.854,57.648z M67.508,57.648 c0-10.858-8.836-19.695-19.697-19.695H33.202c-10.859,0-19.693,8.836-19.693,19.695V73.17l-0.008,0.549 c33.254,10.385,53.762,0.184,53.969,0.078l0.037-0.627V57.648z"})}),Ge=()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"w-full h-full",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),$e=({items:e,priceFormatFn:t})=>{const{t:n}=L(),r=e.reduce((c,{purchasableId:d,purchasableType:l})=>(l===v.Product?c.productIds.push(d):l===v.Course&&c.courseIds.push(d),c),{productIds:[],courseIds:[]}),{data:o,error:i,loading:a}=D({variables:r});return a?s(fe,{}):i||!o||!o.RelatedProducts.length?null:u(q,{children:[s("span",{className:"text-lg text-accent",children:n("relatedProducts.checkout")}),s("ul",{className:"ml-8 mb-4 flex flex-col",children:o.RelatedProducts.map((c,d)=>{const{asset:l,name:p,suggestedRetailPriceInCents:h,priceInCents:g}=c,C={purchasableType:v.Product,purchasable:c,className:"py-1 px-3 mb-4 inline-block text-xs font-normal leading-normal relative transition-colors ease-in-out duration-200 text-accent-contrast bg-accent border border-solid border-accent hover:border-accent-hover hover:bg-accent-hover"};return s("li",{children:u("div",{className:"py-2 border-b border-solid border-gray-300 grid grid-cols-4",children:[u("div",{className:"px-4 flex flex-row col-span-full md:col-span-3",children:[s(de,{asset:l,name:p,width:75,height:75,className:"w-[75px] h-[75px]"}),s("p",{className:"m-2 text-lg leading-tight",children:p})]}),s("div",{className:"pl-4 pt-2 col-span-full md:col-span-1 text-right",children:u("div",{children:[u("div",{className:"price flex flex-row md:flex-col justify-end gap-0.5",children:[g&&s("span",{className:"text-base text-accent",children:t(g)}),h&&s("span",{className:"text-gray-700 line-through text-sm",children:t(h)})]}),s(E,{...C,children:n("product.add-to-cart")})]})})]})},d)})})]})},de=({asset:e,name:t,className:n="",width:r,height:o})=>s("img",{className:ge("border border-solid border-gray-300",n),width:r,height:o,alt:t,src:e||"https://d36ai2hkxl16us.cloudfront.net/thoughtindustries/image/upload/v1440546308/qj7eo4nseeiigiec5huh.png"}),Ke=({item:e,priceFormatFn:t,removeItem:n,toggleItemInstructorAccess:r})=>{const{title:o,asset:i,quantity:a,couponCode:c,instructorAccessPriceInCents:d,interval:l,variationLabel:p}=e,{t:h}=L(),g=p===_.WithInstructorAccess,C=F(e);return u("div",{className:"flex flex-col",children:[u("div",{className:"py-2 grid grid-cols-4",children:[u("div",{className:"flex flex-row px-4 col-span-full md:col-span-3",children:[s(de,{asset:i,width:100,height:100,className:"w-[100px] h-[100px]"}),u("div",{className:"m-2",children:[s("p",{className:"text-gray-800 text-xl mb-2",children:o}),u("p",{className:"text-gray-700 text-sm mb-4",children:[u("span",{children:[h("quantity")," ",a]}),c&&u(q,{children:[" ","/"," ",u("span",{children:[h("cart.coupon")," ",c]})]})]}),g&&u("div",{children:[s("span",{className:"text-gray-700 text-sm",children:h("cart.instructor-access-added")}),s("button",{onClick:()=>r(e),className:"btn btn--link btn--primary text-sm ml-2 transition-colors ease-in-out duration-200 text-accent hover:text-blue-700 focus:outline focus:outline-1 focus:outline-blue-500 focus:shadow focus:shadow-blue-500",children:h("undo")})]})]})]}),s("div",{className:"pl-4 pt-2 col-span-full md:col-span-1 text-right",children:u("div",{className:"w-full md:w-1/2 md:float-right",children:[u("div",{className:"text-lg font-bold",children:[t(C),l&&u(q,{children:[" / ",l]})]}),s("button",{onClick:()=>n(e),className:"inline-block text-xs font-normal leading-normal relative transition-colors ease-in-out duration-200 text-gray-700 hover:text-blue-700 focus:outline focus:outline-1 focus:outline-blue-500 focus:shadow focus:shadow-blue-500",children:u("span",{className:"flex items-center gap-x-1",children:[s("i",{className:"inline-block w-3 h-3","aria-label":"delete",children:s(ue,{})}),h("remove")]})})]})})]}),!g&&d&&u("div",{className:"bg-gray-100 mb-4 p-4 md:bg-gradient-to-b md:from-white md:to-gray-100 grid grid-cols-3 gap-8",children:[s("div",{className:"col-span-full md:col-span-2",children:u("div",{className:"grid grid-cols-12",children:[s("div",{className:"col-span-2 md:col-span-3 px-4",children:s("span",{className:"block pt-3 md:pt-0 rounded-full md:border-2 md:border-solid md:border-accent md:bg-white flex justify-center items-center md:w-20 md:h-20",children:s("i",{className:"w-10 f-10 md:w-8 md:h-8","aria-label":"business user",children:s(He,{})})})}),u("div",{className:"col-span-10 md:col-span-9",children:[s("p",{className:"leading-6 text-gray-800 text-base font-bold my-2",children:h("cart.instructor-access-headline")}),s("p",{className:"leading-4 text-gray-700 text-xs font-normal",children:h("cart.instructor-access-body")})]})]})}),u("div",{className:"col-span-full md:col-span-1 flex flex-row-reverse md:flex-col items-end gap-4 md:gap-2",children:[s("span",{children:t(d)}),s("button",{onClick:()=>r(e),className:"py-1 px-2 inline-block text-xs font-normal leading-normal relative transition-colors ease-in-out duration-200 text-accent-contrast bg-accent border border-solid border-accent hover:border-accent-hover hover:bg-accent-hover",children:u("span",{className:"flex items-center gap-x-1",children:[s("i",{className:"inline-block w-3 h-3","aria-label":"plus",children:s(Ge,{})}),h("cart.add-instructor-button")]})})]})]})]})},B=({priceFormat:e,companyDefaultLocale:t,currencyCode:n})=>{const{items:r,removeItem:o,toggleItemInstructorAccess:i}=A(),{isCartOpen:a,closeCart:c}=Q(),{t:d}=L(),p=!!r.length,h=r.some(({quantity:f})=>f>0),g=r.some(f=>Ue(f)&&f.quantity>0),C=Le(r),k=Ee(r);let b;if(e)b=e;else{const f=t??Qe,w=n??We,P=new Intl.NumberFormat(f,{style:"currency",currency:w});b=I=>P.format(I/100)}return u(S,{className:"relative z-[9000]",open:a,onClose:c,children:[s(S.Overlay,{className:"fixed inset-0 bg-black opacity-[.35]","aria-hidden":"true"}),s("div",{className:"fixed top-0 inset-x-0 m-0 md:mt-12 md:mx-auto w-full md:max-w-[960px] h-full md:h-auto",children:u("div",{className:"w-full h-full rounded overflow-hidden bg-white md:border-4 md:border-solid md:border-gray-400/50",children:[u(S.Title,{as:"div",className:"border-b-4 border-solid border-gray-400/50 p-4 relative flex items-center justify-between gap-x-1",children:[s("h4",{className:"font-bold text-accent font-secondary",children:d("cart.header",{count:r.length})}),s("button",{className:"w-5 h-5","aria-label":"close",onClick:c,children:s(ue,{})})]}),u("div",{className:"p-4 relative h-[calc(100vh-60px)] md:h-auto md:max-h-[calc(100vh-156px)] overflow-y-auto",children:[s(S.Description,{as:"div",className:"flex flex-col divide-y divide-gray-400",children:p?r.map((f,w)=>s(Ke,{item:f,priceFormatFn:b,removeItem:o,toggleItemInstructorAccess:i},w)):d("cart.empty")}),h&&u("div",{className:"border-solid border-t-2 border-accent text-accent text-xl bg-gray-100 text-right p-4",children:[C&&d("free-purchase"),!C&&u(q,{children:[s("span",{className:"text-black font-semibold",children:d(g?"total-due-now":"total")})," ",b(k)]})]}),u("div",{className:"flex flex-col-reverse md:flex-row justify-end gap-2 py-4",children:[s("button",{onClick:c,className:"py-2 px-4 inline-block text-sm font-normal leading-normal relative transition-colors ease-in-out duration-200 text-gray-800 bg-gray-100 border border-solid border-gray-400 hover:border-gray-600 hover:text-gray-600 hover:bg-white",children:d("product.continue")}),p&&s(U,{className:"py-2 px-4 inline-block text-sm font-normal leading-normal relative transition-colors ease-in-out duration-200 text-accent-contrast bg-accent border border-solid border-accent hover:border-accent-hover hover:bg-accent-hover",children:d("cart.checkout")})]}),s("div",{className:"px-4",children:s($e,{items:r,priceFormatFn:b})})]})]})})]})};B.displayName="CartModal";try{B.displayName="CartModal",B.__docgenInfo={description:"",displayName:"CartModal",props:{priceFormat:{defaultValue:null,description:"optional function for prioritized price formatting",name:"priceFormat",required:!1,type:{name:"PriceFormatFn"}},companyDefaultLocale:{defaultValue:null,description:"company property to format price",name:"companyDefaultLocale",required:!1,type:{name:"string"}},currencyCode:{defaultValue:null,description:"currency code to format price",name:"currencyCode",required:!1,type:{name:"string"}}}}}catch{}const R=({children:e,priceFormat:t,companyDefaultLocale:n,currencyCode:r,...o})=>u(Fe,{...o,children:[e,s(B,{priceFormat:t,companyDefaultLocale:n,currencyCode:r})]});R.displayName="Cart";try{R.displayName="Cart",R.__docgenInfo={description:"",displayName:"Cart",props:{checkoutUrl:{defaultValue:null,description:"url for checkout link",name:"checkoutUrl",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}},priceFormat:{defaultValue:null,description:"optional function for prioritized price formatting",name:"priceFormat",required:!1,type:{name:"PriceFormatFn"}},companyDefaultLocale:{defaultValue:null,description:"company property to format price",name:"companyDefaultLocale",required:!1,type:{name:"string"}},currencyCode:{defaultValue:null,description:"currency code to format price",name:"currencyCode",required:!1,type:{name:"string"}}}}}catch{}const ft={component:R,title:"Packages/Cart"},Je={purchasableType:"product",purchasableId:"product-1",title:"Test Product",priceInCents:1e3,quantity:5,isBulkPurchase:!1},Ye={purchasableType:"bundle",purchasableId:"bundle-1",title:"Test bundle",interval:"month",priceInCents:100,quantity:1,isBulkPurchase:!1},Xe={purchasableType:"learningPath",purchasableId:"learning-path-1",title:"Test learning path",priceInCents:2e3,quantity:10,isBulkPurchase:!0},Ze={purchasableType:"course",purchasableId:"course-1",title:"Test course",priceInCents:200,quantity:1,instructorAccessPriceInCents:300,isBulkPurchase:!1},et={items:[Je,Ye,Xe,Ze]},tt={[M]:oe(et)},J={id:"product-2",name:"Test product 2",suggestedRetailPriceInCents:2e3,priceInCents:2500},x=(e,t,n)=>({request:{query:W,variables:{productIds:e,courseIds:t}},result:{data:{RelatedProducts:n?[J]:[]}},newData:()=>({data:{RelatedProducts:n?[J]:[]}})}),rt=[x(["product-1"],["course-1"],!0),x([],["course-1"],!1),x(["product-1"],[],!0),x([],[],!1),x(["product-1","product-2"],["course-1"],!1),x(["product-1","product-2"],[],!1),x(["product-2"],["course-1"],!1),x(["product-2"],[],!1)],nt={watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},T={render:e=>s(R,{...e,children:s(le,{})}),args:{checkoutUrl:"/checkout"},parameters:{cookie:{...tt},apolloClient:{addTypename:!1,defaultOptions:nt,mocks:rt}}};var Y,X,Z;T.parameters={...T.parameters,docs:{...(Y=T.parameters)==null?void 0:Y.docs,source:{originalSource:`{
  render: args => <Cart {...args}>
      <CartButton />
    </Cart>,
  args: {
    checkoutUrl: '/checkout'
  },
  parameters: {
    cookie: {
      ...mockCookie
    },
    apolloClient: {
      addTypename: false,
      defaultOptions: mockedApolloProviderOptions,
      mocks: mockApolloResults
    }
  }
}`,...(Z=(X=T.parameters)==null?void 0:X.docs)==null?void 0:Z.source}}};const gt=["Base"];export{T as Base,gt as __namedExportsOrder,ft as default};
//# sourceMappingURL=Cart.stories-260aec77.js.map
