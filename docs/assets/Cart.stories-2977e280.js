import{j as y,a as C,F as ie}from"./jsx-runtime-b91f6123.js";import{r as k,R as Ve}from"./index-64f120e9.js";import{g as It,u as Ct,a as Bt}from"./content-header-5dd6a3a7.js";import{u as ae}from"./useTranslation-99ac2b2e.js";import{A as te}from"./headlessui.esm-e8de6dbf.js";import{c as bt}from"./clsx.m-1229b3e0.js";import{L as Et}from"./course-run-ce009bd6.js";import"./tslib.es6-14bf6d9f.js";import"./ApolloContext-43df6d1c.js";import"./nonIterableRest-b538ebd6.js";import"./index-3bfc112c.js";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var je=_t,Le=Nt,kt=decodeURIComponent,At=encodeURIComponent,Ft=/; */,re=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function _t(i,s){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var l={},u=s||{},h=i.split(Ft),f=u.decode||kt,p=0;p<h.length;p++){var o=h[p],m=o.indexOf("=");if(!(m<0)){var g=o.substr(0,m).trim(),x=o.substr(++m,o.length).trim();x[0]=='"'&&(x=x.slice(1,-1)),l[g]==null&&(l[g]=Ut(x,f))}}return l}function Nt(i,s,l){var u=l||{},h=u.encode||At;if(typeof h!="function")throw new TypeError("option encode is invalid");if(!re.test(i))throw new TypeError("argument name is invalid");var f=h(s);if(f&&!re.test(f))throw new TypeError("argument val is invalid");var p=i+"="+f;if(u.maxAge!=null){var o=u.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");p+="; Max-Age="+Math.floor(o)}if(u.domain){if(!re.test(u.domain))throw new TypeError("option domain is invalid");p+="; Domain="+u.domain}if(u.path){if(!re.test(u.path))throw new TypeError("option path is invalid");p+="; Path="+u.path}if(u.expires){if(typeof u.expires.toUTCString!="function")throw new TypeError("option expires is invalid");p+="; Expires="+u.expires.toUTCString()}if(u.httpOnly&&(p+="; HttpOnly"),u.secure&&(p+="; Secure"),u.sameSite){var m=typeof u.sameSite=="string"?u.sameSite.toLowerCase():u.sameSite;switch(m){case!0:p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"strict":p+="; SameSite=Strict";break;case"none":p+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return p}function Ut(i,s){try{return s(i)}catch{return i}}function Rt(){return typeof document=="object"&&typeof document.cookie=="string"}function Tt(i,s){return typeof i=="string"?je(i,s):typeof i=="object"&&i!==null?i:{}}function Pt(i,s){return typeof s>"u"&&(s=!i||i[0]!=="{"&&i[0]!=="["&&i[0]!=='"'),!s}function Me(i,s){s===void 0&&(s={});var l=vt(i);if(Pt(l,s.doNotParse))try{return JSON.parse(l)}catch{}return i}function vt(i){return i&&i[0]==="j"&&i[1]===":"?i.substr(2):i}var W=globalThis&&globalThis.__assign||function(){return W=Object.assign||function(i){for(var s,l=1,u=arguments.length;l<u;l++){s=arguments[l];for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(i[h]=s[h])}return i},W.apply(this,arguments)},St=function(){function i(s,l){var u=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=Tt(s,l),new Promise(function(){u.HAS_DOCUMENT_COOKIE=Rt()}).catch(function(){})}return i.prototype._updateBrowserValues=function(s){this.HAS_DOCUMENT_COOKIE&&(this.cookies=je(document.cookie,s))},i.prototype._emitChange=function(s){for(var l=0;l<this.changeListeners.length;++l)this.changeListeners[l](s)},i.prototype.get=function(s,l,u){return l===void 0&&(l={}),this._updateBrowserValues(u),Me(this.cookies[s],l)},i.prototype.getAll=function(s,l){s===void 0&&(s={}),this._updateBrowserValues(l);var u={};for(var h in this.cookies)u[h]=Me(this.cookies[h],s);return u},i.prototype.set=function(s,l,u){var h;typeof l=="object"&&(l=JSON.stringify(l)),this.cookies=W(W({},this.cookies),(h={},h[s]=l,h)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Le(s,l,u)),this._emitChange({name:s,value:l,options:u})},i.prototype.remove=function(s,l){var u=l=W(W({},l),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=W({},this.cookies),delete this.cookies[s],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Le(s,"",u)),this._emitChange({name:s,value:void 0,options:l})},i.prototype.addChangeListener=function(s){this.changeListeners.push(s)},i.prototype.removeChangeListener=function(s){var l=this.changeListeners.indexOf(s);l>=0&&this.changeListeners.splice(l,1)},i}();const Lt=St,me="cartv2",ge="cart",We=k.createContext(void 0);var q=(i=>(i.DiscountGroup="discountGroup",i.PickableGroup="pickableGroup",i.Bundle="bundle",i.Product="product",i.Course="course",i.LearningPath="learningPath",i.ProductSubscription="productSubscription",i))(q||{}),Ge=(i=>(i.Year="year",i.Month="month",i))(Ge||{}),Y=(i=>(i.WithInstructorAccess="with-instructor-access",i.WithoutInstructorAccess="without-instructor-access",i))(Y||{}),O=(i=>(i[i.InitializeCart=0]="InitializeCart",i[i.AddCartItem=1]="AddCartItem",i[i.RemoveCartItem=2]="RemoveCartItem",i[i.ToggleCartItemInstructorAccess=3]="ToggleCartItemInstructorAccess",i))(O||{});function Mt(i,s,l){let u=0;s?u=i*s/100:l&&(u=l),u=Math.abs(u);const h=i-u;return h<=0?0:h}function xe({total:i,quantity:s=0,priceInCents:l,variation:u,coupon:h,purchasableType:f}){if(i)return i;let p=s,o=l;return o+=(u==null?void 0:u.priceInCents)||0,h&&(f==="bundle"&&p>1&&(o=o*p,p=1),o=Math.round(Mt(o,h.percentOff,h.amountOffInCents))),o*p}function Dt(i){return i.purchasableType==="bundle"?i.coupon&&i.coupon.duration==="forever"?xe(i):i.priceInCents*(i.quantity||1):null}var we={},ue={};ue.byteLength=$t;ue.toByteArray=Vt;ue.fromByteArray=Gt;var D=[],v=[],Ot=typeof Uint8Array<"u"?Uint8Array:Array,pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var H=0,qt=pe.length;H<qt;++H)D[H]=pe[H],v[pe.charCodeAt(H)]=H;v["-".charCodeAt(0)]=62;v["_".charCodeAt(0)]=63;function Qe(i){var s=i.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=i.indexOf("=");l===-1&&(l=s);var u=l===s?0:4-l%4;return[l,u]}function $t(i){var s=Qe(i),l=s[0],u=s[1];return(l+u)*3/4-u}function zt(i,s,l){return(s+l)*3/4-l}function Vt(i){var s,l=Qe(i),u=l[0],h=l[1],f=new Ot(zt(i,u,h)),p=0,o=h>0?u-4:u,m;for(m=0;m<o;m+=4)s=v[i.charCodeAt(m)]<<18|v[i.charCodeAt(m+1)]<<12|v[i.charCodeAt(m+2)]<<6|v[i.charCodeAt(m+3)],f[p++]=s>>16&255,f[p++]=s>>8&255,f[p++]=s&255;return h===2&&(s=v[i.charCodeAt(m)]<<2|v[i.charCodeAt(m+1)]>>4,f[p++]=s&255),h===1&&(s=v[i.charCodeAt(m)]<<10|v[i.charCodeAt(m+1)]<<4|v[i.charCodeAt(m+2)]>>2,f[p++]=s>>8&255,f[p++]=s&255),f}function jt(i){return D[i>>18&63]+D[i>>12&63]+D[i>>6&63]+D[i&63]}function Wt(i,s,l){for(var u,h=[],f=s;f<l;f+=3)u=(i[f]<<16&16711680)+(i[f+1]<<8&65280)+(i[f+2]&255),h.push(jt(u));return h.join("")}function Gt(i){for(var s,l=i.length,u=l%3,h=[],f=16383,p=0,o=l-u;p<o;p+=f)h.push(Wt(i,p,p+f>o?o:p+f));return u===1?(s=i[l-1],h.push(D[s>>2]+D[s<<4&63]+"==")):u===2&&(s=(i[l-2]<<8)+i[l-1],h.push(D[s>>10]+D[s>>4&63]+D[s<<2&63]+"=")),h.join("")}var Ie={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ie.read=function(i,s,l,u,h){var f,p,o=h*8-u-1,m=(1<<o)-1,g=m>>1,x=-7,I=l?h-1:0,_=l?-1:1,b=i[s+I];for(I+=_,f=b&(1<<-x)-1,b>>=-x,x+=o;x>0;f=f*256+i[s+I],I+=_,x-=8);for(p=f&(1<<-x)-1,f>>=-x,x+=u;x>0;p=p*256+i[s+I],I+=_,x-=8);if(f===0)f=1-g;else{if(f===m)return p?NaN:(b?-1:1)*(1/0);p=p+Math.pow(2,u),f=f-g}return(b?-1:1)*p*Math.pow(2,f-u)};Ie.write=function(i,s,l,u,h,f){var p,o,m,g=f*8-h-1,x=(1<<g)-1,I=x>>1,_=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=u?0:f-1,P=u?1:-1,U=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(o=isNaN(s)?1:0,p=x):(p=Math.floor(Math.log(s)/Math.LN2),s*(m=Math.pow(2,-p))<1&&(p--,m*=2),p+I>=1?s+=_/m:s+=_*Math.pow(2,1-I),s*m>=2&&(p++,m/=2),p+I>=x?(o=0,p=x):p+I>=1?(o=(s*m-1)*Math.pow(2,h),p=p+I):(o=s*Math.pow(2,I-1)*Math.pow(2,h),p=0));h>=8;i[l+b]=o&255,b+=P,o/=256,h-=8);for(p=p<<h|o,g+=h;g>0;i[l+b]=p&255,b+=P,p/=256,g-=8);i[l+b-P]|=U*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const s=ue,l=Ie,u=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=o,i.SlowBuffer=V,i.INSPECT_MAX_BYTES=50;const h=2147483647;i.kMaxLength=h,o.TYPED_ARRAY_SUPPORT=f(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function p(r){if(r>h)throw new RangeError('The value "'+r+'" is invalid for option "size"');const e=new Uint8Array(r);return Object.setPrototypeOf(e,o.prototype),e}function o(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(r)}return m(r,e,t)}o.poolSize=8192;function m(r,e,t){if(typeof r=="string")return _(r,e);if(ArrayBuffer.isView(r))return P(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(M(r,ArrayBuffer)||r&&M(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(M(r,SharedArrayBuffer)||r&&M(r.buffer,SharedArrayBuffer)))return U(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return o.from(n,e,t);const c=R(r);if(c)return c;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return o.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}o.from=function(r,e,t){return m(r,e,t)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function g(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function x(r,e,t){return g(r),r<=0?p(r):e!==void 0?typeof t=="string"?p(r).fill(e,t):p(r).fill(e):p(r)}o.alloc=function(r,e,t){return x(r,e,t)};function I(r){return g(r),p(r<0?0:S(r)|0)}o.allocUnsafe=function(r){return I(r)},o.allocUnsafeSlow=function(r){return I(r)};function _(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const t=L(r,e)|0;let n=p(t);const c=n.write(r,e);return c!==t&&(n=n.slice(0,c)),n}function b(r){const e=r.length<0?0:S(r.length)|0,t=p(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function P(r){if(M(r,Uint8Array)){const e=new Uint8Array(r);return U(e.buffer,e.byteOffset,e.byteLength)}return b(r)}function U(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,o.prototype),n}function R(r){if(o.isBuffer(r)){const e=S(r.length)|0,t=p(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||he(r.length)?p(0):b(r);if(r.type==="Buffer"&&Array.isArray(r.data))return b(r.data)}function S(r){if(r>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return r|0}function V(r){return+r!=r&&(r=0),o.alloc(+r)}o.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==o.prototype},o.compare=function(e,t){if(M(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),M(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,c=t.length;for(let a=0,d=Math.min(n,c);a<d;++a)if(e[a]!==t[a]){n=e[a],c=t[a];break}return n<c?-1:c<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return o.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const c=o.allocUnsafe(t);let a=0;for(n=0;n<e.length;++n){let d=e[n];if(M(d,Uint8Array))a+d.length>c.length?(o.isBuffer(d)||(d=o.from(d)),d.copy(c,a)):Uint8Array.prototype.set.call(c,d,a);else if(o.isBuffer(d))d.copy(c,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=d.length}return c};function L(r,e){if(o.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||M(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let c=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return de(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Se(r).length;default:if(c)return n?-1:de(r).length;e=(""+e).toLowerCase(),c=!0}}o.byteLength=L;function Z(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return dt(this,e,t);case"utf8":case"utf-8":return Ae(this,e,t);case"ascii":return ut(this,e,t);case"latin1":case"binary":return lt(this,e,t);case"base64":return st(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ht(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}o.prototype._isBuffer=!0;function j(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}o.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)j(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)j(this,t,t+3),j(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)j(this,t,t+7),j(this,t+1,t+6),j(this,t+2,t+5),j(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return e===0?"":arguments.length===0?Ae(this,0,e):Z.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:o.compare(this,e)===0},o.prototype.inspect=function(){let e="";const t=i.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},u&&(o.prototype[u]=o.prototype.inspect),o.prototype.compare=function(e,t,n,c,a){if(M(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),c===void 0&&(c=0),a===void 0&&(a=this.length),t<0||n>e.length||c<0||a>this.length)throw new RangeError("out of range index");if(c>=a&&t>=n)return 0;if(c>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,c>>>=0,a>>>=0,this===e)return 0;let d=a-c,w=n-t;const A=Math.min(d,w),E=this.slice(c,a),F=e.slice(t,n);for(let B=0;B<A;++B)if(E[B]!==F[B]){d=E[B],w=F[B];break}return d<w?-1:w<d?1:0};function Ee(r,e,t,n,c){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,he(t)&&(t=c?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(c)return-1;t=r.length-1}else if(t<0)if(c)t=0;else return-1;if(typeof e=="string"&&(e=o.from(e,n)),o.isBuffer(e))return e.length===0?-1:ke(r,e,t,n,c);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?c?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):ke(r,[e],t,n,c);throw new TypeError("val must be string, number or Buffer")}function ke(r,e,t,n,c){let a=1,d=r.length,w=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;a=2,d/=2,w/=2,t/=2}function A(F,B){return a===1?F[B]:F.readUInt16BE(B*a)}let E;if(c){let F=-1;for(E=t;E<d;E++)if(A(r,E)===A(e,F===-1?0:E-F)){if(F===-1&&(F=E),E-F+1===w)return F*a}else F!==-1&&(E-=E-F),F=-1}else for(t+w>d&&(t=d-w),E=t;E>=0;E--){let F=!0;for(let B=0;B<w;B++)if(A(r,E+B)!==A(e,B)){F=!1;break}if(F)return E}return-1}o.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},o.prototype.indexOf=function(e,t,n){return Ee(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return Ee(this,e,t,n,!1)};function rt(r,e,t,n){t=Number(t)||0;const c=r.length-t;n?(n=Number(n),n>c&&(n=c)):n=c;const a=e.length;n>a/2&&(n=a/2);let d;for(d=0;d<n;++d){const w=parseInt(e.substr(d*2,2),16);if(he(w))return d;r[t+d]=w}return d}function nt(r,e,t,n){return ee(de(e,r.length-t),r,t,n)}function it(r,e,t,n){return ee(yt(e),r,t,n)}function ot(r,e,t,n){return ee(Se(e),r,t,n)}function ct(r,e,t,n){return ee(gt(e,r.length-t),r,t,n)}o.prototype.write=function(e,t,n,c){if(t===void 0)c="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")c=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,c===void 0&&(c="utf8")):(c=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const a=this.length-t;if((n===void 0||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");c||(c="utf8");let d=!1;for(;;)switch(c){case"hex":return rt(this,e,t,n);case"utf8":case"utf-8":return nt(this,e,t,n);case"ascii":case"latin1":case"binary":return it(this,e,t,n);case"base64":return ot(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,e,t,n);default:if(d)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase(),d=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function st(r,e,t){return e===0&&t===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(e,t))}function Ae(r,e,t){t=Math.min(r.length,t);const n=[];let c=e;for(;c<t;){const a=r[c];let d=null,w=a>239?4:a>223?3:a>191?2:1;if(c+w<=t){let A,E,F,B;switch(w){case 1:a<128&&(d=a);break;case 2:A=r[c+1],(A&192)===128&&(B=(a&31)<<6|A&63,B>127&&(d=B));break;case 3:A=r[c+1],E=r[c+2],(A&192)===128&&(E&192)===128&&(B=(a&15)<<12|(A&63)<<6|E&63,B>2047&&(B<55296||B>57343)&&(d=B));break;case 4:A=r[c+1],E=r[c+2],F=r[c+3],(A&192)===128&&(E&192)===128&&(F&192)===128&&(B=(a&15)<<18|(A&63)<<12|(E&63)<<6|F&63,B>65535&&B<1114112&&(d=B))}}d===null?(d=65533,w=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|d&1023),n.push(d),c+=w}return at(n)}const Fe=4096;function at(r){const e=r.length;if(e<=Fe)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Fe));return t}function ut(r,e,t){let n="";t=Math.min(r.length,t);for(let c=e;c<t;++c)n+=String.fromCharCode(r[c]&127);return n}function lt(r,e,t){let n="";t=Math.min(r.length,t);for(let c=e;c<t;++c)n+=String.fromCharCode(r[c]);return n}function dt(r,e,t){const n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let c="";for(let a=e;a<t;++a)c+=xt[r[a]];return c}function ht(r,e,t){const n=r.slice(e,t);let c="";for(let a=0;a<n.length-1;a+=2)c+=String.fromCharCode(n[a]+n[a+1]*256);return c}o.prototype.slice=function(e,t){const n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);const c=this.subarray(e,t);return Object.setPrototypeOf(c,o.prototype),c};function N(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let c=this[e],a=1,d=0;for(;++d<t&&(a*=256);)c+=this[e+d]*a;return c},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let c=this[e+--t],a=1;for(;t>0&&(a*=256);)c+=this[e+--t]*a;return c},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e=e>>>0,t||N(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||N(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||N(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=$(function(e){e=e>>>0,Q(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&J(e,this.length-8);const c=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(c)+(BigInt(a)<<BigInt(32))}),o.prototype.readBigUInt64BE=$(function(e){e=e>>>0,Q(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&J(e,this.length-8);const c=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(c)<<BigInt(32))+BigInt(a)}),o.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let c=this[e],a=1,d=0;for(;++d<t&&(a*=256);)c+=this[e+d]*a;return a*=128,c>=a&&(c-=Math.pow(2,8*t)),c},o.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||N(e,t,this.length);let c=t,a=1,d=this[e+--c];for(;c>0&&(a*=256);)d+=this[e+--c]*a;return a*=128,d>=a&&(d-=Math.pow(2,8*t)),d},o.prototype.readInt8=function(e,t){return e=e>>>0,t||N(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){e=e>>>0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n},o.prototype.readInt16BE=function(e,t){e=e>>>0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n},o.prototype.readInt32LE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e=e>>>0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=$(function(e){e=e>>>0,Q(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&J(e,this.length-8);const c=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(c)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)}),o.prototype.readBigInt64BE=$(function(e){e=e>>>0,Q(e,"offset");const t=this[e],n=this[e+7];(t===void 0||n===void 0)&&J(e,this.length-8);const c=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(c)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)}),o.prototype.readFloatLE=function(e,t){return e=e>>>0,t||N(e,4,this.length),l.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e=e>>>0,t||N(e,4,this.length),l.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||N(e,8,this.length),l.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||N(e,8,this.length),l.read(this,e,!1,52,8)};function T(r,e,t,n,c,a){if(!o.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>c||e<a)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,c){if(e=+e,t=t>>>0,n=n>>>0,!c){const w=Math.pow(2,8*n)-1;T(this,e,t,n,w,0)}let a=1,d=0;for(this[t]=e&255;++d<n&&(a*=256);)this[t+d]=e/a&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,c){if(e=+e,t=t>>>0,n=n>>>0,!c){const w=Math.pow(2,8*n)-1;T(this,e,t,n,w,0)}let a=n-1,d=1;for(this[t+a]=e&255;--a>=0&&(d*=256);)this[t+a]=e/d&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,1,255,0),this[t]=e&255,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function _e(r,e,t,n,c){ve(e,n,c,r,t,7);let a=Number(e&BigInt(4294967295));r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a,a=a>>8,r[t++]=a;let d=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=d,d=d>>8,r[t++]=d,d=d>>8,r[t++]=d,d=d>>8,r[t++]=d,t}function Ne(r,e,t,n,c){ve(e,n,c,r,t,7);let a=Number(e&BigInt(4294967295));r[t+7]=a,a=a>>8,r[t+6]=a,a=a>>8,r[t+5]=a,a=a>>8,r[t+4]=a;let d=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=d,d=d>>8,r[t+2]=d,d=d>>8,r[t+1]=d,d=d>>8,r[t]=d,t+8}o.prototype.writeBigUInt64LE=$(function(e,t=0){return _e(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=$(function(e,t=0){return Ne(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,n,c){if(e=+e,t=t>>>0,!c){const A=Math.pow(2,8*n-1);T(this,e,t,n,A-1,-A)}let a=0,d=1,w=0;for(this[t]=e&255;++a<n&&(d*=256);)e<0&&w===0&&this[t+a-1]!==0&&(w=1),this[t+a]=(e/d>>0)-w&255;return t+n},o.prototype.writeIntBE=function(e,t,n,c){if(e=+e,t=t>>>0,!c){const A=Math.pow(2,8*n-1);T(this,e,t,n,A-1,-A)}let a=n-1,d=1,w=0;for(this[t+a]=e&255;--a>=0&&(d*=256);)e<0&&w===0&&this[t+a+1]!==0&&(w=1),this[t+a]=(e/d>>0)-w&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},o.prototype.writeBigInt64LE=$(function(e,t=0){return _e(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=$(function(e,t=0){return Ne(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ue(r,e,t,n,c,a){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function Re(r,e,t,n,c){return e=+e,t=t>>>0,c||Ue(r,e,t,4),l.write(r,e,t,n,23,4),t+4}o.prototype.writeFloatLE=function(e,t,n){return Re(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return Re(this,e,t,!1,n)};function Te(r,e,t,n,c){return e=+e,t=t>>>0,c||Ue(r,e,t,8),l.write(r,e,t,n,52,8),t+8}o.prototype.writeDoubleLE=function(e,t,n){return Te(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return Te(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,c){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!c&&c!==0&&(c=this.length),t>=e.length&&(t=e.length),t||(t=0),c>0&&c<n&&(c=n),c===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("sourceEnd out of bounds");c>this.length&&(c=this.length),e.length-t<c-n&&(c=e.length-t+n);const a=c-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,c):Uint8Array.prototype.set.call(e,this.subarray(n,c),t),a},o.prototype.fill=function(e,t,n,c){if(typeof e=="string"){if(typeof t=="string"?(c=t,t=0,n=this.length):typeof n=="string"&&(c=n,n=this.length),c!==void 0&&typeof c!="string")throw new TypeError("encoding must be a string");if(typeof c=="string"&&!o.isEncoding(c))throw new TypeError("Unknown encoding: "+c);if(e.length===1){const d=e.charCodeAt(0);(c==="utf8"&&d<128||c==="latin1")&&(e=d)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let a;if(typeof e=="number")for(a=t;a<n;++a)this[a]=e;else{const d=o.isBuffer(e)?e:o.from(e,c),w=d.length;if(w===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=d[a%w]}return this};const G={};function le(r,e,t){G[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(c){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:c,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}le("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),le("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError),le("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,c=t;return Number.isInteger(t)&&Math.abs(t)>2**32?c=Pe(String(t)):typeof t=="bigint"&&(c=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(c=Pe(c)),c+="n"),n+=` It must be ${e}. Received ${c}`,n},RangeError);function Pe(r){let e="",t=r.length;const n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function pt(r,e,t){Q(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&J(e,r.length-(t+1))}function ve(r,e,t,n,c,a){if(r>t||r<e){const d=typeof e=="bigint"?"n":"";let w;throw a>3?e===0||e===BigInt(0)?w=`>= 0${d} and < 2${d} ** ${(a+1)*8}${d}`:w=`>= -(2${d} ** ${(a+1)*8-1}${d}) and < 2 ** ${(a+1)*8-1}${d}`:w=`>= ${e}${d} and <= ${t}${d}`,new G.ERR_OUT_OF_RANGE("value",w,r)}pt(n,c,a)}function Q(r,e){if(typeof r!="number")throw new G.ERR_INVALID_ARG_TYPE(e,"number",r)}function J(r,e,t){throw Math.floor(r)!==r?(Q(r,t),new G.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}const ft=/[^+/0-9A-Za-z-_]/g;function mt(r){if(r=r.split("=")[0],r=r.trim().replace(ft,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function de(r,e){e=e||1/0;let t;const n=r.length;let c=null;const a=[];for(let d=0;d<n;++d){if(t=r.charCodeAt(d),t>55295&&t<57344){if(!c){if(t>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(d+1===n){(e-=3)>-1&&a.push(239,191,189);continue}c=t;continue}if(t<56320){(e-=3)>-1&&a.push(239,191,189),c=t;continue}t=(c-55296<<10|t-56320)+65536}else c&&(e-=3)>-1&&a.push(239,191,189);if(c=null,t<128){if((e-=1)<0)break;a.push(t)}else if(t<2048){if((e-=2)<0)break;a.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;a.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;a.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return a}function yt(r){const e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function gt(r,e){let t,n,c;const a=[];for(let d=0;d<r.length&&!((e-=2)<0);++d)t=r.charCodeAt(d),n=t>>8,c=t%256,a.push(c),a.push(n);return a}function Se(r){return s.toByteArray(mt(r))}function ee(r,e,t,n){let c;for(c=0;c<n&&!(c+t>=e.length||c>=r.length);++c)e[c+t]=r[c];return c}function M(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function he(r){return r!==r}const xt=function(){const r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){const n=t*16;for(let c=0;c<16;++c)e[n+c]=r[t]+r[c]}return e}();function $(r){return typeof BigInt>"u"?wt:r}function wt(){throw new Error("BigInt not supported")}})(we);const Qt=i=>{const s={id:ge,items:[]};if(!i)return s;try{const l=we.Buffer.from(i,"base64").toString("utf8"),{cartItems:u=[]}=JSON.parse(l);return{...s,items:u}}catch{return s}},He=i=>{const s={id:ge,cartItems:[...i.items]};return we.Buffer.from(JSON.stringify(s)).toString("base64")},Ht=(i,s=[],l=0)=>{const u=s.sort((p,o)=>p.seats-o.seats),h=u.find((p,o)=>{const m=o===0?1:u[o-1].seats+1,g=o===u.length+1?1/0:p.seats;return i>=m&&i<=g});return((h==null?void 0:h.priceInCents)||l)*i},Yt=({purchasableType:i,purchasable:s,coupon:l,interval:u,quantity:h=1})=>{const{priceInCents:f,id:p,name:o,asset:m}=s,{clientSubscription:g,isBulkPurchase:x=!1,seatTiers:I,lastTierPriceInCents:_,annualPriceInCents:b=0,title:P,instructorAccessPriceInCents:U,suffixedTitle:R,selectedCourseIds:S=[],currentPriceInCents:V=0}=s;let L=f||0;g||x?L=Ht(h,I,_)/h:u===Ge.Year&&(L=b),l&&(L=xe({quantity:1,priceInCents:L,coupon:l}));const Z={purchasableType:i,purchasableId:p,title:P||o||"",asset:m,interval:u,priceInCents:L,couponCode:l==null?void 0:l.code,instructorAccessPriceInCents:U,quantity:h,relatedProducts:[],relatedCourseGroups:[],isBulkPurchase:x};return i===q.PickableGroup?{...Z,title:R||"",courses:[...S],priceInCents:x?L:V}:Z},fe=({purchasableId:i,purchasableType:s})=>({purchasableId:l,purchasableType:u})=>(s===q.Bundle||l===i)&&u===s,Ye=({quantity:i,variationLabel:s,priceInCents:l,instructorAccessPriceInCents:u,purchasableType:h})=>{const o=s===Y.WithInstructorAccess?{...{priceInCents:u}}:void 0;return{quantity:i,priceInCents:l,purchasableType:h,variation:o}},Ce=i=>xe(Ye(i)),Jt=i=>Dt(Ye(i)),Kt=i=>i.reduce((s,l)=>s+Ce(l),0),Xt=({purchasableType:i})=>i===q.ProductSubscription||i===q.Bundle,Zt=i=>!Ce(i)&&!Jt(i),er=i=>i.filter(s=>Zt(s)).length===i.length,tr={cart:{id:ge,items:[]},isInitialized:!1};function rr(i,s){switch(s.type){case O.InitializeCart:return i.isInitialized?{...i}:{...i,cart:{...s.cart},isInitialized:!0};case O.AddCartItem:{if(i.isInitialized){const l=fe(s.item),{items:u,foundExistingItem:h}=i.cart.items.reduce((f,p)=>(!f.foundExistingItem&&l(p)?(f.foundExistingItem=!0,p.purchasableType===q.Product?f.items.push({...p,quantity:p.quantity+s.item.quantity}):f.items.push({...s.item})):f.items.push({...p}),f),{items:[]});return h||u.push({...s.item}),{...i,cart:{...i.cart,items:u}}}return{...i}}case O.RemoveCartItem:{if(i.isInitialized){const l=fe(s.item);return{...i,cart:{...i.cart,items:i.cart.items.filter(u=>!l(u))}}}return{...i}}case O.ToggleCartItemInstructorAccess:{if(i.isInitialized){const l=fe(s.item),{items:u}=i.cart.items.reduce((h,f)=>(!h.foundExistingItem&&l(f)?(h.foundExistingItem=!0,h.items.push({...f,variationLabel:f.variationLabel===Y.WithInstructorAccess?Y.WithoutInstructorAccess:Y.WithInstructorAccess})):h.items.push({...f}),h),{items:[]});return{...i,cart:{...i.cart,items:u}}}return{...i}}}}function nr(i,s){const l=k.useCallback((h,f)=>{s.set(i,h,f)},[i]),u=k.useCallback((h,f)=>{const p=rr(h,f),{cart:o}=p;if(f.type!==O.InitializeCart){const m=g=>g;l(He(o),{secure:!1,httpOnly:!1,path:"/",encode:m})}return p},[l]);return k.useReducer(u,tr)}const ir=({children:i,checkoutUrl:s})=>{const l=new Lt,[u,h]=nr(me,l),f=k.useCallback(g=>{const x=Yt(g);h({type:O.AddCartItem,item:x})},[]),p=k.useCallback(g=>{h({type:O.RemoveCartItem,item:g})},[]),o=k.useCallback(g=>{h({type:O.ToggleCartItemInstructorAccess,item:g})},[]);k.useEffect(()=>{u.isInitialized||h({type:O.InitializeCart,cart:Qt(l.get(me))})},[u]);const m=k.useMemo(()=>({items:[...u.cart.items],isInitialized:u.isInitialized,totalQuantity:u.cart.items.reduce((g,x)=>g+x.quantity,0),addPurchaseableItem:g=>f(g),removeItem:g=>p(g),toggleItemInstructorAccess:g=>o(g),checkoutUrl:s}),[u,f,p,s]);return y(We.Provider,{value:m,children:i})};try{provider.displayName="provider",provider.__docgenInfo={description:"The `CartProvider` component creates a context for using a cart. It creates a cart object and callbacks\nthat can be accessed by any descendent component using the `useCart` hook and related hooks.\n\nYou must use this component if you want to use the `useCart` hook or related hooks, or if you would like\nto use the `CartCheckoutButton` component.",displayName:"provider",props:{checkoutUrl:{defaultValue:null,description:"url for checkout link",name:"checkoutUrl",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}}}}}catch{}function X(){const i=Ve.useContext(We);if(!i)throw new Error("Expected a Cart Context, but no Cart Context was found");return i}const or=i=>{const s=i.map(({purchasableId:l,purchasableType:u,quantity:h,isBulkPurchase:f,couponCode:p,interval:o,variationLabel:m,courses:g,priceInCents:x})=>({purchasableId:l,purchasableType:u,quantity:h,isBulkPurchase:f,couponCode:p,interval:o,variationLabel:m,courses:g,priceInCents:x||void 0}));return JSON.stringify(s)};function Je(){const[i,s]=k.useState(!1),{isInitialized:l,checkoutUrl:u,items:h}=X(),f=k.useCallback(()=>s(!0),[]);return k.useEffect(()=>{i&&u&&l&&(window.location.href=`${u}?cart=${encodeURIComponent(or(h))}`)},[i,l,u,h]),{isCheckoutRequested:i,startCheckout:f}}const Ke=k.createContext(void 0),cr=({children:i,...s})=>{const[l,u]=k.useState(!1),h=k.useCallback(()=>{u(!0)},[u]),f=k.useCallback(()=>{u(!1)},[u]),p=k.useCallback(()=>{u(m=>!m)},[u]),o=k.useMemo(()=>({isCartOpen:l,openCart:h,closeCart:f,toggleCart:p}),[l,h,f,p]);return y(Ke.Provider,{value:o,children:y(ir,{...s,children:i})})};try{provider.displayName="provider",provider.__docgenInfo={description:"A component that defines the behavior that occurs when a user is interacting with\na cart (for example, opening or closing it), it also creates a cart object and\nprovides callbacks that can be accessed by any descendent component using the\n`useCartUI` hook, the `useCart` hook, and related hooks.",displayName:"provider",props:{checkoutUrl:{defaultValue:null,description:"url for checkout link",name:"checkoutUrl",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}}}}}catch{}function Be(){const i=Ve.useContext(Ke);if(!i)throw new Error("Expected a Cart UI Context, but no Cart UI Context was found");return i}const oe=k.forwardRef(({purchasableType:i,purchasable:s,coupon:l,interval:u,quantity:h,children:f,shouldOpenCart:p,...o},m)=>{const{instructorAccessPriceInCents:g}=s,[x,I]=k.useState(!1),{isCheckoutRequested:_,startCheckout:b}=Je(),{isInitialized:P,addPurchaseableItem:U}=X(),{openCart:R}=Be(),S=!P||x||_||o.disabled;return k.useEffect(()=>{x&&P&&I(!1)},[P,x]),y("button",{...o,ref:m,disabled:S,onClick:()=>{I(!0),U({purchasableType:i,purchasable:s,coupon:l,interval:u,quantity:h});const V=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/.test(navigator.userAgent);p&&V&&g?b():p&&R()},children:f})});oe.displayName="AddToCartButton";try{oe.displayName="AddToCartButton",oe.__docgenInfo={description:"The `AddToCartButton` component renders a button that adds a purchaseable item to the cart\nwhen pressed. With additional props, it will follow up with step to either open the cart modal\nor take the user directly to the checkout flow. It must be a descendent of the `CartUIProvider`\ncomponent.",displayName:"AddToCartButton",props:{purchasableType:{defaultValue:null,description:"type of purchaseable item (one of the ecommerce item type)",name:"purchasableType",required:!0,type:{name:"enum",value:[{value:'"discountGroup"'},{value:'"pickableGroup"'},{value:'"bundle"'},{value:'"product"'},{value:'"course"'},{value:'"learningPath"'},{value:'"productSubscription"'}]}},purchasable:{defaultValue:null,description:"object of the purchaseable item",name:"purchasable",required:!0,type:{name:"PurchaseableItem"}},coupon:{defaultValue:null,description:"optional coupon object",name:"coupon",required:!1,type:{name:"Coupon"}},interval:{defaultValue:null,description:"optional payment interval (one of the interval type)",name:"interval",required:!1,type:{name:"enum",value:[{value:'"year"'},{value:'"month"'}]}},quantity:{defaultValue:null,description:"optional quantity (a default value will be applied when not sepcified)",name:"quantity",required:!1,type:{name:"number"}},shouldOpenCart:{defaultValue:null,description:"option to open cart modal as a follow-up action",name:"shouldOpenCart",required:!1,type:{name:"boolean"}}}}}catch{}const ce=k.forwardRef(({children:i,...s},l)=>{const{isInitialized:u}=X(),{isCheckoutRequested:h,startCheckout:f}=Je(),p=!u||h||s.disabled;return y("button",{...s,ref:l,disabled:p,onClick:f,children:i})});ce.displayName="CartCheckoutButton";try{ce.displayName="CartCheckoutButton",ce.__docgenInfo={description:"The `CartCheckoutButton` component renders a button that redirects to the checkout URL for the cart.\nIt must be a descendent of a `CartProvider` component.",displayName:"CartCheckoutButton",props:{}}}catch{}const Xe={},be=It`
  query RelatedProducts($productIds: [ID!]!, $courseIds: [ID!]!) {
    RelatedProducts(productIds: $productIds, courseIds: $courseIds) {
      id
      asset
      name
      suggestedRetailPriceInCents
      priceInCents
    }
  }
`;function ye(i){const s={...Xe,...i};return Ct(be,s)}function De(i){const s={...Xe,...i};return Bt(be,s)}try{ye.displayName="useRelatedProductsQuery",ye.__docgenInfo={description:"__useRelatedProductsQuery__\n\nTo run a query within a React component, call `useRelatedProductsQuery` and pass it any options that fit your needs.\nWhen your component renders, `useRelatedProductsQuery` returns an object from Apollo Client that contains loading, error, and data properties\nyou can use to render your UI.",displayName:"useRelatedProductsQuery",props:{}}}catch{}try{De.displayName="useRelatedProductsLazyQuery",De.__docgenInfo={description:"",displayName:"useRelatedProductsLazyQuery",props:{}}}catch{}const Ze=()=>{const{items:i}=X(),{toggleCart:s}=Be(),{t:l}=ae(),u=k.useCallback(()=>{s()},[]);return C("button",{className:"transition-colors ease-in-out duration-200 leading-normal cursor-pointer text-center text-black hover:text-blue-700 focus:outline focus:outline-1 focus:outline-blue-500 focus:shadow focus:shadow-blue-500 p-4",id:"cart-button",onClick:u,children:[l("header-cart"),y("span",{children:`(${i.length})`})]})};Ze.displayName="CartButton";const sr="en-US",ar="USD",et=()=>y("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),ur=()=>y("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",fill:"none",viewBox:"0 0 82 82",stroke:"currentColor",children:y("path",{d:"M45.525,40.357l-3.041,6.492h-3.613l-3.141-6.492c0-0.623,0.504-1.125,1.127-1.125H44.4 C45.021,39.233,45.525,39.735,45.525,40.357z M42.146,47.527h-3.039c-0.119,0-0.217,0.09-0.225,0.209l-1.465,22.404 c-0.002,0.049,0.01,0.096,0.035,0.135l2.928,4.617c0.041,0.064,0.111,0.104,0.186,0.104c0.002,0,0.004,0,0.006,0 c0.074,0,0.143-0.035,0.186-0.101l3.152-4.613c0.027-0.043,0.043-0.092,0.037-0.145l-1.574-22.402 C42.362,47.617,42.266,47.527,42.146,47.527z M40.509,34.434c9.506,0,17.215-7.709,17.215-17.217S50.016,0,40.509,0 C31,0,23.292,7.709,23.292,17.217S31,34.434,40.509,34.434z M69.854,57.648v17.869h-0.121l-1.15,0.584 C68,76.395,58.609,81.016,42.41,81.016c-8.295,0-18.373-1.211-29.971-4.834l-1.232-0.385l-0.045-0.279V57.648 c0-12.154,9.889-22.042,22.041-22.042h14.607C59.967,35.606,69.854,45.494,69.854,57.648z M67.508,57.648 c0-10.858-8.836-19.695-19.697-19.695H33.202c-10.859,0-19.693,8.836-19.693,19.695V73.17l-0.008,0.549 c33.254,10.385,53.762,0.184,53.969,0.078l0.037-0.627V57.648z"})}),lr=()=>y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"w-full h-full",viewBox:"0 0 24 24",stroke:"currentColor",children:y("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),dr=({items:i,priceFormatFn:s})=>{const{t:l}=ae(),u=i.reduce((o,{purchasableId:m,purchasableType:g})=>(g===q.Product?o.productIds.push(m):g===q.Course&&o.courseIds.push(m),o),{productIds:[],courseIds:[]}),{data:h,error:f,loading:p}=ye({variables:u});return p?y(Et,{}):f||!h||!h.RelatedProducts.length?null:C(ie,{children:[y("span",{className:"text-lg text-accent",children:l("relatedProducts.checkout")}),y("ul",{className:"ml-8 mb-4 flex flex-col",children:h.RelatedProducts.map((o,m)=>{const{asset:g,name:x,suggestedRetailPriceInCents:I,priceInCents:_}=o,b={purchasableType:q.Product,purchasable:o,className:"py-1 px-3 mb-4 inline-block text-xs font-normal leading-normal relative transition-colors ease-in-out duration-200 text-accent-contrast bg-accent border border-solid border-accent hover:border-accent-hover hover:bg-accent-hover"};return y("li",{children:C("div",{className:"py-2 border-b border-solid border-gray-300 grid grid-cols-4",children:[C("div",{className:"px-4 flex flex-row col-span-full md:col-span-3",children:[y(tt,{asset:g,name:x,width:75,height:75,className:"w-[75px] h-[75px]"}),y("p",{className:"m-2 text-lg leading-tight",children:x})]}),y("div",{className:"pl-4 pt-2 col-span-full md:col-span-1 text-right",children:C("div",{children:[C("div",{className:"price flex flex-row md:flex-col justify-end gap-0.5",children:[_&&y("span",{className:"text-base text-accent",children:s(_)}),I&&y("span",{className:"text-gray-700 line-through text-sm",children:s(I)})]}),y(oe,{...b,children:l("product.add-to-cart")})]})})]})},m)})})]})},tt=({asset:i,name:s,className:l="",width:u,height:h})=>y("img",{className:bt("border border-solid border-gray-300",l),width:u,height:h,alt:s,src:i||"https://d36ai2hkxl16us.cloudfront.net/thoughtindustries/image/upload/v1440546308/qj7eo4nseeiigiec5huh.png"}),hr=({item:i,priceFormatFn:s,removeItem:l,toggleItemInstructorAccess:u})=>{const{title:h,asset:f,quantity:p,couponCode:o,instructorAccessPriceInCents:m,interval:g,variationLabel:x}=i,{t:I}=ae(),_=x===Y.WithInstructorAccess,b=Ce(i);return C("div",{className:"flex flex-col",children:[C("div",{className:"py-2 grid grid-cols-4",children:[C("div",{className:"flex flex-row px-4 col-span-full md:col-span-3",children:[y(tt,{asset:f,width:100,height:100,className:"w-[100px] h-[100px]"}),C("div",{className:"m-2",children:[y("p",{className:"text-gray-800 text-xl mb-2",children:h}),C("p",{className:"text-gray-700 text-sm mb-4",children:[C("span",{children:[I("quantity")," ",p]}),o&&C(ie,{children:[" ","/"," ",C("span",{children:[I("cart.coupon")," ",o]})]})]}),_&&C("div",{children:[y("span",{className:"text-gray-700 text-sm",children:I("cart.instructor-access-added")}),y("button",{onClick:()=>u(i),className:"btn btn--link btn--primary text-sm ml-2 transition-colors ease-in-out duration-200 text-accent hover:text-blue-700 focus:outline focus:outline-1 focus:outline-blue-500 focus:shadow focus:shadow-blue-500",children:I("undo")})]})]})]}),y("div",{className:"pl-4 pt-2 col-span-full md:col-span-1 text-right",children:C("div",{className:"w-full md:w-1/2 md:float-right",children:[C("div",{className:"text-lg font-bold",children:[s(b),g&&C(ie,{children:[" / ",g]})]}),y("button",{onClick:()=>l(i),className:"inline-block text-xs font-normal leading-normal relative transition-colors ease-in-out duration-200 text-gray-700 hover:text-blue-700 focus:outline focus:outline-1 focus:outline-blue-500 focus:shadow focus:shadow-blue-500",children:C("span",{className:"flex items-center gap-x-1",children:[y("i",{className:"inline-block w-3 h-3","aria-label":"delete",children:y(et,{})}),I("remove")]})})]})})]}),!_&&m&&C("div",{className:"bg-gray-100 mb-4 p-4 md:bg-gradient-to-b md:from-white md:to-gray-100 grid grid-cols-3 gap-8",children:[y("div",{className:"col-span-full md:col-span-2",children:C("div",{className:"grid grid-cols-12",children:[y("div",{className:"col-span-2 md:col-span-3 px-4",children:y("span",{className:"block pt-3 md:pt-0 rounded-full md:border-2 md:border-solid md:border-accent md:bg-white flex justify-center items-center md:w-20 md:h-20",children:y("i",{className:"w-10 f-10 md:w-8 md:h-8","aria-label":"business user",children:y(ur,{})})})}),C("div",{className:"col-span-10 md:col-span-9",children:[y("p",{className:"leading-6 text-gray-800 text-base font-bold my-2",children:I("cart.instructor-access-headline")}),y("p",{className:"leading-4 text-gray-700 text-xs font-normal",children:I("cart.instructor-access-body")})]})]})}),C("div",{className:"col-span-full md:col-span-1 flex flex-row-reverse md:flex-col items-end gap-4 md:gap-2",children:[y("span",{children:s(m)}),y("button",{onClick:()=>u(i),className:"py-1 px-2 inline-block text-xs font-normal leading-normal relative transition-colors ease-in-out duration-200 text-accent-contrast bg-accent border border-solid border-accent hover:border-accent-hover hover:bg-accent-hover",children:C("span",{className:"flex items-center gap-x-1",children:[y("i",{className:"inline-block w-3 h-3","aria-label":"plus",children:y(lr,{})}),I("cart.add-instructor-button")]})})]})]})]})},se=({priceFormat:i,companyDefaultLocale:s,currencyCode:l})=>{const{items:u,removeItem:h,toggleItemInstructorAccess:f}=X(),{isCartOpen:p,closeCart:o}=Be(),{t:m}=ae(),x=!!u.length,I=u.some(({quantity:R})=>R>0),_=u.some(R=>Xt(R)&&R.quantity>0),b=er(u),P=Kt(u);let U;if(i)U=i;else{const R=s??sr,S=l??ar,V=new Intl.NumberFormat(R,{style:"currency",currency:S});U=L=>V.format(L/100)}return C(te,{className:"relative z-[9000]",open:p,onClose:o,children:[y(te.Overlay,{className:"fixed inset-0 bg-black opacity-[.35]","aria-hidden":"true"}),y("div",{className:"fixed top-0 inset-x-0 m-0 md:mt-12 md:mx-auto w-full md:max-w-[960px] h-full md:h-auto",children:C("div",{className:"w-full h-full rounded overflow-hidden bg-white md:border-4 md:border-solid md:border-gray-400/50",children:[C(te.Title,{as:"div",className:"border-b-4 border-solid border-gray-400/50 p-4 relative flex items-center justify-between gap-x-1",children:[y("h4",{className:"font-bold text-accent font-secondary",children:m("cart.header",{count:u.length})}),y("button",{className:"w-5 h-5","aria-label":"close",onClick:o,children:y(et,{})})]}),C("div",{className:"p-4 relative h-[calc(100vh-60px)] md:h-auto md:max-h-[calc(100vh-156px)] overflow-y-auto",children:[y(te.Description,{as:"div",className:"flex flex-col divide-y divide-gray-400",children:x?u.map((R,S)=>y(hr,{item:R,priceFormatFn:U,removeItem:h,toggleItemInstructorAccess:f},S)):m("cart.empty")}),I&&C("div",{className:"border-solid border-t-2 border-accent text-accent text-xl bg-gray-100 text-right p-4",children:[b&&m("free-purchase"),!b&&C(ie,{children:[y("span",{className:"text-black font-semibold",children:m(_?"total-due-now":"total")})," ",U(P)]})]}),C("div",{className:"flex flex-col-reverse md:flex-row justify-end gap-2 py-4",children:[y("button",{onClick:o,className:"py-2 px-4 inline-block text-sm font-normal leading-normal relative transition-colors ease-in-out duration-200 text-gray-800 bg-gray-100 border border-solid border-gray-400 hover:border-gray-600 hover:text-gray-600 hover:bg-white",children:m("product.continue")}),x&&y(ce,{className:"py-2 px-4 inline-block text-sm font-normal leading-normal relative transition-colors ease-in-out duration-200 text-accent-contrast bg-accent border border-solid border-accent hover:border-accent-hover hover:bg-accent-hover",children:m("cart.checkout")})]}),y("div",{className:"px-4",children:y(dr,{items:u,priceFormatFn:U})})]})]})})]})};se.displayName="CartModal";try{se.displayName="CartModal",se.__docgenInfo={description:"",displayName:"CartModal",props:{priceFormat:{defaultValue:null,description:"optional function for prioritized price formatting",name:"priceFormat",required:!1,type:{name:"PriceFormatFn"}},companyDefaultLocale:{defaultValue:null,description:"company property to format price",name:"companyDefaultLocale",required:!1,type:{name:"string"}},currencyCode:{defaultValue:null,description:"currency code to format price",name:"currencyCode",required:!1,type:{name:"string"}}}}}catch{}const K=({children:i,priceFormat:s,companyDefaultLocale:l,currencyCode:u,...h})=>C(cr,{...h,children:[i,y(se,{priceFormat:s,companyDefaultLocale:l,currencyCode:u})]});K.displayName="Cart";try{K.displayName="Cart",K.__docgenInfo={description:"",displayName:"Cart",props:{checkoutUrl:{defaultValue:null,description:"url for checkout link",name:"checkoutUrl",required:!0,type:{name:"string"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}},priceFormat:{defaultValue:null,description:"optional function for prioritized price formatting",name:"priceFormat",required:!1,type:{name:"PriceFormatFn"}},companyDefaultLocale:{defaultValue:null,description:"company property to format price",name:"companyDefaultLocale",required:!1,type:{name:"string"}},currencyCode:{defaultValue:null,description:"currency code to format price",name:"currencyCode",required:!1,type:{name:"string"}}}}}catch{}const Pr={component:K,title:"Packages/Cart"},pr={purchasableType:"product",purchasableId:"product-1",title:"Test Product",priceInCents:1e3,quantity:5,isBulkPurchase:!1},fr={purchasableType:"bundle",purchasableId:"bundle-1",title:"Test bundle",interval:"month",priceInCents:100,quantity:1,isBulkPurchase:!1},mr={purchasableType:"learningPath",purchasableId:"learning-path-1",title:"Test learning path",priceInCents:2e3,quantity:10,isBulkPurchase:!0},yr={purchasableType:"course",purchasableId:"course-1",title:"Test course",priceInCents:200,quantity:1,instructorAccessPriceInCents:300,isBulkPurchase:!1},gr={items:[pr,fr,mr,yr]},xr={[me]:He(gr)},Oe={id:"product-2",name:"Test product 2",suggestedRetailPriceInCents:2e3,priceInCents:2500},z=(i,s,l)=>({request:{query:be,variables:{productIds:i,courseIds:s}},result:{data:{RelatedProducts:l?[Oe]:[]}},newData:()=>({data:{RelatedProducts:l?[Oe]:[]}})}),wr=[z(["product-1"],["course-1"],!0),z([],["course-1"],!1),z(["product-1"],[],!0),z([],[],!1),z(["product-1","product-2"],["course-1"],!1),z(["product-1","product-2"],[],!1),z(["product-2"],["course-1"],!1),z(["product-2"],[],!1)],Ir={watchQuery:{fetchPolicy:"no-cache"},query:{fetchPolicy:"no-cache"}},ne={render:i=>y(K,{...i,children:y(Ze,{})}),args:{checkoutUrl:"/checkout"},parameters:{cookie:{...xr},apolloClient:{addTypename:!1,defaultOptions:Ir,mocks:wr}}};var qe,$e,ze;ne.parameters={...ne.parameters,docs:{...(qe=ne.parameters)==null?void 0:qe.docs,source:{originalSource:`{
  render: args => <Cart {...args}>
      <CartButton />
    </Cart>,
  args: {
    checkoutUrl: '/checkout'
  },
  parameters: {
    cookie: {
      ...mockCookie
    },
    apolloClient: {
      addTypename: false,
      defaultOptions: mockedApolloProviderOptions,
      mocks: mockApolloResults
    }
  }
}`,...(ze=($e=ne.parameters)==null?void 0:$e.docs)==null?void 0:ze.source}}};const vr=["Base"];export{ne as Base,vr as __namedExportsOrder,Pr as default};
//# sourceMappingURL=Cart.stories-2977e280.js.map
