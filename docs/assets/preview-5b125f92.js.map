{"version":3,"file":"preview-5b125f92.js","sources":["../../node_modules/@apollo/client/utilities/common/stringifyForDisplay.js","../../node_modules/@apollo/client/cache/core/cache.js","../../node_modules/@apollo/client/cache/core/types/common.js","../../node_modules/@apollo/client/cache/inmemory/entityStore.js","../../node_modules/@apollo/client/cache/inmemory/readFromStore.js","../../node_modules/@apollo/client/cache/inmemory/key-extractor.js","../../node_modules/@apollo/client/cache/inmemory/policies.js","../../node_modules/@apollo/client/cache/inmemory/writeToStore.js","../../node_modules/@apollo/client/cache/inmemory/inMemoryCache.js","../../node_modules/@apollo/client/react/context/ApolloProvider.js","../../node_modules/@babel/runtime/helpers/esm/typeof.js","../../node_modules/react-i18next/dist/es/I18nextProvider.js","../../node_modules/@apollo/client/testing/core/mocking/mockLink.js","../../node_modules/@apollo/client/testing/react/MockedProvider.js","../../node_modules/storybook-addon-cookie/dist/cookieDecorator.js","../../node_modules/storybook-addon-cookie/dist/index.js","../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/esm/inherits.js","../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/@babel/runtime/helpers/esm/toArray.js","../../node_modules/i18next/dist/esm/i18next.js","../../i18n/i18n.ts","../../.storybook/i18next.tsx","../../.storybook/preview.js"],"sourcesContent":["import { makeUniqueId } from \"./makeUniqueId.js\";\nexport function stringifyForDisplay(value) {\n    var undefId = makeUniqueId(\"stringifyForDisplay\");\n    return JSON.stringify(value, function (key, value) {\n        return value === void 0 ? undefId : value;\n    }).split(JSON.stringify(undefId)).join(\"<undefined>\");\n}\n//# sourceMappingURL=stringifyForDisplay.js.map","import { __assign, __rest } from \"tslib\";\nimport { wrap } from 'optimism';\nimport { getFragmentQueryDocument, } from \"../../utilities/index.js\";\nvar ApolloCache = (function () {\n    function ApolloCache() {\n        this.getFragmentDoc = wrap(getFragmentQueryDocument);\n    }\n    ApolloCache.prototype.batch = function (options) {\n        var _this = this;\n        var optimisticId = typeof options.optimistic === \"string\" ? options.optimistic :\n            options.optimistic === false ? null : void 0;\n        var updateResult;\n        this.performTransaction(function () { return updateResult = options.update(_this); }, optimisticId);\n        return updateResult;\n    };\n    ApolloCache.prototype.recordOptimisticTransaction = function (transaction, optimisticId) {\n        this.performTransaction(transaction, optimisticId);\n    };\n    ApolloCache.prototype.transformDocument = function (document) {\n        return document;\n    };\n    ApolloCache.prototype.transformForLink = function (document) {\n        return document;\n    };\n    ApolloCache.prototype.identify = function (object) {\n        return;\n    };\n    ApolloCache.prototype.gc = function () {\n        return [];\n    };\n    ApolloCache.prototype.modify = function (options) {\n        return false;\n    };\n    ApolloCache.prototype.readQuery = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = !!options.optimistic; }\n        return this.read(__assign(__assign({}, options), { rootId: options.id || 'ROOT_QUERY', optimistic: optimistic }));\n    };\n    ApolloCache.prototype.readFragment = function (options, optimistic) {\n        if (optimistic === void 0) { optimistic = !!options.optimistic; }\n        return this.read(__assign(__assign({}, options), { query: this.getFragmentDoc(options.fragment, options.fragmentName), rootId: options.id, optimistic: optimistic }));\n    };\n    ApolloCache.prototype.writeQuery = function (_a) {\n        var id = _a.id, data = _a.data, options = __rest(_a, [\"id\", \"data\"]);\n        return this.write(Object.assign(options, {\n            dataId: id || 'ROOT_QUERY',\n            result: data,\n        }));\n    };\n    ApolloCache.prototype.writeFragment = function (_a) {\n        var id = _a.id, data = _a.data, fragment = _a.fragment, fragmentName = _a.fragmentName, options = __rest(_a, [\"id\", \"data\", \"fragment\", \"fragmentName\"]);\n        return this.write(Object.assign(options, {\n            query: this.getFragmentDoc(fragment, fragmentName),\n            dataId: id,\n            result: data,\n        }));\n    };\n    ApolloCache.prototype.updateQuery = function (options, update) {\n        return this.batch({\n            update: function (cache) {\n                var value = cache.readQuery(options);\n                var data = update(value);\n                if (data === void 0 || data === null)\n                    return value;\n                cache.writeQuery(__assign(__assign({}, options), { data: data }));\n                return data;\n            },\n        });\n    };\n    ApolloCache.prototype.updateFragment = function (options, update) {\n        return this.batch({\n            update: function (cache) {\n                var value = cache.readFragment(options);\n                var data = update(value);\n                if (data === void 0 || data === null)\n                    return value;\n                cache.writeFragment(__assign(__assign({}, options), { data: data }));\n                return data;\n            },\n        });\n    };\n    return ApolloCache;\n}());\nexport { ApolloCache };\n//# sourceMappingURL=cache.js.map","import { __extends } from \"tslib\";\nvar MissingFieldError = (function (_super) {\n    __extends(MissingFieldError, _super);\n    function MissingFieldError(message, path, query, variables) {\n        var _a;\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.path = path;\n        _this.query = query;\n        _this.variables = variables;\n        if (Array.isArray(_this.path)) {\n            _this.missing = _this.message;\n            for (var i = _this.path.length - 1; i >= 0; --i) {\n                _this.missing = (_a = {}, _a[_this.path[i]] = _this.missing, _a);\n            }\n        }\n        else {\n            _this.missing = _this.path;\n        }\n        _this.__proto__ = MissingFieldError.prototype;\n        return _this;\n    }\n    return MissingFieldError;\n}(Error));\nexport { MissingFieldError };\n//# sourceMappingURL=common.js.map","import { __assign, __extends, __rest } from \"tslib\";\nimport { invariant } from \"../../utilities/globals/index.js\";\nimport { dep } from 'optimism';\nimport { equal } from '@wry/equality';\nimport { Trie } from '@wry/trie';\nimport { isReference, makeReference, DeepMerger, maybeDeepFreeze, canUseWeakMap, isNonNullObject, } from \"../../utilities/index.js\";\nimport { hasOwn, fieldNameFromStoreName } from \"./helpers.js\";\nvar DELETE = Object.create(null);\nvar delModifier = function () { return DELETE; };\nvar INVALIDATE = Object.create(null);\nvar EntityStore = (function () {\n    function EntityStore(policies, group) {\n        var _this = this;\n        this.policies = policies;\n        this.group = group;\n        this.data = Object.create(null);\n        this.rootIds = Object.create(null);\n        this.refs = Object.create(null);\n        this.getFieldValue = function (objectOrReference, storeFieldName) { return maybeDeepFreeze(isReference(objectOrReference)\n            ? _this.get(objectOrReference.__ref, storeFieldName)\n            : objectOrReference && objectOrReference[storeFieldName]); };\n        this.canRead = function (objOrRef) {\n            return isReference(objOrRef)\n                ? _this.has(objOrRef.__ref)\n                : typeof objOrRef === \"object\";\n        };\n        this.toReference = function (objOrIdOrRef, mergeIntoStore) {\n            if (typeof objOrIdOrRef === \"string\") {\n                return makeReference(objOrIdOrRef);\n            }\n            if (isReference(objOrIdOrRef)) {\n                return objOrIdOrRef;\n            }\n            var id = _this.policies.identify(objOrIdOrRef)[0];\n            if (id) {\n                var ref = makeReference(id);\n                if (mergeIntoStore) {\n                    _this.merge(id, objOrIdOrRef);\n                }\n                return ref;\n            }\n        };\n    }\n    EntityStore.prototype.toObject = function () {\n        return __assign({}, this.data);\n    };\n    EntityStore.prototype.has = function (dataId) {\n        return this.lookup(dataId, true) !== void 0;\n    };\n    EntityStore.prototype.get = function (dataId, fieldName) {\n        this.group.depend(dataId, fieldName);\n        if (hasOwn.call(this.data, dataId)) {\n            var storeObject = this.data[dataId];\n            if (storeObject && hasOwn.call(storeObject, fieldName)) {\n                return storeObject[fieldName];\n            }\n        }\n        if (fieldName === \"__typename\" &&\n            hasOwn.call(this.policies.rootTypenamesById, dataId)) {\n            return this.policies.rootTypenamesById[dataId];\n        }\n        if (this instanceof Layer) {\n            return this.parent.get(dataId, fieldName);\n        }\n    };\n    EntityStore.prototype.lookup = function (dataId, dependOnExistence) {\n        if (dependOnExistence)\n            this.group.depend(dataId, \"__exists\");\n        if (hasOwn.call(this.data, dataId)) {\n            return this.data[dataId];\n        }\n        if (this instanceof Layer) {\n            return this.parent.lookup(dataId, dependOnExistence);\n        }\n        if (this.policies.rootTypenamesById[dataId]) {\n            return Object.create(null);\n        }\n    };\n    EntityStore.prototype.merge = function (older, newer) {\n        var _this = this;\n        var dataId;\n        if (isReference(older))\n            older = older.__ref;\n        if (isReference(newer))\n            newer = newer.__ref;\n        var existing = typeof older === \"string\"\n            ? this.lookup(dataId = older)\n            : older;\n        var incoming = typeof newer === \"string\"\n            ? this.lookup(dataId = newer)\n            : newer;\n        if (!incoming)\n            return;\n        __DEV__ ? invariant(typeof dataId === \"string\", \"store.merge expects a string ID\") : invariant(typeof dataId === \"string\", 1);\n        var merged = new DeepMerger(storeObjectReconciler).merge(existing, incoming);\n        this.data[dataId] = merged;\n        if (merged !== existing) {\n            delete this.refs[dataId];\n            if (this.group.caching) {\n                var fieldsToDirty_1 = Object.create(null);\n                if (!existing)\n                    fieldsToDirty_1.__exists = 1;\n                Object.keys(incoming).forEach(function (storeFieldName) {\n                    if (!existing || existing[storeFieldName] !== merged[storeFieldName]) {\n                        fieldsToDirty_1[storeFieldName] = 1;\n                        var fieldName = fieldNameFromStoreName(storeFieldName);\n                        if (fieldName !== storeFieldName &&\n                            !_this.policies.hasKeyArgs(merged.__typename, fieldName)) {\n                            fieldsToDirty_1[fieldName] = 1;\n                        }\n                        if (merged[storeFieldName] === void 0 && !(_this instanceof Layer)) {\n                            delete merged[storeFieldName];\n                        }\n                    }\n                });\n                if (fieldsToDirty_1.__typename &&\n                    !(existing && existing.__typename) &&\n                    this.policies.rootTypenamesById[dataId] === merged.__typename) {\n                    delete fieldsToDirty_1.__typename;\n                }\n                Object.keys(fieldsToDirty_1).forEach(function (fieldName) { return _this.group.dirty(dataId, fieldName); });\n            }\n        }\n    };\n    EntityStore.prototype.modify = function (dataId, fields) {\n        var _this = this;\n        var storeObject = this.lookup(dataId);\n        if (storeObject) {\n            var changedFields_1 = Object.create(null);\n            var needToMerge_1 = false;\n            var allDeleted_1 = true;\n            var sharedDetails_1 = {\n                DELETE: DELETE,\n                INVALIDATE: INVALIDATE,\n                isReference: isReference,\n                toReference: this.toReference,\n                canRead: this.canRead,\n                readField: function (fieldNameOrOptions, from) { return _this.policies.readField(typeof fieldNameOrOptions === \"string\" ? {\n                    fieldName: fieldNameOrOptions,\n                    from: from || makeReference(dataId),\n                } : fieldNameOrOptions, { store: _this }); },\n            };\n            Object.keys(storeObject).forEach(function (storeFieldName) {\n                var fieldName = fieldNameFromStoreName(storeFieldName);\n                var fieldValue = storeObject[storeFieldName];\n                if (fieldValue === void 0)\n                    return;\n                var modify = typeof fields === \"function\"\n                    ? fields\n                    : fields[storeFieldName] || fields[fieldName];\n                if (modify) {\n                    var newValue = modify === delModifier ? DELETE :\n                        modify(maybeDeepFreeze(fieldValue), __assign(__assign({}, sharedDetails_1), { fieldName: fieldName, storeFieldName: storeFieldName, storage: _this.getStorage(dataId, storeFieldName) }));\n                    if (newValue === INVALIDATE) {\n                        _this.group.dirty(dataId, storeFieldName);\n                    }\n                    else {\n                        if (newValue === DELETE)\n                            newValue = void 0;\n                        if (newValue !== fieldValue) {\n                            changedFields_1[storeFieldName] = newValue;\n                            needToMerge_1 = true;\n                            fieldValue = newValue;\n                        }\n                    }\n                }\n                if (fieldValue !== void 0) {\n                    allDeleted_1 = false;\n                }\n            });\n            if (needToMerge_1) {\n                this.merge(dataId, changedFields_1);\n                if (allDeleted_1) {\n                    if (this instanceof Layer) {\n                        this.data[dataId] = void 0;\n                    }\n                    else {\n                        delete this.data[dataId];\n                    }\n                    this.group.dirty(dataId, \"__exists\");\n                }\n                return true;\n            }\n        }\n        return false;\n    };\n    EntityStore.prototype.delete = function (dataId, fieldName, args) {\n        var _a;\n        var storeObject = this.lookup(dataId);\n        if (storeObject) {\n            var typename = this.getFieldValue(storeObject, \"__typename\");\n            var storeFieldName = fieldName && args\n                ? this.policies.getStoreFieldName({ typename: typename, fieldName: fieldName, args: args })\n                : fieldName;\n            return this.modify(dataId, storeFieldName ? (_a = {},\n                _a[storeFieldName] = delModifier,\n                _a) : delModifier);\n        }\n        return false;\n    };\n    EntityStore.prototype.evict = function (options, limit) {\n        var evicted = false;\n        if (options.id) {\n            if (hasOwn.call(this.data, options.id)) {\n                evicted = this.delete(options.id, options.fieldName, options.args);\n            }\n            if (this instanceof Layer && this !== limit) {\n                evicted = this.parent.evict(options, limit) || evicted;\n            }\n            if (options.fieldName || evicted) {\n                this.group.dirty(options.id, options.fieldName || \"__exists\");\n            }\n        }\n        return evicted;\n    };\n    EntityStore.prototype.clear = function () {\n        this.replace(null);\n    };\n    EntityStore.prototype.extract = function () {\n        var _this = this;\n        var obj = this.toObject();\n        var extraRootIds = [];\n        this.getRootIdSet().forEach(function (id) {\n            if (!hasOwn.call(_this.policies.rootTypenamesById, id)) {\n                extraRootIds.push(id);\n            }\n        });\n        if (extraRootIds.length) {\n            obj.__META = { extraRootIds: extraRootIds.sort() };\n        }\n        return obj;\n    };\n    EntityStore.prototype.replace = function (newData) {\n        var _this = this;\n        Object.keys(this.data).forEach(function (dataId) {\n            if (!(newData && hasOwn.call(newData, dataId))) {\n                _this.delete(dataId);\n            }\n        });\n        if (newData) {\n            var __META = newData.__META, rest_1 = __rest(newData, [\"__META\"]);\n            Object.keys(rest_1).forEach(function (dataId) {\n                _this.merge(dataId, rest_1[dataId]);\n            });\n            if (__META) {\n                __META.extraRootIds.forEach(this.retain, this);\n            }\n        }\n    };\n    EntityStore.prototype.retain = function (rootId) {\n        return this.rootIds[rootId] = (this.rootIds[rootId] || 0) + 1;\n    };\n    EntityStore.prototype.release = function (rootId) {\n        if (this.rootIds[rootId] > 0) {\n            var count = --this.rootIds[rootId];\n            if (!count)\n                delete this.rootIds[rootId];\n            return count;\n        }\n        return 0;\n    };\n    EntityStore.prototype.getRootIdSet = function (ids) {\n        if (ids === void 0) { ids = new Set(); }\n        Object.keys(this.rootIds).forEach(ids.add, ids);\n        if (this instanceof Layer) {\n            this.parent.getRootIdSet(ids);\n        }\n        else {\n            Object.keys(this.policies.rootTypenamesById).forEach(ids.add, ids);\n        }\n        return ids;\n    };\n    EntityStore.prototype.gc = function () {\n        var _this = this;\n        var ids = this.getRootIdSet();\n        var snapshot = this.toObject();\n        ids.forEach(function (id) {\n            if (hasOwn.call(snapshot, id)) {\n                Object.keys(_this.findChildRefIds(id)).forEach(ids.add, ids);\n                delete snapshot[id];\n            }\n        });\n        var idsToRemove = Object.keys(snapshot);\n        if (idsToRemove.length) {\n            var root_1 = this;\n            while (root_1 instanceof Layer)\n                root_1 = root_1.parent;\n            idsToRemove.forEach(function (id) { return root_1.delete(id); });\n        }\n        return idsToRemove;\n    };\n    EntityStore.prototype.findChildRefIds = function (dataId) {\n        if (!hasOwn.call(this.refs, dataId)) {\n            var found_1 = this.refs[dataId] = Object.create(null);\n            var root = this.data[dataId];\n            if (!root)\n                return found_1;\n            var workSet_1 = new Set([root]);\n            workSet_1.forEach(function (obj) {\n                if (isReference(obj)) {\n                    found_1[obj.__ref] = true;\n                }\n                if (isNonNullObject(obj)) {\n                    Object.keys(obj).forEach(function (key) {\n                        var child = obj[key];\n                        if (isNonNullObject(child)) {\n                            workSet_1.add(child);\n                        }\n                    });\n                }\n            });\n        }\n        return this.refs[dataId];\n    };\n    EntityStore.prototype.makeCacheKey = function () {\n        return this.group.keyMaker.lookupArray(arguments);\n    };\n    return EntityStore;\n}());\nexport { EntityStore };\nvar CacheGroup = (function () {\n    function CacheGroup(caching, parent) {\n        if (parent === void 0) { parent = null; }\n        this.caching = caching;\n        this.parent = parent;\n        this.d = null;\n        this.resetCaching();\n    }\n    CacheGroup.prototype.resetCaching = function () {\n        this.d = this.caching ? dep() : null;\n        this.keyMaker = new Trie(canUseWeakMap);\n    };\n    CacheGroup.prototype.depend = function (dataId, storeFieldName) {\n        if (this.d) {\n            this.d(makeDepKey(dataId, storeFieldName));\n            var fieldName = fieldNameFromStoreName(storeFieldName);\n            if (fieldName !== storeFieldName) {\n                this.d(makeDepKey(dataId, fieldName));\n            }\n            if (this.parent) {\n                this.parent.depend(dataId, storeFieldName);\n            }\n        }\n    };\n    CacheGroup.prototype.dirty = function (dataId, storeFieldName) {\n        if (this.d) {\n            this.d.dirty(makeDepKey(dataId, storeFieldName), storeFieldName === \"__exists\" ? \"forget\" : \"setDirty\");\n        }\n    };\n    return CacheGroup;\n}());\nfunction makeDepKey(dataId, storeFieldName) {\n    return storeFieldName + '#' + dataId;\n}\nexport function maybeDependOnExistenceOfEntity(store, entityId) {\n    if (supportsResultCaching(store)) {\n        store.group.depend(entityId, \"__exists\");\n    }\n}\n(function (EntityStore) {\n    var Root = (function (_super) {\n        __extends(Root, _super);\n        function Root(_a) {\n            var policies = _a.policies, _b = _a.resultCaching, resultCaching = _b === void 0 ? true : _b, seed = _a.seed;\n            var _this = _super.call(this, policies, new CacheGroup(resultCaching)) || this;\n            _this.stump = new Stump(_this);\n            _this.storageTrie = new Trie(canUseWeakMap);\n            if (seed)\n                _this.replace(seed);\n            return _this;\n        }\n        Root.prototype.addLayer = function (layerId, replay) {\n            return this.stump.addLayer(layerId, replay);\n        };\n        Root.prototype.removeLayer = function () {\n            return this;\n        };\n        Root.prototype.getStorage = function () {\n            return this.storageTrie.lookupArray(arguments);\n        };\n        return Root;\n    }(EntityStore));\n    EntityStore.Root = Root;\n})(EntityStore || (EntityStore = {}));\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, parent, replay, group) {\n        var _this = _super.call(this, parent.policies, group) || this;\n        _this.id = id;\n        _this.parent = parent;\n        _this.replay = replay;\n        _this.group = group;\n        replay(_this);\n        return _this;\n    }\n    Layer.prototype.addLayer = function (layerId, replay) {\n        return new Layer(layerId, this, replay, this.group);\n    };\n    Layer.prototype.removeLayer = function (layerId) {\n        var _this = this;\n        var parent = this.parent.removeLayer(layerId);\n        if (layerId === this.id) {\n            if (this.group.caching) {\n                Object.keys(this.data).forEach(function (dataId) {\n                    var ownStoreObject = _this.data[dataId];\n                    var parentStoreObject = parent[\"lookup\"](dataId);\n                    if (!parentStoreObject) {\n                        _this.delete(dataId);\n                    }\n                    else if (!ownStoreObject) {\n                        _this.group.dirty(dataId, \"__exists\");\n                        Object.keys(parentStoreObject).forEach(function (storeFieldName) {\n                            _this.group.dirty(dataId, storeFieldName);\n                        });\n                    }\n                    else if (ownStoreObject !== parentStoreObject) {\n                        Object.keys(ownStoreObject).forEach(function (storeFieldName) {\n                            if (!equal(ownStoreObject[storeFieldName], parentStoreObject[storeFieldName])) {\n                                _this.group.dirty(dataId, storeFieldName);\n                            }\n                        });\n                    }\n                });\n            }\n            return parent;\n        }\n        if (parent === this.parent)\n            return this;\n        return parent.addLayer(this.id, this.replay);\n    };\n    Layer.prototype.toObject = function () {\n        return __assign(__assign({}, this.parent.toObject()), this.data);\n    };\n    Layer.prototype.findChildRefIds = function (dataId) {\n        var fromParent = this.parent.findChildRefIds(dataId);\n        return hasOwn.call(this.data, dataId) ? __assign(__assign({}, fromParent), _super.prototype.findChildRefIds.call(this, dataId)) : fromParent;\n    };\n    Layer.prototype.getStorage = function () {\n        var p = this.parent;\n        while (p.parent)\n            p = p.parent;\n        return p.getStorage.apply(p, arguments);\n    };\n    return Layer;\n}(EntityStore));\nvar Stump = (function (_super) {\n    __extends(Stump, _super);\n    function Stump(root) {\n        return _super.call(this, \"EntityStore.Stump\", root, function () { }, new CacheGroup(root.group.caching, root.group)) || this;\n    }\n    Stump.prototype.removeLayer = function () {\n        return this;\n    };\n    Stump.prototype.merge = function () {\n        return this.parent.merge.apply(this.parent, arguments);\n    };\n    return Stump;\n}(Layer));\nfunction storeObjectReconciler(existingObject, incomingObject, property) {\n    var existingValue = existingObject[property];\n    var incomingValue = incomingObject[property];\n    return equal(existingValue, incomingValue) ? existingValue : incomingValue;\n}\nexport function supportsResultCaching(store) {\n    return !!(store instanceof EntityStore && store.group.caching);\n}\n//# sourceMappingURL=entityStore.js.map","import { __assign } from \"tslib\";\nimport { invariant, InvariantError } from \"../../utilities/globals/index.js\";\nimport { Kind, } from 'graphql';\nimport { wrap } from 'optimism';\nimport { isField, resultKeyNameFromField, isReference, makeReference, shouldInclude, addTypenameToDocument, getDefaultValues, getMainDefinition, getQueryDefinition, getFragmentFromSelection, maybeDeepFreeze, mergeDeepArray, DeepMerger, isNonNullObject, canUseWeakMap, compact, } from \"../../utilities/index.js\";\nimport { maybeDependOnExistenceOfEntity, supportsResultCaching } from \"./entityStore.js\";\nimport { isArray, extractFragmentContext, getTypenameFromStoreObject, shouldCanonizeResults } from \"./helpers.js\";\nimport { MissingFieldError } from \"../core/types/common.js\";\nimport { canonicalStringify, ObjectCanon } from \"./object-canon.js\";\n;\nfunction execSelectionSetKeyArgs(options) {\n    return [\n        options.selectionSet,\n        options.objectOrReference,\n        options.context,\n        options.context.canonizeResults,\n    ];\n}\nvar StoreReader = (function () {\n    function StoreReader(config) {\n        var _this = this;\n        this.knownResults = new (canUseWeakMap ? WeakMap : Map)();\n        this.config = compact(config, {\n            addTypename: config.addTypename !== false,\n            canonizeResults: shouldCanonizeResults(config),\n        });\n        this.canon = config.canon || new ObjectCanon;\n        this.executeSelectionSet = wrap(function (options) {\n            var _a;\n            var canonizeResults = options.context.canonizeResults;\n            var peekArgs = execSelectionSetKeyArgs(options);\n            peekArgs[3] = !canonizeResults;\n            var other = (_a = _this.executeSelectionSet).peek.apply(_a, peekArgs);\n            if (other) {\n                if (canonizeResults) {\n                    return __assign(__assign({}, other), { result: _this.canon.admit(other.result) });\n                }\n                return other;\n            }\n            maybeDependOnExistenceOfEntity(options.context.store, options.enclosingRef.__ref);\n            return _this.execSelectionSetImpl(options);\n        }, {\n            max: this.config.resultCacheMaxSize,\n            keyArgs: execSelectionSetKeyArgs,\n            makeCacheKey: function (selectionSet, parent, context, canonizeResults) {\n                if (supportsResultCaching(context.store)) {\n                    return context.store.makeCacheKey(selectionSet, isReference(parent) ? parent.__ref : parent, context.varString, canonizeResults);\n                }\n            }\n        });\n        this.executeSubSelectedArray = wrap(function (options) {\n            maybeDependOnExistenceOfEntity(options.context.store, options.enclosingRef.__ref);\n            return _this.execSubSelectedArrayImpl(options);\n        }, {\n            max: this.config.resultCacheMaxSize,\n            makeCacheKey: function (_a) {\n                var field = _a.field, array = _a.array, context = _a.context;\n                if (supportsResultCaching(context.store)) {\n                    return context.store.makeCacheKey(field, array, context.varString);\n                }\n            }\n        });\n    }\n    StoreReader.prototype.resetCanon = function () {\n        this.canon = new ObjectCanon;\n    };\n    StoreReader.prototype.diffQueryAgainstStore = function (_a) {\n        var store = _a.store, query = _a.query, _b = _a.rootId, rootId = _b === void 0 ? 'ROOT_QUERY' : _b, variables = _a.variables, _c = _a.returnPartialData, returnPartialData = _c === void 0 ? true : _c, _d = _a.canonizeResults, canonizeResults = _d === void 0 ? this.config.canonizeResults : _d;\n        var policies = this.config.cache.policies;\n        variables = __assign(__assign({}, getDefaultValues(getQueryDefinition(query))), variables);\n        var rootRef = makeReference(rootId);\n        var execResult = this.executeSelectionSet({\n            selectionSet: getMainDefinition(query).selectionSet,\n            objectOrReference: rootRef,\n            enclosingRef: rootRef,\n            context: __assign({ store: store, query: query, policies: policies, variables: variables, varString: canonicalStringify(variables), canonizeResults: canonizeResults }, extractFragmentContext(query, this.config.fragments)),\n        });\n        var missing;\n        if (execResult.missing) {\n            missing = [new MissingFieldError(firstMissing(execResult.missing), execResult.missing, query, variables)];\n            if (!returnPartialData) {\n                throw missing[0];\n            }\n        }\n        return {\n            result: execResult.result,\n            complete: !missing,\n            missing: missing,\n        };\n    };\n    StoreReader.prototype.isFresh = function (result, parent, selectionSet, context) {\n        if (supportsResultCaching(context.store) &&\n            this.knownResults.get(result) === selectionSet) {\n            var latest = this.executeSelectionSet.peek(selectionSet, parent, context, this.canon.isKnown(result));\n            if (latest && result === latest.result) {\n                return true;\n            }\n        }\n        return false;\n    };\n    StoreReader.prototype.execSelectionSetImpl = function (_a) {\n        var _this = this;\n        var selectionSet = _a.selectionSet, objectOrReference = _a.objectOrReference, enclosingRef = _a.enclosingRef, context = _a.context;\n        if (isReference(objectOrReference) &&\n            !context.policies.rootTypenamesById[objectOrReference.__ref] &&\n            !context.store.has(objectOrReference.__ref)) {\n            return {\n                result: this.canon.empty,\n                missing: \"Dangling reference to missing \".concat(objectOrReference.__ref, \" object\"),\n            };\n        }\n        var variables = context.variables, policies = context.policies, store = context.store;\n        var typename = store.getFieldValue(objectOrReference, \"__typename\");\n        var objectsToMerge = [];\n        var missing;\n        var missingMerger = new DeepMerger();\n        if (this.config.addTypename &&\n            typeof typename === \"string\" &&\n            !policies.rootIdsByTypename[typename]) {\n            objectsToMerge.push({ __typename: typename });\n        }\n        function handleMissing(result, resultName) {\n            var _a;\n            if (result.missing) {\n                missing = missingMerger.merge(missing, (_a = {}, _a[resultName] = result.missing, _a));\n            }\n            return result.result;\n        }\n        var workSet = new Set(selectionSet.selections);\n        workSet.forEach(function (selection) {\n            var _a, _b;\n            if (!shouldInclude(selection, variables))\n                return;\n            if (isField(selection)) {\n                var fieldValue = policies.readField({\n                    fieldName: selection.name.value,\n                    field: selection,\n                    variables: context.variables,\n                    from: objectOrReference,\n                }, context);\n                var resultName = resultKeyNameFromField(selection);\n                if (fieldValue === void 0) {\n                    if (!addTypenameToDocument.added(selection)) {\n                        missing = missingMerger.merge(missing, (_a = {},\n                            _a[resultName] = \"Can't find field '\".concat(selection.name.value, \"' on \").concat(isReference(objectOrReference)\n                                ? objectOrReference.__ref + \" object\"\n                                : \"object \" + JSON.stringify(objectOrReference, null, 2)),\n                            _a));\n                    }\n                }\n                else if (isArray(fieldValue)) {\n                    fieldValue = handleMissing(_this.executeSubSelectedArray({\n                        field: selection,\n                        array: fieldValue,\n                        enclosingRef: enclosingRef,\n                        context: context,\n                    }), resultName);\n                }\n                else if (!selection.selectionSet) {\n                    if (context.canonizeResults) {\n                        fieldValue = _this.canon.pass(fieldValue);\n                    }\n                }\n                else if (fieldValue != null) {\n                    fieldValue = handleMissing(_this.executeSelectionSet({\n                        selectionSet: selection.selectionSet,\n                        objectOrReference: fieldValue,\n                        enclosingRef: isReference(fieldValue) ? fieldValue : enclosingRef,\n                        context: context,\n                    }), resultName);\n                }\n                if (fieldValue !== void 0) {\n                    objectsToMerge.push((_b = {}, _b[resultName] = fieldValue, _b));\n                }\n            }\n            else {\n                var fragment = getFragmentFromSelection(selection, context.lookupFragment);\n                if (!fragment && selection.kind === Kind.FRAGMENT_SPREAD) {\n                    throw __DEV__ ? new InvariantError(\"No fragment named \".concat(selection.name.value)) : new InvariantError(5);\n                }\n                if (fragment && policies.fragmentMatches(fragment, typename)) {\n                    fragment.selectionSet.selections.forEach(workSet.add, workSet);\n                }\n            }\n        });\n        var result = mergeDeepArray(objectsToMerge);\n        var finalResult = { result: result, missing: missing };\n        var frozen = context.canonizeResults\n            ? this.canon.admit(finalResult)\n            : maybeDeepFreeze(finalResult);\n        if (frozen.result) {\n            this.knownResults.set(frozen.result, selectionSet);\n        }\n        return frozen;\n    };\n    StoreReader.prototype.execSubSelectedArrayImpl = function (_a) {\n        var _this = this;\n        var field = _a.field, array = _a.array, enclosingRef = _a.enclosingRef, context = _a.context;\n        var missing;\n        var missingMerger = new DeepMerger();\n        function handleMissing(childResult, i) {\n            var _a;\n            if (childResult.missing) {\n                missing = missingMerger.merge(missing, (_a = {}, _a[i] = childResult.missing, _a));\n            }\n            return childResult.result;\n        }\n        if (field.selectionSet) {\n            array = array.filter(context.store.canRead);\n        }\n        array = array.map(function (item, i) {\n            if (item === null) {\n                return null;\n            }\n            if (isArray(item)) {\n                return handleMissing(_this.executeSubSelectedArray({\n                    field: field,\n                    array: item,\n                    enclosingRef: enclosingRef,\n                    context: context,\n                }), i);\n            }\n            if (field.selectionSet) {\n                return handleMissing(_this.executeSelectionSet({\n                    selectionSet: field.selectionSet,\n                    objectOrReference: item,\n                    enclosingRef: isReference(item) ? item : enclosingRef,\n                    context: context,\n                }), i);\n            }\n            if (__DEV__) {\n                assertSelectionSetForIdValue(context.store, field, item);\n            }\n            return item;\n        });\n        return {\n            result: context.canonizeResults ? this.canon.admit(array) : array,\n            missing: missing,\n        };\n    };\n    return StoreReader;\n}());\nexport { StoreReader };\nfunction firstMissing(tree) {\n    try {\n        JSON.stringify(tree, function (_, value) {\n            if (typeof value === \"string\")\n                throw value;\n            return value;\n        });\n    }\n    catch (result) {\n        return result;\n    }\n}\nfunction assertSelectionSetForIdValue(store, field, fieldValue) {\n    if (!field.selectionSet) {\n        var workSet_1 = new Set([fieldValue]);\n        workSet_1.forEach(function (value) {\n            if (isNonNullObject(value)) {\n                __DEV__ ? invariant(!isReference(value), \"Missing selection set for object of type \".concat(getTypenameFromStoreObject(store, value), \" returned for query field \").concat(field.name.value)) : invariant(!isReference(value), 6);\n                Object.values(value).forEach(workSet_1.add, workSet_1);\n            }\n        });\n    }\n}\n//# sourceMappingURL=readFromStore.js.map","import { invariant } from \"../../utilities/globals/index.js\";\nimport { argumentsObjectFromField, DeepMerger, isNonEmptyArray, isNonNullObject, } from \"../../utilities/index.js\";\nimport { hasOwn, isArray } from \"./helpers.js\";\nvar specifierInfoCache = Object.create(null);\nfunction lookupSpecifierInfo(spec) {\n    var cacheKey = JSON.stringify(spec);\n    return specifierInfoCache[cacheKey] ||\n        (specifierInfoCache[cacheKey] = Object.create(null));\n}\nexport function keyFieldsFnFromSpecifier(specifier) {\n    var info = lookupSpecifierInfo(specifier);\n    return info.keyFieldsFn || (info.keyFieldsFn = function (object, context) {\n        var extract = function (from, key) { return context.readField(key, from); };\n        var keyObject = context.keyObject = collectSpecifierPaths(specifier, function (schemaKeyPath) {\n            var extracted = extractKeyPath(context.storeObject, schemaKeyPath, extract);\n            if (extracted === void 0 &&\n                object !== context.storeObject &&\n                hasOwn.call(object, schemaKeyPath[0])) {\n                extracted = extractKeyPath(object, schemaKeyPath, extractKey);\n            }\n            __DEV__ ? invariant(extracted !== void 0, \"Missing field '\".concat(schemaKeyPath.join('.'), \"' while extracting keyFields from \").concat(JSON.stringify(object))) : invariant(extracted !== void 0, 2);\n            return extracted;\n        });\n        return \"\".concat(context.typename, \":\").concat(JSON.stringify(keyObject));\n    });\n}\nexport function keyArgsFnFromSpecifier(specifier) {\n    var info = lookupSpecifierInfo(specifier);\n    return info.keyArgsFn || (info.keyArgsFn = function (args, _a) {\n        var field = _a.field, variables = _a.variables, fieldName = _a.fieldName;\n        var collected = collectSpecifierPaths(specifier, function (keyPath) {\n            var firstKey = keyPath[0];\n            var firstChar = firstKey.charAt(0);\n            if (firstChar === \"@\") {\n                if (field && isNonEmptyArray(field.directives)) {\n                    var directiveName_1 = firstKey.slice(1);\n                    var d = field.directives.find(function (d) { return d.name.value === directiveName_1; });\n                    var directiveArgs = d && argumentsObjectFromField(d, variables);\n                    return directiveArgs && extractKeyPath(directiveArgs, keyPath.slice(1));\n                }\n                return;\n            }\n            if (firstChar === \"$\") {\n                var variableName = firstKey.slice(1);\n                if (variables && hasOwn.call(variables, variableName)) {\n                    var varKeyPath = keyPath.slice(0);\n                    varKeyPath[0] = variableName;\n                    return extractKeyPath(variables, varKeyPath);\n                }\n                return;\n            }\n            if (args) {\n                return extractKeyPath(args, keyPath);\n            }\n        });\n        var suffix = JSON.stringify(collected);\n        if (args || suffix !== \"{}\") {\n            fieldName += \":\" + suffix;\n        }\n        return fieldName;\n    });\n}\nexport function collectSpecifierPaths(specifier, extractor) {\n    var merger = new DeepMerger;\n    return getSpecifierPaths(specifier).reduce(function (collected, path) {\n        var _a;\n        var toMerge = extractor(path);\n        if (toMerge !== void 0) {\n            for (var i = path.length - 1; i >= 0; --i) {\n                toMerge = (_a = {}, _a[path[i]] = toMerge, _a);\n            }\n            collected = merger.merge(collected, toMerge);\n        }\n        return collected;\n    }, Object.create(null));\n}\nexport function getSpecifierPaths(spec) {\n    var info = lookupSpecifierInfo(spec);\n    if (!info.paths) {\n        var paths_1 = info.paths = [];\n        var currentPath_1 = [];\n        spec.forEach(function (s, i) {\n            if (isArray(s)) {\n                getSpecifierPaths(s).forEach(function (p) { return paths_1.push(currentPath_1.concat(p)); });\n                currentPath_1.length = 0;\n            }\n            else {\n                currentPath_1.push(s);\n                if (!isArray(spec[i + 1])) {\n                    paths_1.push(currentPath_1.slice(0));\n                    currentPath_1.length = 0;\n                }\n            }\n        });\n    }\n    return info.paths;\n}\nfunction extractKey(object, key) {\n    return object[key];\n}\nexport function extractKeyPath(object, path, extract) {\n    extract = extract || extractKey;\n    return normalize(path.reduce(function reducer(obj, key) {\n        return isArray(obj)\n            ? obj.map(function (child) { return reducer(child, key); })\n            : obj && extract(obj, key);\n    }, object));\n}\nfunction normalize(value) {\n    if (isNonNullObject(value)) {\n        if (isArray(value)) {\n            return value.map(normalize);\n        }\n        return collectSpecifierPaths(Object.keys(value).sort(), function (path) { return extractKeyPath(value, path); });\n    }\n    return value;\n}\n//# sourceMappingURL=key-extractor.js.map","import { __assign, __rest } from \"tslib\";\nimport { invariant, InvariantError } from \"../../utilities/globals/index.js\";\nimport { storeKeyNameFromField, argumentsObjectFromField, isReference, getStoreKeyName, isNonNullObject, stringifyForDisplay, } from \"../../utilities/index.js\";\nimport { hasOwn, fieldNameFromStoreName, storeValueIsStoreObject, selectionSetMatchesResult, TypeOrFieldNameRegExp, defaultDataIdFromObject, isArray, } from \"./helpers.js\";\nimport { cacheSlot } from \"./reactiveVars.js\";\nimport { canonicalStringify } from \"./object-canon.js\";\nimport { keyArgsFnFromSpecifier, keyFieldsFnFromSpecifier } from \"./key-extractor.js\";\ngetStoreKeyName.setStringify(canonicalStringify);\nfunction argsFromFieldSpecifier(spec) {\n    return spec.args !== void 0 ? spec.args :\n        spec.field ? argumentsObjectFromField(spec.field, spec.variables) : null;\n}\nvar nullKeyFieldsFn = function () { return void 0; };\nvar simpleKeyArgsFn = function (_args, context) { return context.fieldName; };\nvar mergeTrueFn = function (existing, incoming, _a) {\n    var mergeObjects = _a.mergeObjects;\n    return mergeObjects(existing, incoming);\n};\nvar mergeFalseFn = function (_, incoming) { return incoming; };\nvar Policies = (function () {\n    function Policies(config) {\n        this.config = config;\n        this.typePolicies = Object.create(null);\n        this.toBeAdded = Object.create(null);\n        this.supertypeMap = new Map();\n        this.fuzzySubtypes = new Map();\n        this.rootIdsByTypename = Object.create(null);\n        this.rootTypenamesById = Object.create(null);\n        this.usingPossibleTypes = false;\n        this.config = __assign({ dataIdFromObject: defaultDataIdFromObject }, config);\n        this.cache = this.config.cache;\n        this.setRootTypename(\"Query\");\n        this.setRootTypename(\"Mutation\");\n        this.setRootTypename(\"Subscription\");\n        if (config.possibleTypes) {\n            this.addPossibleTypes(config.possibleTypes);\n        }\n        if (config.typePolicies) {\n            this.addTypePolicies(config.typePolicies);\n        }\n    }\n    Policies.prototype.identify = function (object, partialContext) {\n        var _a;\n        var policies = this;\n        var typename = partialContext && (partialContext.typename ||\n            ((_a = partialContext.storeObject) === null || _a === void 0 ? void 0 : _a.__typename)) || object.__typename;\n        if (typename === this.rootTypenamesById.ROOT_QUERY) {\n            return [\"ROOT_QUERY\"];\n        }\n        var storeObject = partialContext && partialContext.storeObject || object;\n        var context = __assign(__assign({}, partialContext), { typename: typename, storeObject: storeObject, readField: partialContext && partialContext.readField || function () {\n                var options = normalizeReadFieldOptions(arguments, storeObject);\n                return policies.readField(options, {\n                    store: policies.cache[\"data\"],\n                    variables: options.variables,\n                });\n            } });\n        var id;\n        var policy = typename && this.getTypePolicy(typename);\n        var keyFn = policy && policy.keyFn || this.config.dataIdFromObject;\n        while (keyFn) {\n            var specifierOrId = keyFn(object, context);\n            if (isArray(specifierOrId)) {\n                keyFn = keyFieldsFnFromSpecifier(specifierOrId);\n            }\n            else {\n                id = specifierOrId;\n                break;\n            }\n        }\n        id = id ? String(id) : void 0;\n        return context.keyObject ? [id, context.keyObject] : [id];\n    };\n    Policies.prototype.addTypePolicies = function (typePolicies) {\n        var _this = this;\n        Object.keys(typePolicies).forEach(function (typename) {\n            var _a = typePolicies[typename], queryType = _a.queryType, mutationType = _a.mutationType, subscriptionType = _a.subscriptionType, incoming = __rest(_a, [\"queryType\", \"mutationType\", \"subscriptionType\"]);\n            if (queryType)\n                _this.setRootTypename(\"Query\", typename);\n            if (mutationType)\n                _this.setRootTypename(\"Mutation\", typename);\n            if (subscriptionType)\n                _this.setRootTypename(\"Subscription\", typename);\n            if (hasOwn.call(_this.toBeAdded, typename)) {\n                _this.toBeAdded[typename].push(incoming);\n            }\n            else {\n                _this.toBeAdded[typename] = [incoming];\n            }\n        });\n    };\n    Policies.prototype.updateTypePolicy = function (typename, incoming) {\n        var _this = this;\n        var existing = this.getTypePolicy(typename);\n        var keyFields = incoming.keyFields, fields = incoming.fields;\n        function setMerge(existing, merge) {\n            existing.merge =\n                typeof merge === \"function\" ? merge :\n                    merge === true ? mergeTrueFn :\n                        merge === false ? mergeFalseFn :\n                            existing.merge;\n        }\n        setMerge(existing, incoming.merge);\n        existing.keyFn =\n            keyFields === false ? nullKeyFieldsFn :\n                isArray(keyFields) ? keyFieldsFnFromSpecifier(keyFields) :\n                    typeof keyFields === \"function\" ? keyFields :\n                        existing.keyFn;\n        if (fields) {\n            Object.keys(fields).forEach(function (fieldName) {\n                var existing = _this.getFieldPolicy(typename, fieldName, true);\n                var incoming = fields[fieldName];\n                if (typeof incoming === \"function\") {\n                    existing.read = incoming;\n                }\n                else {\n                    var keyArgs = incoming.keyArgs, read = incoming.read, merge = incoming.merge;\n                    existing.keyFn =\n                        keyArgs === false ? simpleKeyArgsFn :\n                            isArray(keyArgs) ? keyArgsFnFromSpecifier(keyArgs) :\n                                typeof keyArgs === \"function\" ? keyArgs :\n                                    existing.keyFn;\n                    if (typeof read === \"function\") {\n                        existing.read = read;\n                    }\n                    setMerge(existing, merge);\n                }\n                if (existing.read && existing.merge) {\n                    existing.keyFn = existing.keyFn || simpleKeyArgsFn;\n                }\n            });\n        }\n    };\n    Policies.prototype.setRootTypename = function (which, typename) {\n        if (typename === void 0) { typename = which; }\n        var rootId = \"ROOT_\" + which.toUpperCase();\n        var old = this.rootTypenamesById[rootId];\n        if (typename !== old) {\n            __DEV__ ? invariant(!old || old === which, \"Cannot change root \".concat(which, \" __typename more than once\")) : invariant(!old || old === which, 3);\n            if (old)\n                delete this.rootIdsByTypename[old];\n            this.rootIdsByTypename[typename] = rootId;\n            this.rootTypenamesById[rootId] = typename;\n        }\n    };\n    Policies.prototype.addPossibleTypes = function (possibleTypes) {\n        var _this = this;\n        this.usingPossibleTypes = true;\n        Object.keys(possibleTypes).forEach(function (supertype) {\n            _this.getSupertypeSet(supertype, true);\n            possibleTypes[supertype].forEach(function (subtype) {\n                _this.getSupertypeSet(subtype, true).add(supertype);\n                var match = subtype.match(TypeOrFieldNameRegExp);\n                if (!match || match[0] !== subtype) {\n                    _this.fuzzySubtypes.set(subtype, new RegExp(subtype));\n                }\n            });\n        });\n    };\n    Policies.prototype.getTypePolicy = function (typename) {\n        var _this = this;\n        if (!hasOwn.call(this.typePolicies, typename)) {\n            var policy_1 = this.typePolicies[typename] = Object.create(null);\n            policy_1.fields = Object.create(null);\n            var supertypes = this.supertypeMap.get(typename);\n            if (supertypes && supertypes.size) {\n                supertypes.forEach(function (supertype) {\n                    var _a = _this.getTypePolicy(supertype), fields = _a.fields, rest = __rest(_a, [\"fields\"]);\n                    Object.assign(policy_1, rest);\n                    Object.assign(policy_1.fields, fields);\n                });\n            }\n        }\n        var inbox = this.toBeAdded[typename];\n        if (inbox && inbox.length) {\n            inbox.splice(0).forEach(function (policy) {\n                _this.updateTypePolicy(typename, policy);\n            });\n        }\n        return this.typePolicies[typename];\n    };\n    Policies.prototype.getFieldPolicy = function (typename, fieldName, createIfMissing) {\n        if (typename) {\n            var fieldPolicies = this.getTypePolicy(typename).fields;\n            return fieldPolicies[fieldName] || (createIfMissing && (fieldPolicies[fieldName] = Object.create(null)));\n        }\n    };\n    Policies.prototype.getSupertypeSet = function (subtype, createIfMissing) {\n        var supertypeSet = this.supertypeMap.get(subtype);\n        if (!supertypeSet && createIfMissing) {\n            this.supertypeMap.set(subtype, supertypeSet = new Set());\n        }\n        return supertypeSet;\n    };\n    Policies.prototype.fragmentMatches = function (fragment, typename, result, variables) {\n        var _this = this;\n        if (!fragment.typeCondition)\n            return true;\n        if (!typename)\n            return false;\n        var supertype = fragment.typeCondition.name.value;\n        if (typename === supertype)\n            return true;\n        if (this.usingPossibleTypes &&\n            this.supertypeMap.has(supertype)) {\n            var typenameSupertypeSet = this.getSupertypeSet(typename, true);\n            var workQueue_1 = [typenameSupertypeSet];\n            var maybeEnqueue_1 = function (subtype) {\n                var supertypeSet = _this.getSupertypeSet(subtype, false);\n                if (supertypeSet &&\n                    supertypeSet.size &&\n                    workQueue_1.indexOf(supertypeSet) < 0) {\n                    workQueue_1.push(supertypeSet);\n                }\n            };\n            var needToCheckFuzzySubtypes = !!(result && this.fuzzySubtypes.size);\n            var checkingFuzzySubtypes = false;\n            for (var i = 0; i < workQueue_1.length; ++i) {\n                var supertypeSet = workQueue_1[i];\n                if (supertypeSet.has(supertype)) {\n                    if (!typenameSupertypeSet.has(supertype)) {\n                        if (checkingFuzzySubtypes) {\n                            __DEV__ && invariant.warn(\"Inferring subtype \".concat(typename, \" of supertype \").concat(supertype));\n                        }\n                        typenameSupertypeSet.add(supertype);\n                    }\n                    return true;\n                }\n                supertypeSet.forEach(maybeEnqueue_1);\n                if (needToCheckFuzzySubtypes &&\n                    i === workQueue_1.length - 1 &&\n                    selectionSetMatchesResult(fragment.selectionSet, result, variables)) {\n                    needToCheckFuzzySubtypes = false;\n                    checkingFuzzySubtypes = true;\n                    this.fuzzySubtypes.forEach(function (regExp, fuzzyString) {\n                        var match = typename.match(regExp);\n                        if (match && match[0] === typename) {\n                            maybeEnqueue_1(fuzzyString);\n                        }\n                    });\n                }\n            }\n        }\n        return false;\n    };\n    Policies.prototype.hasKeyArgs = function (typename, fieldName) {\n        var policy = this.getFieldPolicy(typename, fieldName, false);\n        return !!(policy && policy.keyFn);\n    };\n    Policies.prototype.getStoreFieldName = function (fieldSpec) {\n        var typename = fieldSpec.typename, fieldName = fieldSpec.fieldName;\n        var policy = this.getFieldPolicy(typename, fieldName, false);\n        var storeFieldName;\n        var keyFn = policy && policy.keyFn;\n        if (keyFn && typename) {\n            var context = {\n                typename: typename,\n                fieldName: fieldName,\n                field: fieldSpec.field || null,\n                variables: fieldSpec.variables,\n            };\n            var args = argsFromFieldSpecifier(fieldSpec);\n            while (keyFn) {\n                var specifierOrString = keyFn(args, context);\n                if (isArray(specifierOrString)) {\n                    keyFn = keyArgsFnFromSpecifier(specifierOrString);\n                }\n                else {\n                    storeFieldName = specifierOrString || fieldName;\n                    break;\n                }\n            }\n        }\n        if (storeFieldName === void 0) {\n            storeFieldName = fieldSpec.field\n                ? storeKeyNameFromField(fieldSpec.field, fieldSpec.variables)\n                : getStoreKeyName(fieldName, argsFromFieldSpecifier(fieldSpec));\n        }\n        if (storeFieldName === false) {\n            return fieldName;\n        }\n        return fieldName === fieldNameFromStoreName(storeFieldName)\n            ? storeFieldName\n            : fieldName + \":\" + storeFieldName;\n    };\n    Policies.prototype.readField = function (options, context) {\n        var objectOrReference = options.from;\n        if (!objectOrReference)\n            return;\n        var nameOrField = options.field || options.fieldName;\n        if (!nameOrField)\n            return;\n        if (options.typename === void 0) {\n            var typename = context.store.getFieldValue(objectOrReference, \"__typename\");\n            if (typename)\n                options.typename = typename;\n        }\n        var storeFieldName = this.getStoreFieldName(options);\n        var fieldName = fieldNameFromStoreName(storeFieldName);\n        var existing = context.store.getFieldValue(objectOrReference, storeFieldName);\n        var policy = this.getFieldPolicy(options.typename, fieldName, false);\n        var read = policy && policy.read;\n        if (read) {\n            var readOptions = makeFieldFunctionOptions(this, objectOrReference, options, context, context.store.getStorage(isReference(objectOrReference)\n                ? objectOrReference.__ref\n                : objectOrReference, storeFieldName));\n            return cacheSlot.withValue(this.cache, read, [existing, readOptions]);\n        }\n        return existing;\n    };\n    Policies.prototype.getReadFunction = function (typename, fieldName) {\n        var policy = this.getFieldPolicy(typename, fieldName, false);\n        return policy && policy.read;\n    };\n    Policies.prototype.getMergeFunction = function (parentTypename, fieldName, childTypename) {\n        var policy = this.getFieldPolicy(parentTypename, fieldName, false);\n        var merge = policy && policy.merge;\n        if (!merge && childTypename) {\n            policy = this.getTypePolicy(childTypename);\n            merge = policy && policy.merge;\n        }\n        return merge;\n    };\n    Policies.prototype.runMergeFunction = function (existing, incoming, _a, context, storage) {\n        var field = _a.field, typename = _a.typename, merge = _a.merge;\n        if (merge === mergeTrueFn) {\n            return makeMergeObjectsFunction(context.store)(existing, incoming);\n        }\n        if (merge === mergeFalseFn) {\n            return incoming;\n        }\n        if (context.overwrite) {\n            existing = void 0;\n        }\n        return merge(existing, incoming, makeFieldFunctionOptions(this, void 0, { typename: typename, fieldName: field.name.value, field: field, variables: context.variables }, context, storage || Object.create(null)));\n    };\n    return Policies;\n}());\nexport { Policies };\nfunction makeFieldFunctionOptions(policies, objectOrReference, fieldSpec, context, storage) {\n    var storeFieldName = policies.getStoreFieldName(fieldSpec);\n    var fieldName = fieldNameFromStoreName(storeFieldName);\n    var variables = fieldSpec.variables || context.variables;\n    var _a = context.store, toReference = _a.toReference, canRead = _a.canRead;\n    return {\n        args: argsFromFieldSpecifier(fieldSpec),\n        field: fieldSpec.field || null,\n        fieldName: fieldName,\n        storeFieldName: storeFieldName,\n        variables: variables,\n        isReference: isReference,\n        toReference: toReference,\n        storage: storage,\n        cache: policies.cache,\n        canRead: canRead,\n        readField: function () {\n            return policies.readField(normalizeReadFieldOptions(arguments, objectOrReference, variables), context);\n        },\n        mergeObjects: makeMergeObjectsFunction(context.store),\n    };\n}\nexport function normalizeReadFieldOptions(readFieldArgs, objectOrReference, variables) {\n    var fieldNameOrOptions = readFieldArgs[0], from = readFieldArgs[1], argc = readFieldArgs.length;\n    var options;\n    if (typeof fieldNameOrOptions === \"string\") {\n        options = {\n            fieldName: fieldNameOrOptions,\n            from: argc > 1 ? from : objectOrReference,\n        };\n    }\n    else {\n        options = __assign({}, fieldNameOrOptions);\n        if (!hasOwn.call(options, \"from\")) {\n            options.from = objectOrReference;\n        }\n    }\n    if (__DEV__ && options.from === void 0) {\n        __DEV__ && invariant.warn(\"Undefined 'from' passed to readField with arguments \".concat(stringifyForDisplay(Array.from(readFieldArgs))));\n    }\n    if (void 0 === options.variables) {\n        options.variables = variables;\n    }\n    return options;\n}\nfunction makeMergeObjectsFunction(store) {\n    return function mergeObjects(existing, incoming) {\n        if (isArray(existing) || isArray(incoming)) {\n            throw __DEV__ ? new InvariantError(\"Cannot automatically merge arrays\") : new InvariantError(4);\n        }\n        if (isNonNullObject(existing) &&\n            isNonNullObject(incoming)) {\n            var eType = store.getFieldValue(existing, \"__typename\");\n            var iType = store.getFieldValue(incoming, \"__typename\");\n            var typesDiffer = eType && iType && eType !== iType;\n            if (typesDiffer) {\n                return incoming;\n            }\n            if (isReference(existing) &&\n                storeValueIsStoreObject(incoming)) {\n                store.merge(existing.__ref, incoming);\n                return existing;\n            }\n            if (storeValueIsStoreObject(existing) &&\n                isReference(incoming)) {\n                store.merge(existing, incoming.__ref);\n                return incoming;\n            }\n            if (storeValueIsStoreObject(existing) &&\n                storeValueIsStoreObject(incoming)) {\n                return __assign(__assign({}, existing), incoming);\n            }\n        }\n        return incoming;\n    };\n}\n//# sourceMappingURL=policies.js.map","import { __assign } from \"tslib\";\nimport { invariant, InvariantError } from \"../../utilities/globals/index.js\";\nimport { equal } from '@wry/equality';\nimport { Trie } from '@wry/trie';\nimport { Kind, } from 'graphql';\nimport { getFragmentFromSelection, getDefaultValues, getOperationDefinition, getTypenameFromResult, makeReference, isField, resultKeyNameFromField, isReference, shouldInclude, cloneDeep, addTypenameToDocument, isNonEmptyArray, argumentsObjectFromField, } from \"../../utilities/index.js\";\nimport { isArray, makeProcessedFieldsMerger, fieldNameFromStoreName, storeValueIsStoreObject, extractFragmentContext } from \"./helpers.js\";\nimport { canonicalStringify } from \"./object-canon.js\";\nimport { normalizeReadFieldOptions } from \"./policies.js\";\n;\nfunction getContextFlavor(context, clientOnly, deferred) {\n    var key = \"\".concat(clientOnly).concat(deferred);\n    var flavored = context.flavors.get(key);\n    if (!flavored) {\n        context.flavors.set(key, flavored = (context.clientOnly === clientOnly &&\n            context.deferred === deferred) ? context : __assign(__assign({}, context), { clientOnly: clientOnly, deferred: deferred }));\n    }\n    return flavored;\n}\nvar StoreWriter = (function () {\n    function StoreWriter(cache, reader, fragments) {\n        this.cache = cache;\n        this.reader = reader;\n        this.fragments = fragments;\n    }\n    StoreWriter.prototype.writeToStore = function (store, _a) {\n        var _this = this;\n        var query = _a.query, result = _a.result, dataId = _a.dataId, variables = _a.variables, overwrite = _a.overwrite;\n        var operationDefinition = getOperationDefinition(query);\n        var merger = makeProcessedFieldsMerger();\n        variables = __assign(__assign({}, getDefaultValues(operationDefinition)), variables);\n        var context = __assign(__assign({ store: store, written: Object.create(null), merge: function (existing, incoming) {\n                return merger.merge(existing, incoming);\n            }, variables: variables, varString: canonicalStringify(variables) }, extractFragmentContext(query, this.fragments)), { overwrite: !!overwrite, incomingById: new Map, clientOnly: false, deferred: false, flavors: new Map });\n        var ref = this.processSelectionSet({\n            result: result || Object.create(null),\n            dataId: dataId,\n            selectionSet: operationDefinition.selectionSet,\n            mergeTree: { map: new Map },\n            context: context,\n        });\n        if (!isReference(ref)) {\n            throw __DEV__ ? new InvariantError(\"Could not identify object \".concat(JSON.stringify(result))) : new InvariantError(7);\n        }\n        context.incomingById.forEach(function (_a, dataId) {\n            var storeObject = _a.storeObject, mergeTree = _a.mergeTree, fieldNodeSet = _a.fieldNodeSet;\n            var entityRef = makeReference(dataId);\n            if (mergeTree && mergeTree.map.size) {\n                var applied = _this.applyMerges(mergeTree, entityRef, storeObject, context);\n                if (isReference(applied)) {\n                    return;\n                }\n                storeObject = applied;\n            }\n            if (__DEV__ && !context.overwrite) {\n                var fieldsWithSelectionSets_1 = Object.create(null);\n                fieldNodeSet.forEach(function (field) {\n                    if (field.selectionSet) {\n                        fieldsWithSelectionSets_1[field.name.value] = true;\n                    }\n                });\n                var hasSelectionSet_1 = function (storeFieldName) {\n                    return fieldsWithSelectionSets_1[fieldNameFromStoreName(storeFieldName)] === true;\n                };\n                var hasMergeFunction_1 = function (storeFieldName) {\n                    var childTree = mergeTree && mergeTree.map.get(storeFieldName);\n                    return Boolean(childTree && childTree.info && childTree.info.merge);\n                };\n                Object.keys(storeObject).forEach(function (storeFieldName) {\n                    if (hasSelectionSet_1(storeFieldName) &&\n                        !hasMergeFunction_1(storeFieldName)) {\n                        warnAboutDataLoss(entityRef, storeObject, storeFieldName, context.store);\n                    }\n                });\n            }\n            store.merge(dataId, storeObject);\n        });\n        store.retain(ref.__ref);\n        return ref;\n    };\n    StoreWriter.prototype.processSelectionSet = function (_a) {\n        var _this = this;\n        var dataId = _a.dataId, result = _a.result, selectionSet = _a.selectionSet, context = _a.context, mergeTree = _a.mergeTree;\n        var policies = this.cache.policies;\n        var incoming = Object.create(null);\n        var typename = (dataId && policies.rootTypenamesById[dataId]) ||\n            getTypenameFromResult(result, selectionSet, context.fragmentMap) ||\n            (dataId && context.store.get(dataId, \"__typename\"));\n        if (\"string\" === typeof typename) {\n            incoming.__typename = typename;\n        }\n        var readField = function () {\n            var options = normalizeReadFieldOptions(arguments, incoming, context.variables);\n            if (isReference(options.from)) {\n                var info = context.incomingById.get(options.from.__ref);\n                if (info) {\n                    var result_1 = policies.readField(__assign(__assign({}, options), { from: info.storeObject }), context);\n                    if (result_1 !== void 0) {\n                        return result_1;\n                    }\n                }\n            }\n            return policies.readField(options, context);\n        };\n        var fieldNodeSet = new Set();\n        this.flattenFields(selectionSet, result, context, typename).forEach(function (context, field) {\n            var _a;\n            var resultFieldKey = resultKeyNameFromField(field);\n            var value = result[resultFieldKey];\n            fieldNodeSet.add(field);\n            if (value !== void 0) {\n                var storeFieldName = policies.getStoreFieldName({\n                    typename: typename,\n                    fieldName: field.name.value,\n                    field: field,\n                    variables: context.variables,\n                });\n                var childTree = getChildMergeTree(mergeTree, storeFieldName);\n                var incomingValue = _this.processFieldValue(value, field, field.selectionSet\n                    ? getContextFlavor(context, false, false)\n                    : context, childTree);\n                var childTypename = void 0;\n                if (field.selectionSet &&\n                    (isReference(incomingValue) ||\n                        storeValueIsStoreObject(incomingValue))) {\n                    childTypename = readField(\"__typename\", incomingValue);\n                }\n                var merge = policies.getMergeFunction(typename, field.name.value, childTypename);\n                if (merge) {\n                    childTree.info = {\n                        field: field,\n                        typename: typename,\n                        merge: merge,\n                    };\n                }\n                else {\n                    maybeRecycleChildMergeTree(mergeTree, storeFieldName);\n                }\n                incoming = context.merge(incoming, (_a = {},\n                    _a[storeFieldName] = incomingValue,\n                    _a));\n            }\n            else if (__DEV__ &&\n                !context.clientOnly &&\n                !context.deferred &&\n                !addTypenameToDocument.added(field) &&\n                !policies.getReadFunction(typename, field.name.value)) {\n                __DEV__ && invariant.error(\"Missing field '\".concat(resultKeyNameFromField(field), \"' while writing result \").concat(JSON.stringify(result, null, 2)).substring(0, 1000));\n            }\n        });\n        try {\n            var _b = policies.identify(result, {\n                typename: typename,\n                selectionSet: selectionSet,\n                fragmentMap: context.fragmentMap,\n                storeObject: incoming,\n                readField: readField,\n            }), id = _b[0], keyObject = _b[1];\n            dataId = dataId || id;\n            if (keyObject) {\n                incoming = context.merge(incoming, keyObject);\n            }\n        }\n        catch (e) {\n            if (!dataId)\n                throw e;\n        }\n        if (\"string\" === typeof dataId) {\n            var dataRef = makeReference(dataId);\n            var sets = context.written[dataId] || (context.written[dataId] = []);\n            if (sets.indexOf(selectionSet) >= 0)\n                return dataRef;\n            sets.push(selectionSet);\n            if (this.reader && this.reader.isFresh(result, dataRef, selectionSet, context)) {\n                return dataRef;\n            }\n            var previous_1 = context.incomingById.get(dataId);\n            if (previous_1) {\n                previous_1.storeObject = context.merge(previous_1.storeObject, incoming);\n                previous_1.mergeTree = mergeMergeTrees(previous_1.mergeTree, mergeTree);\n                fieldNodeSet.forEach(function (field) { return previous_1.fieldNodeSet.add(field); });\n            }\n            else {\n                context.incomingById.set(dataId, {\n                    storeObject: incoming,\n                    mergeTree: mergeTreeIsEmpty(mergeTree) ? void 0 : mergeTree,\n                    fieldNodeSet: fieldNodeSet,\n                });\n            }\n            return dataRef;\n        }\n        return incoming;\n    };\n    StoreWriter.prototype.processFieldValue = function (value, field, context, mergeTree) {\n        var _this = this;\n        if (!field.selectionSet || value === null) {\n            return __DEV__ ? cloneDeep(value) : value;\n        }\n        if (isArray(value)) {\n            return value.map(function (item, i) {\n                var value = _this.processFieldValue(item, field, context, getChildMergeTree(mergeTree, i));\n                maybeRecycleChildMergeTree(mergeTree, i);\n                return value;\n            });\n        }\n        return this.processSelectionSet({\n            result: value,\n            selectionSet: field.selectionSet,\n            context: context,\n            mergeTree: mergeTree,\n        });\n    };\n    StoreWriter.prototype.flattenFields = function (selectionSet, result, context, typename) {\n        if (typename === void 0) { typename = getTypenameFromResult(result, selectionSet, context.fragmentMap); }\n        var fieldMap = new Map();\n        var policies = this.cache.policies;\n        var limitingTrie = new Trie(false);\n        (function flatten(selectionSet, inheritedContext) {\n            var visitedNode = limitingTrie.lookup(selectionSet, inheritedContext.clientOnly, inheritedContext.deferred);\n            if (visitedNode.visited)\n                return;\n            visitedNode.visited = true;\n            selectionSet.selections.forEach(function (selection) {\n                if (!shouldInclude(selection, context.variables))\n                    return;\n                var clientOnly = inheritedContext.clientOnly, deferred = inheritedContext.deferred;\n                if (!(clientOnly && deferred) &&\n                    isNonEmptyArray(selection.directives)) {\n                    selection.directives.forEach(function (dir) {\n                        var name = dir.name.value;\n                        if (name === \"client\")\n                            clientOnly = true;\n                        if (name === \"defer\") {\n                            var args = argumentsObjectFromField(dir, context.variables);\n                            if (!args || args.if !== false) {\n                                deferred = true;\n                            }\n                        }\n                    });\n                }\n                if (isField(selection)) {\n                    var existing = fieldMap.get(selection);\n                    if (existing) {\n                        clientOnly = clientOnly && existing.clientOnly;\n                        deferred = deferred && existing.deferred;\n                    }\n                    fieldMap.set(selection, getContextFlavor(context, clientOnly, deferred));\n                }\n                else {\n                    var fragment = getFragmentFromSelection(selection, context.lookupFragment);\n                    if (!fragment && selection.kind === Kind.FRAGMENT_SPREAD) {\n                        throw __DEV__ ? new InvariantError(\"No fragment named \".concat(selection.name.value)) : new InvariantError(8);\n                    }\n                    if (fragment &&\n                        policies.fragmentMatches(fragment, typename, result, context.variables)) {\n                        flatten(fragment.selectionSet, getContextFlavor(context, clientOnly, deferred));\n                    }\n                }\n            });\n        })(selectionSet, context);\n        return fieldMap;\n    };\n    StoreWriter.prototype.applyMerges = function (mergeTree, existing, incoming, context, getStorageArgs) {\n        var _a;\n        var _this = this;\n        if (mergeTree.map.size && !isReference(incoming)) {\n            var e_1 = (!isArray(incoming) &&\n                (isReference(existing) || storeValueIsStoreObject(existing))) ? existing : void 0;\n            var i_1 = incoming;\n            if (e_1 && !getStorageArgs) {\n                getStorageArgs = [isReference(e_1) ? e_1.__ref : e_1];\n            }\n            var changedFields_1;\n            var getValue_1 = function (from, name) {\n                return isArray(from)\n                    ? (typeof name === \"number\" ? from[name] : void 0)\n                    : context.store.getFieldValue(from, String(name));\n            };\n            mergeTree.map.forEach(function (childTree, storeFieldName) {\n                var eVal = getValue_1(e_1, storeFieldName);\n                var iVal = getValue_1(i_1, storeFieldName);\n                if (void 0 === iVal)\n                    return;\n                if (getStorageArgs) {\n                    getStorageArgs.push(storeFieldName);\n                }\n                var aVal = _this.applyMerges(childTree, eVal, iVal, context, getStorageArgs);\n                if (aVal !== iVal) {\n                    changedFields_1 = changedFields_1 || new Map;\n                    changedFields_1.set(storeFieldName, aVal);\n                }\n                if (getStorageArgs) {\n                    invariant(getStorageArgs.pop() === storeFieldName);\n                }\n            });\n            if (changedFields_1) {\n                incoming = (isArray(i_1) ? i_1.slice(0) : __assign({}, i_1));\n                changedFields_1.forEach(function (value, name) {\n                    incoming[name] = value;\n                });\n            }\n        }\n        if (mergeTree.info) {\n            return this.cache.policies.runMergeFunction(existing, incoming, mergeTree.info, context, getStorageArgs && (_a = context.store).getStorage.apply(_a, getStorageArgs));\n        }\n        return incoming;\n    };\n    return StoreWriter;\n}());\nexport { StoreWriter };\nvar emptyMergeTreePool = [];\nfunction getChildMergeTree(_a, name) {\n    var map = _a.map;\n    if (!map.has(name)) {\n        map.set(name, emptyMergeTreePool.pop() || { map: new Map });\n    }\n    return map.get(name);\n}\nfunction mergeMergeTrees(left, right) {\n    if (left === right || !right || mergeTreeIsEmpty(right))\n        return left;\n    if (!left || mergeTreeIsEmpty(left))\n        return right;\n    var info = left.info && right.info ? __assign(__assign({}, left.info), right.info) : left.info || right.info;\n    var needToMergeMaps = left.map.size && right.map.size;\n    var map = needToMergeMaps ? new Map :\n        left.map.size ? left.map : right.map;\n    var merged = { info: info, map: map };\n    if (needToMergeMaps) {\n        var remainingRightKeys_1 = new Set(right.map.keys());\n        left.map.forEach(function (leftTree, key) {\n            merged.map.set(key, mergeMergeTrees(leftTree, right.map.get(key)));\n            remainingRightKeys_1.delete(key);\n        });\n        remainingRightKeys_1.forEach(function (key) {\n            merged.map.set(key, mergeMergeTrees(right.map.get(key), left.map.get(key)));\n        });\n    }\n    return merged;\n}\nfunction mergeTreeIsEmpty(tree) {\n    return !tree || !(tree.info || tree.map.size);\n}\nfunction maybeRecycleChildMergeTree(_a, name) {\n    var map = _a.map;\n    var childTree = map.get(name);\n    if (childTree && mergeTreeIsEmpty(childTree)) {\n        emptyMergeTreePool.push(childTree);\n        map.delete(name);\n    }\n}\nvar warnings = new Set();\nfunction warnAboutDataLoss(existingRef, incomingObj, storeFieldName, store) {\n    var getChild = function (objOrRef) {\n        var child = store.getFieldValue(objOrRef, storeFieldName);\n        return typeof child === \"object\" && child;\n    };\n    var existing = getChild(existingRef);\n    if (!existing)\n        return;\n    var incoming = getChild(incomingObj);\n    if (!incoming)\n        return;\n    if (isReference(existing))\n        return;\n    if (equal(existing, incoming))\n        return;\n    if (Object.keys(existing).every(function (key) { return store.getFieldValue(incoming, key) !== void 0; })) {\n        return;\n    }\n    var parentType = store.getFieldValue(existingRef, \"__typename\") ||\n        store.getFieldValue(incomingObj, \"__typename\");\n    var fieldName = fieldNameFromStoreName(storeFieldName);\n    var typeDotName = \"\".concat(parentType, \".\").concat(fieldName);\n    if (warnings.has(typeDotName))\n        return;\n    warnings.add(typeDotName);\n    var childTypenames = [];\n    if (!isArray(existing) &&\n        !isArray(incoming)) {\n        [existing, incoming].forEach(function (child) {\n            var typename = store.getFieldValue(child, \"__typename\");\n            if (typeof typename === \"string\" &&\n                !childTypenames.includes(typename)) {\n                childTypenames.push(typename);\n            }\n        });\n    }\n    __DEV__ && invariant.warn(\"Cache data may be lost when replacing the \".concat(fieldName, \" field of a \").concat(parentType, \" object.\\n\\nTo address this problem (which is not a bug in Apollo Client), \").concat(childTypenames.length\n        ? \"either ensure all objects of type \" +\n            childTypenames.join(\" and \") + \" have an ID or a custom merge function, or \"\n        : \"\", \"define a custom merge function for the \").concat(typeDotName, \" field, so InMemoryCache can safely merge these objects:\\n\\n  existing: \").concat(JSON.stringify(existing).slice(0, 1000), \"\\n  incoming: \").concat(JSON.stringify(incoming).slice(0, 1000), \"\\n\\nFor more information about these options, please refer to the documentation:\\n\\n  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers\\n  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects\\n\"));\n}\n//# sourceMappingURL=writeToStore.js.map","import { __assign, __extends } from \"tslib\";\nimport { invariant } from \"../../utilities/globals/index.js\";\nimport \"./fixPolyfills.js\";\nimport { wrap } from 'optimism';\nimport { equal } from '@wry/equality';\nimport { ApolloCache } from \"../core/cache.js\";\nimport { MissingFieldError } from \"../core/types/common.js\";\nimport { addTypenameToDocument, isReference, } from \"../../utilities/index.js\";\nimport { StoreReader } from \"./readFromStore.js\";\nimport { StoreWriter } from \"./writeToStore.js\";\nimport { EntityStore, supportsResultCaching } from \"./entityStore.js\";\nimport { makeVar, forgetCache, recallCache } from \"./reactiveVars.js\";\nimport { Policies } from \"./policies.js\";\nimport { hasOwn, normalizeConfig, shouldCanonizeResults } from \"./helpers.js\";\nimport { canonicalStringify } from \"./object-canon.js\";\nvar InMemoryCache = (function (_super) {\n    __extends(InMemoryCache, _super);\n    function InMemoryCache(config) {\n        if (config === void 0) { config = {}; }\n        var _this = _super.call(this) || this;\n        _this.watches = new Set();\n        _this.typenameDocumentCache = new Map();\n        _this.makeVar = makeVar;\n        _this.txCount = 0;\n        _this.config = normalizeConfig(config);\n        _this.addTypename = !!_this.config.addTypename;\n        _this.policies = new Policies({\n            cache: _this,\n            dataIdFromObject: _this.config.dataIdFromObject,\n            possibleTypes: _this.config.possibleTypes,\n            typePolicies: _this.config.typePolicies,\n        });\n        _this.init();\n        return _this;\n    }\n    InMemoryCache.prototype.init = function () {\n        var rootStore = this.data = new EntityStore.Root({\n            policies: this.policies,\n            resultCaching: this.config.resultCaching,\n        });\n        this.optimisticData = rootStore.stump;\n        this.resetResultCache();\n    };\n    InMemoryCache.prototype.resetResultCache = function (resetResultIdentities) {\n        var _this = this;\n        var previousReader = this.storeReader;\n        var fragments = this.config.fragments;\n        this.storeWriter = new StoreWriter(this, this.storeReader = new StoreReader({\n            cache: this,\n            addTypename: this.addTypename,\n            resultCacheMaxSize: this.config.resultCacheMaxSize,\n            canonizeResults: shouldCanonizeResults(this.config),\n            canon: resetResultIdentities\n                ? void 0\n                : previousReader && previousReader.canon,\n            fragments: fragments,\n        }), fragments);\n        this.maybeBroadcastWatch = wrap(function (c, options) {\n            return _this.broadcastWatch(c, options);\n        }, {\n            max: this.config.resultCacheMaxSize,\n            makeCacheKey: function (c) {\n                var store = c.optimistic ? _this.optimisticData : _this.data;\n                if (supportsResultCaching(store)) {\n                    var optimistic = c.optimistic, id = c.id, variables = c.variables;\n                    return store.makeCacheKey(c.query, c.callback, canonicalStringify({ optimistic: optimistic, id: id, variables: variables }));\n                }\n            }\n        });\n        new Set([\n            this.data.group,\n            this.optimisticData.group,\n        ]).forEach(function (group) { return group.resetCaching(); });\n    };\n    InMemoryCache.prototype.restore = function (data) {\n        this.init();\n        if (data)\n            this.data.replace(data);\n        return this;\n    };\n    InMemoryCache.prototype.extract = function (optimistic) {\n        if (optimistic === void 0) { optimistic = false; }\n        return (optimistic ? this.optimisticData : this.data).extract();\n    };\n    InMemoryCache.prototype.read = function (options) {\n        var _a = options.returnPartialData, returnPartialData = _a === void 0 ? false : _a;\n        try {\n            return this.storeReader.diffQueryAgainstStore(__assign(__assign({}, options), { store: options.optimistic ? this.optimisticData : this.data, config: this.config, returnPartialData: returnPartialData })).result || null;\n        }\n        catch (e) {\n            if (e instanceof MissingFieldError) {\n                return null;\n            }\n            throw e;\n        }\n    };\n    InMemoryCache.prototype.write = function (options) {\n        try {\n            ++this.txCount;\n            return this.storeWriter.writeToStore(this.data, options);\n        }\n        finally {\n            if (!--this.txCount && options.broadcast !== false) {\n                this.broadcastWatches();\n            }\n        }\n    };\n    InMemoryCache.prototype.modify = function (options) {\n        if (hasOwn.call(options, \"id\") && !options.id) {\n            return false;\n        }\n        var store = options.optimistic\n            ? this.optimisticData\n            : this.data;\n        try {\n            ++this.txCount;\n            return store.modify(options.id || \"ROOT_QUERY\", options.fields);\n        }\n        finally {\n            if (!--this.txCount && options.broadcast !== false) {\n                this.broadcastWatches();\n            }\n        }\n    };\n    InMemoryCache.prototype.diff = function (options) {\n        return this.storeReader.diffQueryAgainstStore(__assign(__assign({}, options), { store: options.optimistic ? this.optimisticData : this.data, rootId: options.id || \"ROOT_QUERY\", config: this.config }));\n    };\n    InMemoryCache.prototype.watch = function (watch) {\n        var _this = this;\n        if (!this.watches.size) {\n            recallCache(this);\n        }\n        this.watches.add(watch);\n        if (watch.immediate) {\n            this.maybeBroadcastWatch(watch);\n        }\n        return function () {\n            if (_this.watches.delete(watch) && !_this.watches.size) {\n                forgetCache(_this);\n            }\n            _this.maybeBroadcastWatch.forget(watch);\n        };\n    };\n    InMemoryCache.prototype.gc = function (options) {\n        canonicalStringify.reset();\n        var ids = this.optimisticData.gc();\n        if (options && !this.txCount) {\n            if (options.resetResultCache) {\n                this.resetResultCache(options.resetResultIdentities);\n            }\n            else if (options.resetResultIdentities) {\n                this.storeReader.resetCanon();\n            }\n        }\n        return ids;\n    };\n    InMemoryCache.prototype.retain = function (rootId, optimistic) {\n        return (optimistic ? this.optimisticData : this.data).retain(rootId);\n    };\n    InMemoryCache.prototype.release = function (rootId, optimistic) {\n        return (optimistic ? this.optimisticData : this.data).release(rootId);\n    };\n    InMemoryCache.prototype.identify = function (object) {\n        if (isReference(object))\n            return object.__ref;\n        try {\n            return this.policies.identify(object)[0];\n        }\n        catch (e) {\n            __DEV__ && invariant.warn(e);\n        }\n    };\n    InMemoryCache.prototype.evict = function (options) {\n        if (!options.id) {\n            if (hasOwn.call(options, \"id\")) {\n                return false;\n            }\n            options = __assign(__assign({}, options), { id: \"ROOT_QUERY\" });\n        }\n        try {\n            ++this.txCount;\n            return this.optimisticData.evict(options, this.data);\n        }\n        finally {\n            if (!--this.txCount && options.broadcast !== false) {\n                this.broadcastWatches();\n            }\n        }\n    };\n    InMemoryCache.prototype.reset = function (options) {\n        var _this = this;\n        this.init();\n        canonicalStringify.reset();\n        if (options && options.discardWatches) {\n            this.watches.forEach(function (watch) { return _this.maybeBroadcastWatch.forget(watch); });\n            this.watches.clear();\n            forgetCache(this);\n        }\n        else {\n            this.broadcastWatches();\n        }\n        return Promise.resolve();\n    };\n    InMemoryCache.prototype.removeOptimistic = function (idToRemove) {\n        var newOptimisticData = this.optimisticData.removeLayer(idToRemove);\n        if (newOptimisticData !== this.optimisticData) {\n            this.optimisticData = newOptimisticData;\n            this.broadcastWatches();\n        }\n    };\n    InMemoryCache.prototype.batch = function (options) {\n        var _this = this;\n        var update = options.update, _a = options.optimistic, optimistic = _a === void 0 ? true : _a, removeOptimistic = options.removeOptimistic, onWatchUpdated = options.onWatchUpdated;\n        var updateResult;\n        var perform = function (layer) {\n            var _a = _this, data = _a.data, optimisticData = _a.optimisticData;\n            ++_this.txCount;\n            if (layer) {\n                _this.data = _this.optimisticData = layer;\n            }\n            try {\n                return updateResult = update(_this);\n            }\n            finally {\n                --_this.txCount;\n                _this.data = data;\n                _this.optimisticData = optimisticData;\n            }\n        };\n        var alreadyDirty = new Set();\n        if (onWatchUpdated && !this.txCount) {\n            this.broadcastWatches(__assign(__assign({}, options), { onWatchUpdated: function (watch) {\n                    alreadyDirty.add(watch);\n                    return false;\n                } }));\n        }\n        if (typeof optimistic === 'string') {\n            this.optimisticData = this.optimisticData.addLayer(optimistic, perform);\n        }\n        else if (optimistic === false) {\n            perform(this.data);\n        }\n        else {\n            perform();\n        }\n        if (typeof removeOptimistic === \"string\") {\n            this.optimisticData = this.optimisticData.removeLayer(removeOptimistic);\n        }\n        if (onWatchUpdated && alreadyDirty.size) {\n            this.broadcastWatches(__assign(__assign({}, options), { onWatchUpdated: function (watch, diff) {\n                    var result = onWatchUpdated.call(this, watch, diff);\n                    if (result !== false) {\n                        alreadyDirty.delete(watch);\n                    }\n                    return result;\n                } }));\n            if (alreadyDirty.size) {\n                alreadyDirty.forEach(function (watch) { return _this.maybeBroadcastWatch.dirty(watch); });\n            }\n        }\n        else {\n            this.broadcastWatches(options);\n        }\n        return updateResult;\n    };\n    InMemoryCache.prototype.performTransaction = function (update, optimisticId) {\n        return this.batch({\n            update: update,\n            optimistic: optimisticId || (optimisticId !== null),\n        });\n    };\n    InMemoryCache.prototype.transformDocument = function (document) {\n        if (this.addTypename) {\n            var result = this.typenameDocumentCache.get(document);\n            if (!result) {\n                result = addTypenameToDocument(document);\n                this.typenameDocumentCache.set(document, result);\n                this.typenameDocumentCache.set(result, result);\n            }\n            return result;\n        }\n        return document;\n    };\n    InMemoryCache.prototype.transformForLink = function (document) {\n        var fragments = this.config.fragments;\n        return fragments\n            ? fragments.transform(document)\n            : document;\n    };\n    InMemoryCache.prototype.broadcastWatches = function (options) {\n        var _this = this;\n        if (!this.txCount) {\n            this.watches.forEach(function (c) { return _this.maybeBroadcastWatch(c, options); });\n        }\n    };\n    InMemoryCache.prototype.broadcastWatch = function (c, options) {\n        var lastDiff = c.lastDiff;\n        var diff = this.diff(c);\n        if (options) {\n            if (c.optimistic &&\n                typeof options.optimistic === \"string\") {\n                diff.fromOptimisticTransaction = true;\n            }\n            if (options.onWatchUpdated &&\n                options.onWatchUpdated.call(this, c, diff, lastDiff) === false) {\n                return;\n            }\n        }\n        if (!lastDiff || !equal(lastDiff.result, diff.result)) {\n            c.callback(c.lastDiff = diff, lastDiff);\n        }\n    };\n    return InMemoryCache;\n}(ApolloCache));\nexport { InMemoryCache };\n//# sourceMappingURL=inMemoryCache.js.map","import { invariant } from \"../../utilities/globals/index.js\";\nimport * as React from 'react';\nimport { getApolloContext } from \"./ApolloContext.js\";\nexport var ApolloProvider = function (_a) {\n    var client = _a.client, children = _a.children;\n    var ApolloContext = getApolloContext();\n    return (React.createElement(ApolloContext.Consumer, null, function (context) {\n        if (context === void 0) { context = {}; }\n        if (client && context.client !== client) {\n            context = Object.assign({}, context, { client: client });\n        }\n        __DEV__ ? invariant(context.client, 'ApolloProvider was not passed a client instance. Make ' +\n            'sure you pass in your client via the \"client\" prop.') : invariant(context.client, 28);\n        return (React.createElement(ApolloContext.Provider, { value: context }, children));\n    }));\n};\n//# sourceMappingURL=ApolloProvider.js.map","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import { createElement, useMemo } from 'react';\nimport { I18nContext } from './context';\nexport function I18nextProvider(_ref) {\n  var i18n = _ref.i18n,\n      defaultNS = _ref.defaultNS,\n      children = _ref.children;\n  var value = useMemo(function () {\n    return {\n      i18n: i18n,\n      defaultNS: defaultNS\n    };\n  }, [i18n, defaultNS]);\n  return createElement(I18nContext.Provider, {\n    value: value\n  }, children);\n}","import { __extends } from \"tslib\";\nimport { invariant } from \"../../../utilities/globals/index.js\";\nimport { print } from 'graphql';\nimport { equal } from '@wry/equality';\nimport { ApolloLink, } from \"../../../link/core/index.js\";\nimport { Observable, addTypenameToDocument, removeClientSetsFromDocument, removeConnectionDirectiveFromDocument, cloneDeep, stringifyForDisplay, } from \"../../../utilities/index.js\";\nfunction requestToKey(request, addTypename) {\n    var queryString = request.query &&\n        print(addTypename ? addTypenameToDocument(request.query) : request.query);\n    var requestKey = { query: queryString };\n    return JSON.stringify(requestKey);\n}\nvar MockLink = (function (_super) {\n    __extends(MockLink, _super);\n    function MockLink(mockedResponses, addTypename) {\n        if (addTypename === void 0) { addTypename = true; }\n        var _this = _super.call(this) || this;\n        _this.addTypename = true;\n        _this.mockedResponsesByKey = {};\n        _this.addTypename = addTypename;\n        if (mockedResponses) {\n            mockedResponses.forEach(function (mockedResponse) {\n                _this.addMockedResponse(mockedResponse);\n            });\n        }\n        return _this;\n    }\n    MockLink.prototype.addMockedResponse = function (mockedResponse) {\n        var normalizedMockedResponse = this.normalizeMockedResponse(mockedResponse);\n        var key = requestToKey(normalizedMockedResponse.request, this.addTypename);\n        var mockedResponses = this.mockedResponsesByKey[key];\n        if (!mockedResponses) {\n            mockedResponses = [];\n            this.mockedResponsesByKey[key] = mockedResponses;\n        }\n        mockedResponses.push(normalizedMockedResponse);\n    };\n    MockLink.prototype.request = function (operation) {\n        var _this = this;\n        this.operation = operation;\n        var key = requestToKey(operation, this.addTypename);\n        var unmatchedVars = [];\n        var requestVariables = operation.variables || {};\n        var mockedResponses = this.mockedResponsesByKey[key];\n        var responseIndex = mockedResponses ? mockedResponses.findIndex(function (res, index) {\n            var mockedResponseVars = res.request.variables || {};\n            if (equal(requestVariables, mockedResponseVars)) {\n                return true;\n            }\n            unmatchedVars.push(mockedResponseVars);\n            return false;\n        }) : -1;\n        var response = responseIndex >= 0\n            ? mockedResponses[responseIndex]\n            : void 0;\n        var configError;\n        if (!response) {\n            configError = new Error(\"No more mocked responses for the query: \".concat(print(operation.query), \"\\nExpected variables: \").concat(stringifyForDisplay(operation.variables), \"\\n\").concat(unmatchedVars.length > 0 ? \"\\nFailed to match \".concat(unmatchedVars.length, \" mock\").concat(unmatchedVars.length === 1 ? \"\" : \"s\", \" for this query. The mocked response had the following variables:\\n\").concat(unmatchedVars.map(function (d) { return \"  \".concat(stringifyForDisplay(d)); }).join('\\n'), \"\\n\") : \"\"));\n        }\n        else {\n            mockedResponses.splice(responseIndex, 1);\n            var newData = response.newData;\n            if (newData) {\n                response.result = newData();\n                mockedResponses.push(response);\n            }\n            if (!response.result && !response.error) {\n                configError = new Error(\"Mocked response should contain either result or error: \".concat(key));\n            }\n        }\n        return new Observable(function (observer) {\n            var timer = setTimeout(function () {\n                if (configError) {\n                    try {\n                        if (_this.onError(configError, observer) !== false) {\n                            throw configError;\n                        }\n                    }\n                    catch (error) {\n                        observer.error(error);\n                    }\n                }\n                else if (response) {\n                    if (response.error) {\n                        observer.error(response.error);\n                    }\n                    else {\n                        if (response.result) {\n                            observer.next(typeof response.result === 'function'\n                                ? response.result()\n                                : response.result);\n                        }\n                        observer.complete();\n                    }\n                }\n            }, response && response.delay || 0);\n            return function () {\n                clearTimeout(timer);\n            };\n        });\n    };\n    MockLink.prototype.normalizeMockedResponse = function (mockedResponse) {\n        var newMockedResponse = cloneDeep(mockedResponse);\n        var queryWithoutConnection = removeConnectionDirectiveFromDocument(newMockedResponse.request.query);\n        __DEV__ ? invariant(queryWithoutConnection, \"query is required\") : invariant(queryWithoutConnection, 37);\n        newMockedResponse.request.query = queryWithoutConnection;\n        var query = removeClientSetsFromDocument(newMockedResponse.request.query);\n        if (query) {\n            newMockedResponse.request.query = query;\n        }\n        return newMockedResponse;\n    };\n    return MockLink;\n}(ApolloLink));\nexport { MockLink };\nexport function mockSingleLink() {\n    var mockedResponses = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        mockedResponses[_i] = arguments[_i];\n    }\n    var maybeTypename = mockedResponses[mockedResponses.length - 1];\n    var mocks = mockedResponses.slice(0, mockedResponses.length - 1);\n    if (typeof maybeTypename !== 'boolean') {\n        mocks = mockedResponses;\n        maybeTypename = true;\n    }\n    return new MockLink(mocks, maybeTypename);\n}\n//# sourceMappingURL=mockLink.js.map","import { __assign, __extends } from \"tslib\";\nimport * as React from 'react';\nimport { ApolloClient } from \"../../core/index.js\";\nimport { InMemoryCache as Cache } from \"../../cache/index.js\";\nimport { ApolloProvider } from \"../../react/context/index.js\";\nimport { MockLink } from \"../core/index.js\";\nvar MockedProvider = (function (_super) {\n    __extends(MockedProvider, _super);\n    function MockedProvider(props) {\n        var _this = _super.call(this, props) || this;\n        var _a = _this.props, mocks = _a.mocks, addTypename = _a.addTypename, defaultOptions = _a.defaultOptions, cache = _a.cache, resolvers = _a.resolvers, link = _a.link;\n        var client = new ApolloClient({\n            cache: cache || new Cache({ addTypename: addTypename }),\n            defaultOptions: defaultOptions,\n            link: link || new MockLink(mocks || [], addTypename),\n            resolvers: resolvers,\n        });\n        _this.state = { client: client };\n        return _this;\n    }\n    MockedProvider.prototype.render = function () {\n        var _a = this.props, children = _a.children, childProps = _a.childProps;\n        return React.isValidElement(children) ? (React.createElement(ApolloProvider, { client: this.state.client }, React.cloneElement(React.Children.only(children), __assign({}, childProps)))) : null;\n    };\n    MockedProvider.prototype.componentWillUnmount = function () {\n        this.state.client.stop();\n    };\n    MockedProvider.defaultProps = {\n        addTypename: true\n    };\n    return MockedProvider;\n}(React.Component));\nexport { MockedProvider };\n//# sourceMappingURL=MockedProvider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cookieDecorator = void 0;\nfunction setCookies(cookies) {\n    var entries = Object.keys(cookies).map(function (key) { return [\n        key,\n        cookies[key],\n    ]; });\n    for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n        var _a = entries_1[_i], key = _a[0], value = _a[1];\n        document.cookie = \"\".concat(key, \"=\").concat(value);\n    }\n}\nfunction clearCookies() {\n    var cookies = document.cookie.split(';');\n    cookies.forEach(function (cookie) {\n        var equalPos = cookie.indexOf('=');\n        var key = equalPos > -1 ? cookie.substring(0, equalPos) : cookie;\n        document.cookie = key + '=;expires=Thu, 01 Jan 1970 00:00:00 GMT';\n    });\n}\nvar cookieDecorator = function (storyFn, _a) {\n    var parameters = _a.parameters;\n    clearCookies();\n    if (parameters && parameters.cookie) {\n        setCookies(parameters.cookie);\n    }\n    return storyFn();\n};\nexports.cookieDecorator = cookieDecorator;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./cookieDecorator\"), exports);\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _toArray from '@babel/runtime/helpers/esm/toArray';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread(_objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }), this.options));\n    }\n  }, {\n    key: \"clone\",\n    value: function clone(options) {\n      options = options || this.options;\n      options.prefix = options.prefix || this.prefix;\n      return new Logger(this.logger, options);\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && typeof window.navigator.userAgentData === 'undefined' && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\nvar chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  var possibleChars = chars.filter(function (c) {\n    return nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0;\n  });\n  if (possibleChars.length === 0) return true;\n  var r = new RegExp(\"(\".concat(possibleChars.map(function (c) {\n    return c === '?' ? '\\\\?' : c;\n  }).join('|'), \")\"));\n  var matched = !r.test(key);\n\n  if (!matched) {\n    var ki = key.indexOf(keySeparator);\n\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n\n  return matched;\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction deepFind(obj, path) {\n  var keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  var paths = path.split(keySeparator);\n  var current = obj;\n\n  for (var i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n\n    if (current[paths[i]] === undefined) {\n      var j = 2;\n      var p = paths.slice(i, i + j).join(keySeparator);\n      var mix = current[p];\n\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n\n      var joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n\n    current = current[paths[i]];\n  }\n\n  return current;\n}\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  var _super = _createSuper(ResourceStore);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    if (_this.options.ignoreJSONStructure === undefined) {\n      _this.options.ignoreJSONStructure = true;\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      var result = getPath(this.data, path);\n      if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n      return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread$1(_objectSpread$1({}, pack), resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread$1(_objectSpread$1({}, {}), this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"hasLanguageSomeTranslations\",\n    value: function hasLanguageSomeTranslations(lng) {\n      var data = this.getDataByLanguage(lng);\n      var n = data && Object.keys(data) || [];\n      return !!n.find(function (v) {\n        return data[v] && Object.keys(data[v]).length > 0;\n      });\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$1(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$1(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$1() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  var _super = _createSuper$1(Translator);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n\n      if (key === undefined || key === null) {\n        return false;\n      }\n\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS || [];\n      var wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n      var seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n\n      if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options, lastKey) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n\n          if (returnDetails) {\n            resolved.res = \"\".concat(namespace).concat(nsSeparator).concat(key);\n            return resolved;\n          }\n\n          return \"\".concat(namespace).concat(nsSeparator).concat(key);\n        }\n\n        if (returnDetails) {\n          resolved.res = key;\n          return resolved;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          if (!this.options.returnedObjectHandler) {\n            this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          }\n\n          var r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, _objectSpread$2(_objectSpread$2({}, options), {}, {\n            ns: namespaces\n          })) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n\n          if (returnDetails) {\n            resolved.res = r;\n            return resolved;\n          }\n\n          return r;\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy[m] = this.translate(deepKey, _objectSpread$2(_objectSpread$2({}, options), {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy[m] === deepKey) copy[m] = res[m];\n            }\n          }\n\n          res = copy;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options, lastKey);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var hasDefaultValue = Translator.hasDefaultValue(options);\n        var defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n        var defaultValue = options[\"defaultValue\".concat(defaultValueSuffix)] || options.defaultValue;\n\n        if (!this.isValidLookup(res) && hasDefaultValue) {\n          usedDefault = true;\n          res = defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n        var resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n        var updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread$2(_objectSpread$2({}, options), {}, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k, specificDefaultValue) {\n            var defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (language) {\n                _this2.pluralResolver.getSuffixes(language, options).forEach(function (suffix) {\n                  send([language], key + suffix, options[\"defaultValue\".concat(suffix)] || defaultValue);\n                });\n              });\n            } else {\n              send(lngs, key, defaultValue);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved, lastKey);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n\n        if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n          if (this.options.compatibilityAPI !== 'v1') {\n            res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? \"\".concat(namespace, \":\").concat(key) : key, usedDefault ? res : undefined);\n          } else {\n            res = this.options.parseMissingKeyHandler(res);\n          }\n        }\n      }\n\n      if (returnDetails) {\n        resolved.res = res;\n        return resolved;\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved, lastKey) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), options), resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread$2(_objectSpread$2({}, options), {\n          interpolation: _objectSpread$2(_objectSpread$2({}, this.options.interpolation), options.interpolation)\n        }));\n        var skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n        var nestBef;\n\n        if (skipOnVariables) {\n          var nb = res.match(this.interpolator.nestingRegexp);\n          nestBef = nb && nb.length;\n        }\n\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread$2(_objectSpread$2({}, this.options.interpolation.defaultVariables), data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n\n        if (skipOnVariables) {\n          var na = res.match(this.interpolator.nestingRegexp);\n          var nestAft = na && na.length;\n          if (nestBef < nestAft) options.nest = false;\n        }\n\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          if (lastKey && lastKey[0] === args[0] && !options.context) {\n            _this3.logger.warn(\"It seems you are nesting recursively key: \".concat(args[0], \" in key: \").concat(key[0]));\n\n            return null;\n          }\n\n          return _this3.translate.apply(_this3, args.concat([key]));\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread$2({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n\n        var needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && _this4.pluralResolver.shouldUseIntlApi();\n\n        var needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKeys = [key];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count, options);\n              var zeroSuffix = \"\".concat(_this4.options.pluralSeparator, \"zero\");\n\n              if (needsPluralHandling) {\n                finalKeys.push(key + pluralSuffix);\n\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(key + zeroSuffix);\n                }\n              }\n\n              if (needsContextHandling) {\n                var contextKey = \"\".concat(key).concat(_this4.options.contextSeparator).concat(options.context);\n                finalKeys.push(contextKey);\n\n                if (needsPluralHandling) {\n                  finalKeys.push(contextKey + pluralSuffix);\n\n                  if (needsZeroSuffixLookup) {\n                    finalKeys.push(contextKey + zeroSuffix);\n                  }\n                }\n              }\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }], [{\n    key: \"hasDefaultValue\",\n    value: function hasDefaultValue(options) {\n      var prefix = 'defaultValue';\n\n      for (var option in options) {\n        if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nvar deprecatedJsonVersions = ['v1', 'v2', 'v3'];\nvar suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n\n    if ((!this.options.compatibilityJSON || this.options.compatibilityJSON === 'v4') && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.shouldUseIntlApi()) {\n        try {\n          return new Intl.PluralRules(code, {\n            type: options.ordinal ? 'ordinal' : 'cardinal'\n          });\n        } catch (_unused) {\n          return;\n        }\n      }\n\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (this.shouldUseIntlApi()) {\n        return rule && rule.resolvedOptions().pluralCategories.length > 1;\n      }\n\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return this.getSuffixes(code, options).map(function (suffix) {\n        return \"\".concat(key).concat(suffix);\n      });\n    }\n  }, {\n    key: \"getSuffixes\",\n    value: function getSuffixes(code) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var rule = this.getRule(code, options);\n\n      if (!rule) {\n        return [];\n      }\n\n      if (this.shouldUseIntlApi()) {\n        return rule.resolvedOptions().pluralCategories.sort(function (pluralCategory1, pluralCategory2) {\n          return suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2];\n        }).map(function (pluralCategory) {\n          return \"\".concat(_this.options.prepend).concat(pluralCategory);\n        });\n      }\n\n      return rule.numbers.map(function (number) {\n        return _this.getSuffix(code, number, options);\n      });\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var rule = this.getRule(code, options);\n\n      if (rule) {\n        if (this.shouldUseIntlApi()) {\n          return \"\".concat(this.options.prepend).concat(rule.select(count));\n        }\n\n        return this.getSuffixRetroCompatible(rule, count);\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }, {\n    key: \"getSuffixRetroCompatible\",\n    value: function getSuffixRetroCompatible(rule, count) {\n      var _this2 = this;\n\n      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n      var suffix = rule.numbers[idx];\n\n      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        if (suffix === 2) {\n          suffix = 'plural';\n        } else if (suffix === 1) {\n          suffix = '';\n        }\n      }\n\n      var returnSuffix = function returnSuffix() {\n        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n      };\n\n      if (this.options.compatibilityJSON === 'v1') {\n        if (suffix === 1) return '';\n        if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n        return returnSuffix();\n      } else if (this.options.compatibilityJSON === 'v2') {\n        return returnSuffix();\n      } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n        return returnSuffix();\n      }\n\n      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n    }\n  }, {\n    key: \"shouldUseIntlApi\",\n    value: function shouldUseIntlApi() {\n      return !deprecatedJsonVersions.includes(this.options.compatibilityJSON);\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n            interpolationkey: key\n          })) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, _objectSpread$3(_objectSpread$3(_objectSpread$3({}, options), data), {}, {\n          interpolationkey: k\n        }));\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      var skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n      var todos = [{\n        regex: this.regexpUnescape,\n        safeValue: function safeValue(val) {\n          return regexSafe(val);\n        }\n      }, {\n        regex: this.regexp,\n        safeValue: function safeValue(val) {\n          return _this.escapeValue ? regexSafe(_this.escape(val)) : regexSafe(val);\n        }\n      }];\n      todos.forEach(function (todo) {\n        replaces = 0;\n\n        while (match = todo.regex.exec(str)) {\n          var matchedVar = match[1].trim();\n          value = handleFormat(matchedVar);\n\n          if (value === undefined) {\n            if (typeof missingInterpolationHandler === 'function') {\n              var temp = missingInterpolationHandler(str, match, options);\n              value = typeof temp === 'string' ? temp : '';\n            } else if (options && options.hasOwnProperty(matchedVar)) {\n              value = '';\n            } else if (skipOnVariables) {\n              value = match[0];\n              continue;\n            } else {\n              _this.logger.warn(\"missed to pass in variable \".concat(matchedVar, \" for interpolating \").concat(str));\n\n              value = '';\n            }\n          } else if (typeof value !== 'string' && !_this.useRawValueToEscape) {\n            value = makeString(value);\n          }\n\n          var safeValue = todo.safeValue(value);\n          str = str.replace(match[0], safeValue);\n\n          if (skipOnVariables) {\n            todo.regex.lastIndex += value.length;\n            todo.regex.lastIndex -= match[0].length;\n          } else {\n            todo.regex.lastIndex = 0;\n          }\n\n          replaces++;\n\n          if (replaces >= _this.maxReplaces) {\n            break;\n          }\n        }\n      });\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread$3({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        var matchedSingleQuotes = optionsString.match(/'/g);\n        var matchedDoubleQuotes = optionsString.match(/\"/g);\n\n        if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n          optionsString = optionsString.replace(/'/g, '\"');\n        }\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread$3(_objectSpread$3({}, inheritedOptions), clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, _objectSpread$3(_objectSpread$3({}, options), {}, {\n              interpolationkey: match[1].trim()\n            }));\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction parseFormatStr(formatStr) {\n  var formatName = formatStr.toLowerCase().trim();\n  var formatOptions = {};\n\n  if (formatStr.indexOf('(') > -1) {\n    var p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    var optStr = p[1].substring(0, p[1].length - 1);\n\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      var opts = optStr.split(';');\n      opts.forEach(function (opt) {\n        if (!opt) return;\n\n        var _opt$split = opt.split(':'),\n            _opt$split2 = _toArray(_opt$split),\n            key = _opt$split2[0],\n            rest = _opt$split2.slice(1);\n\n        var val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n\n  return {\n    formatName: formatName,\n    formatOptions: formatOptions\n  };\n}\n\nfunction createCachedFormatter(fn) {\n  var cache = {};\n  return function invokeFormatter(val, lng, options) {\n    var key = lng + JSON.stringify(options);\n    var formatter = cache[key];\n\n    if (!formatter) {\n      formatter = fn(lng, options);\n      cache[key] = formatter;\n    }\n\n    return formatter(val);\n  };\n}\n\nvar Formatter = function () {\n  function Formatter() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Formatter);\n\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter(function (lng, options) {\n        var formatter = new Intl.NumberFormat(lng, options);\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      currency: createCachedFormatter(function (lng, options) {\n        var formatter = new Intl.NumberFormat(lng, _objectSpread$4(_objectSpread$4({}, options), {}, {\n          style: 'currency'\n        }));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      datetime: createCachedFormatter(function (lng, options) {\n        var formatter = new Intl.DateTimeFormat(lng, _objectSpread$4({}, options));\n        return function (val) {\n          return formatter.format(val);\n        };\n      }),\n      relativetime: createCachedFormatter(function (lng, options) {\n        var formatter = new Intl.RelativeTimeFormat(lng, _objectSpread$4({}, options));\n        return function (val) {\n          return formatter.format(val, options.range || 'day');\n        };\n      }),\n      list: createCachedFormatter(function (lng, options) {\n        var formatter = new Intl.ListFormat(lng, _objectSpread$4({}, options));\n        return function (val) {\n          return formatter.format(val);\n        };\n      })\n    };\n    this.init(options);\n  }\n\n  _createClass(Formatter, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var iOpts = options.interpolation;\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    }\n  }, {\n    key: \"add\",\n    value: function add(name, fc) {\n      this.formats[name.toLowerCase().trim()] = fc;\n    }\n  }, {\n    key: \"addCached\",\n    value: function addCached(name, fc) {\n      this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n    }\n  }, {\n    key: \"format\",\n    value: function format(value, _format, lng, options) {\n      var _this = this;\n\n      var formats = _format.split(this.formatSeparator);\n\n      var result = formats.reduce(function (mem, f) {\n        var _parseFormatStr = parseFormatStr(f),\n            formatName = _parseFormatStr.formatName,\n            formatOptions = _parseFormatStr.formatOptions;\n\n        if (_this.formats[formatName]) {\n          var formatted = mem;\n\n          try {\n            var valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n            var l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n            formatted = _this.formats[formatName](mem, l, _objectSpread$4(_objectSpread$4(_objectSpread$4({}, formatOptions), options), valOptions));\n          } catch (error) {\n            _this.logger.warn(error);\n          }\n\n          return formatted;\n        } else {\n          _this.logger.warn(\"there was no format function for \".concat(formatName));\n        }\n\n        return mem;\n      }, value);\n      return result;\n    }\n  }]);\n\n  return Formatter;\n}();\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$5(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$2(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$2(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$2() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  var _super = _createSuper$2(Connector);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.waitingReads = [];\n    _this.maxParallelReads = options.maxParallelReads || 10;\n    _this.readingCalls = 0;\n    _this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    _this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = {};\n      var pending = {};\n      var toLoadLanguages = {};\n      var toLoadNamespaces = {};\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending[name] === undefined) pending[name] = true;\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending[name] === undefined) pending[name] = true;\n            if (toLoad[name] === undefined) toLoad[name] = true;\n            if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n      });\n\n      if (Object.keys(toLoad).length || Object.keys(pending).length) {\n        this.queue.push({\n          pending: pending,\n          pendingCount: Object.keys(pending).length,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: Object.keys(toLoad),\n        pending: Object.keys(pending),\n        toLoadLanguages: Object.keys(toLoadLanguages),\n        toLoadNamespaces: Object.keys(toLoadNamespaces)\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        removePending(q, name);\n        if (err) q.errors.push(err);\n\n        if (q.pendingCount === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = {};\n            var loadedKeys = q.loaded[l];\n\n            if (loadedKeys.length) {\n              loadedKeys.forEach(function (ns) {\n                if (loaded[l][ns] === undefined) loaded[l][ns] = true;\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n\n      if (this.readingCalls >= this.maxParallelReads) {\n        this.waitingReads.push({\n          lng: lng,\n          ns: ns,\n          fcName: fcName,\n          tried: tried,\n          wait: wait,\n          callback: callback\n        });\n        return;\n      }\n\n      this.readingCalls++;\n      return this.backend[fcName](lng, ns, function (err, data) {\n        _this3.readingCalls--;\n\n        if (_this3.waitingReads.length > 0) {\n          var next = _this3.waitingReads.shift();\n\n          _this3.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n        }\n\n        if (err && data && tried < _this3.maxRetries) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread$5(_objectSpread$5({}, options), {}, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$6(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper$3(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct$3(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct$3() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction noop() {}\n\nfunction bindMemberFunctions(inst) {\n  var mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(function (mem) {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  var _super = _createSuper$3(I18n);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _super.call(this);\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n    bindMemberFunctions(_assertThisInitialized(_this));\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n        if (typeof options.ns === 'string') {\n          options.defaultNS = options.ns;\n        } else if (options.ns.indexOf('translation') < 0) {\n          options.defaultNS = options.ns[0];\n        }\n      }\n\n      var defOpts = get();\n      this.options = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, defOpts), this.options), transformOptions(options));\n\n      if (this.options.compatibilityAPI !== 'v1') {\n        this.options.interpolation = _objectSpread$6(_objectSpread$6({}, defOpts.interpolation), this.options.interpolation);\n      }\n\n      if (options.keySeparator !== undefined) {\n        this.options.userDefinedKeySeparator = options.keySeparator;\n      }\n\n      if (options.nsSeparator !== undefined) {\n        this.options.userDefinedNsSeparator = options.nsSeparator;\n      }\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var formatter;\n\n        if (this.modules.formatter) {\n          formatter = this.modules.formatter;\n        } else if (typeof Intl !== 'undefined') {\n          formatter = Formatter;\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n\n        if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n          s.formatter = createClassOnDemand(formatter);\n          s.formatter.init(s, this.options);\n          this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n        }\n\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n        var codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n      }\n\n      if (!this.services.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n      storeApiChained.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store2;\n\n          (_this2$store2 = _this2.store)[fcName].apply(_this2$store2, arguments);\n\n          return _this2;\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        var finish = function finish(err, t) {\n          if (_this2.isInitialized && !_this2.initializedStoreOnce) _this2.logger.warn('init: i18next is already initialized. You should call init just once!');\n          _this2.isInitialized = true;\n          if (!_this2.options.isClone) _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        };\n\n        if (_this2.languages && _this2.options.compatibilityAPI !== 'v1' && !_this2.isInitialized) return finish(null, _this2.t.bind(_this2));\n\n        _this2.changeLanguage(_this2.options.lng, finish);\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, function (e) {\n          if (!e && !_this3.resolvedLanguage && _this3.language) _this3.setResolvedLanguage(_this3.language);\n          usedCallback(e);\n        });\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === 'formatter') {\n        this.modules.formatter = module;\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setResolvedLanguage\",\n    value: function setResolvedLanguage(l) {\n      if (!l || !this.languages) return;\n      if (['cimode', 'dev'].indexOf(l) > -1) return;\n\n      for (var li = 0; li < this.languages.length; li++) {\n        var lngInLngs = this.languages[li];\n        if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n\n        if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n          this.resolvedLanguage = lngInLngs;\n          break;\n        }\n      }\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var setLngProps = function setLngProps(l) {\n        _this4.language = l;\n        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n        _this4.resolvedLanguage = undefined;\n\n        _this4.setResolvedLanguage(l);\n      };\n\n      var done = function done(err, l) {\n        if (l) {\n          setLngProps(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        if (!lng && !lngs && _this4.services.languageDetector) lngs = [];\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            setLngProps(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns, keyPrefix) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread$6({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n        var keySeparator = _this5.options.keySeparator || '.';\n        var resultKey = options.keyPrefix ? \"\".concat(options.keyPrefix).concat(keySeparator).concat(key) : key;\n        return _this5.t(resultKey, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      fixedT.keyPrefix = keyPrefix;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.resolvedLanguage || this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread$6(_objectSpread$6(_objectSpread$6({}, this.options), options), {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n\n      if (options.debug !== undefined || options.prefix !== undefined) {\n        clone.logger = clone.logger.clone(options);\n      }\n\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread$6({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return {\n        options: this.options,\n        store: this.store,\n        language: this.language,\n        languages: this.languages,\n        resolvedLanguage: this.resolvedLanguage\n      };\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\n_defineProperty(I18n, \"createInstance\", function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var callback = arguments.length > 1 ? arguments[1] : undefined;\n  return new I18n(options, callback);\n});\n\nvar instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nvar createInstance = instance.createInstance;\nvar init = instance.init;\nvar loadResources = instance.loadResources;\nvar reloadResources = instance.reloadResources;\nvar use = instance.use;\nvar changeLanguage = instance.changeLanguage;\nvar getFixedT = instance.getFixedT;\nvar t = instance.t;\nvar exists = instance.exists;\nvar setDefaultNamespace = instance.setDefaultNamespace;\nvar hasLoadedNamespace = instance.hasLoadedNamespace;\nvar loadNamespaces = instance.loadNamespaces;\nvar loadLanguages = instance.loadLanguages;\n\nexport default instance;\nexport { changeLanguage, createInstance, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport en from './en.json';\n\nexport const resources = {\n  en: {\n    translation: en\n  }\n} as const;\n\ni18n.use(initReactI18next).init({\n  resources\n});\n\nexport { i18n };\n","import React, { Suspense, useEffect } from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { i18n } from '../i18n/i18n';\n\nconst withI18next = (Story, context) => {\n  const { locale } = context.globals;\n\n  useEffect(() => {\n    i18n.changeLanguage(locale);\n  }, [locale]);\n  return (\n    <Suspense fallback={<div>loading translations...</div>}>\n      <I18nextProvider i18n={i18n}>\n        <Story />\n      </I18nextProvider>\n    </Suspense>\n  );\n};\n\nexport default withI18next;\n","import './style.css';\nimport { MockedProvider } from '@apollo/client/testing';\nimport { cookieDecorator } from 'storybook-addon-cookie';\nimport withI18next from './i18next';\nimport { i18n } from '../i18n/i18n';\n\nexport const parameters = {\n  actions: { argTypesRegex: '^on[A-Z].*' },\n  controls: {\n    matchers: {\n      color: /(background|color)$/i,\n      date: /Date$/\n    }\n  },\n  apolloClient: {\n    MockedProvider\n  },\n  i18n,\n  locale: 'en'\n};\n\nexport const globalTypes = {\n  locale: {\n    name: 'Locale',\n    description: 'Internationalization locale',\n    defaultValue: 'en',\n    toolbar: {\n      icon: 'globe',\n      items: [{ value: 'en', right: '🇺🇸', title: 'English' }]\n    }\n  },\n  ['addon-apolloClient/queries']: {\n    name: 'Apollo client addon queries',\n    description: 'Apollo client addon queries',\n    defaultValue: []\n  }\n};\n\nexport const decorators = [cookieDecorator, withI18next];\n"],"names":["stringifyForDisplay","value","undefId","makeUniqueId","key","ApolloCache","wrap","getFragmentQueryDocument","options","_this","optimisticId","updateResult","transaction","document","object","optimistic","__assign","_a","id","data","__rest","fragment","fragmentName","update","cache","MissingFieldError","_super","__extends","message","path","query","variables","i","DELETE","delModifier","INVALIDATE","EntityStore","policies","group","objectOrReference","storeFieldName","maybeDeepFreeze","isReference","objOrRef","objOrIdOrRef","mergeIntoStore","makeReference","ref","dataId","fieldName","hasOwn","storeObject","Layer","dependOnExistence","older","newer","existing","incoming","invariant","merged","DeepMerger","storeObjectReconciler","fieldsToDirty_1","fieldNameFromStoreName","fields","changedFields_1","needToMerge_1","allDeleted_1","sharedDetails_1","fieldNameOrOptions","from","fieldValue","modify","newValue","args","typename","limit","evicted","obj","extraRootIds","newData","__META","rest_1","rootId","count","ids","snapshot","idsToRemove","root_1","found_1","root","workSet_1","isNonNullObject","child","CacheGroup","caching","parent","dep","Trie","canUseWeakMap","makeDepKey","maybeDependOnExistenceOfEntity","store","entityId","supportsResultCaching","Root","_b","resultCaching","seed","Stump","layerId","replay","ownStoreObject","parentStoreObject","equal","fromParent","p","existingObject","incomingObject","property","existingValue","incomingValue","execSelectionSetKeyArgs","StoreReader","config","compact","shouldCanonizeResults","ObjectCanon","canonizeResults","peekArgs","other","selectionSet","context","field","array","_c","returnPartialData","_d","getDefaultValues","getQueryDefinition","rootRef","execResult","getMainDefinition","canonicalStringify","extractFragmentContext","missing","firstMissing","result","latest","enclosingRef","objectsToMerge","missingMerger","handleMissing","resultName","workSet","selection","shouldInclude","isField","resultKeyNameFromField","addTypenameToDocument","isArray","getFragmentFromSelection","Kind","InvariantError","mergeDeepArray","finalResult","frozen","childResult","item","assertSelectionSetForIdValue","tree","_","getTypenameFromStoreObject","specifierInfoCache","lookupSpecifierInfo","spec","cacheKey","keyFieldsFnFromSpecifier","specifier","info","extract","keyObject","collectSpecifierPaths","schemaKeyPath","extracted","extractKeyPath","extractKey","keyArgsFnFromSpecifier","collected","keyPath","firstKey","firstChar","isNonEmptyArray","directiveName_1","d","directiveArgs","argumentsObjectFromField","variableName","varKeyPath","suffix","extractor","merger","getSpecifierPaths","toMerge","paths_1","currentPath_1","s","normalize","reducer","getStoreKeyName","argsFromFieldSpecifier","nullKeyFieldsFn","simpleKeyArgsFn","_args","mergeTrueFn","mergeObjects","mergeFalseFn","Policies","defaultDataIdFromObject","partialContext","normalizeReadFieldOptions","policy","keyFn","specifierOrId","typePolicies","queryType","mutationType","subscriptionType","keyFields","setMerge","merge","keyArgs","read","which","old","possibleTypes","supertype","subtype","match","TypeOrFieldNameRegExp","policy_1","supertypes","rest","inbox","createIfMissing","fieldPolicies","supertypeSet","typenameSupertypeSet","workQueue_1","maybeEnqueue_1","needToCheckFuzzySubtypes","checkingFuzzySubtypes","selectionSetMatchesResult","regExp","fuzzyString","fieldSpec","specifierOrString","storeKeyNameFromField","nameOrField","readOptions","makeFieldFunctionOptions","cacheSlot","parentTypename","childTypename","storage","makeMergeObjectsFunction","toReference","canRead","readFieldArgs","argc","eType","iType","typesDiffer","storeValueIsStoreObject","getContextFlavor","clientOnly","deferred","flavored","StoreWriter","reader","fragments","overwrite","operationDefinition","getOperationDefinition","makeProcessedFieldsMerger","mergeTree","fieldNodeSet","entityRef","applied","fieldsWithSelectionSets_1","hasSelectionSet_1","hasMergeFunction_1","childTree","warnAboutDataLoss","getTypenameFromResult","readField","result_1","resultFieldKey","getChildMergeTree","maybeRecycleChildMergeTree","e","dataRef","sets","previous_1","mergeMergeTrees","mergeTreeIsEmpty","cloneDeep","fieldMap","limitingTrie","flatten","inheritedContext","visitedNode","dir","name","getStorageArgs","e_1","i_1","getValue_1","eVal","iVal","aVal","emptyMergeTreePool","map","left","right","needToMergeMaps","remainingRightKeys_1","leftTree","warnings","existingRef","incomingObj","getChild","parentType","typeDotName","childTypenames","InMemoryCache","makeVar","normalizeConfig","rootStore","resetResultIdentities","previousReader","c","watch","recallCache","forgetCache","idToRemove","newOptimisticData","removeOptimistic","onWatchUpdated","perform","layer","optimisticData","alreadyDirty","diff","lastDiff","ApolloProvider","client","children","ApolloContext","getApolloContext","React.createElement","_typeof","I18nextProvider","_ref","i18n","defaultNS","useMemo","createElement","I18nContext","requestToKey","request","addTypename","queryString","print","requestKey","MockLink","mockedResponses","mockedResponse","normalizedMockedResponse","operation","unmatchedVars","requestVariables","responseIndex","res","index","mockedResponseVars","response","configError","Observable","observer","timer","error","newMockedResponse","queryWithoutConnection","removeConnectionDirectiveFromDocument","removeClientSetsFromDocument","ApolloLink","MockedProvider","props","mocks","defaultOptions","resolvers","link","ApolloClient","Cache","childProps","React.isValidElement","React.cloneElement","React.Children","React.Component","cookieDecorator_1","setCookies","cookies","entries","_i","entries_1","clearCookies","cookie","equalPos","cookieDecorator","storyFn","parameters","__createBinding","this","o","m","k","k2","desc","__exportStar","exports","require$$0","_assertThisInitialized","self","_setPrototypeOf","_inherits","subClass","superClass","setPrototypeOf","_possibleConstructorReturn","call","assertThisInitialized","_getPrototypeOf","_iterableToArray","iter","_toArray","arr","arrayWithHoles","iterableToArray","unsupportedIterableToArray","nonIterableRest","ownKeys","enumerableOnly","keys","symbols","sym","_objectSpread","target","source","_defineProperty","consoleLogger","type","Logger","concreteLogger","_classCallCheck","_createClass","bool","_len","_key","_len2","_key2","_len3","_key3","_len4","_key4","lvl","prefix","debugOnly","moduleName","baseLogger","EventEmitter","events","listener","event","l","cloned","_cloned","defer","rej","promise","resolve","reject","makeString","copy","a","t","getLastOfPath","Empty","cleanKey","canNotTraverseDeeper","stack","setPath","_getLastOfPath","pushPath","concat","_getLastOfPath2","getPath","_getLastOfPath3","getPathWithDefaults","defaultData","deepExtend","prop","regexEscape","str","_entityMap","escape","isIE10","chars","looksLikeObjectPath","nsSeparator","keySeparator","possibleChars","r","matched","ki","ownKeys$1","_objectSpread$1","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","Super","NewTarget","deepFind","paths","current","j","mix","joinedPath","ResourceStore","_EventEmitter","ns","lng","ignoreJSONStructure","resources","deep","pack","n","v","postProcessor","module","processors","translator","processor","ownKeys$2","_objectSpread$2","_createSuper$1","_isNativeReflectConstruct$1","checkedLoadedFor","Translator","services","resolved","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","parts","lastKey","_this2","returnDetails","_this$extractFromKey","namespace","appendNamespaceToCIMode","resUsedKey","resExactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","handleAsObject","resTypeIsArray","newKeyToUse","deepKey","usedDefault","usedKey","needsPluralHandling","hasDefaultValue","defaultValueSuffix","defaultValue","missingKeyNoValueFallbackToKey","resForMissing","updateMissing","fk","lngs","fallbackLngs","send","specificDefaultValue","defaultForMissing","language","_this3","skipOnVariables","nestBef","nb","na","nestAft","postProcess","postProcessorNames","_this4","found","exactUsedKey","usedLng","usedNS","needsZeroSuffixLookup","needsContextHandling","codes","code","finalKeys","pluralSuffix","zeroSuffix","contextKey","possibleKey","option","capitalize","string","LanguageUtil","specialCases","part","cleanedLng","lngOnly","supportedLng","fallbacks","fallbackCode","fallbackCodes","addCode","fc","_rulesPluralsTypes","deprecatedJsonVersions","suffixesOrder","createRules","rules","set","PluralResolver","languageUtils","rule","pluralCategory1","pluralCategory2","pluralCategory","number","idx","returnSuffix","ownKeys$3","_objectSpread$3","Interpolator","iOpts","regexpStr","regexpUnescapeStr","nestingRegexpStr","replaces","regexSafe","val","handleFormat","f","missingInterpolationHandler","todos","todo","matchedVar","temp","safeValue","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","doReduce","elem","ownKeys$4","_objectSpread$4","parseFormatStr","formatStr","formatName","formatOptions","optStr","opts","opt","_opt$split","_opt$split2","createCachedFormatter","fn","formatter","Formatter","_format","formats","mem","_parseFormatStr","formatted","valOptions","ownKeys$5","_objectSpread$5","_createSuper$2","_isNativeReflectConstruct$2","removePending","q","Connector","backend","languages","callback","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","err","loaded","loadedKeys","fcName","tried","wait","next","_this5","fallbackValue","isUpdate","get","ret","transformOptions","ownKeys$6","_objectSpread$6","_createSuper$3","_isNativeReflectConstruct$3","noop","bindMemberFunctions","inst","mems","I18n","defOpts","createClassOnDemand","ClassOrObject","lu","storeApi","_this2$store","storeApiChained","_this2$store2","load","finish","usedCallback","append","li","lngInLngs","setLngProps","done","setLng","keyPrefix","fixedT","resultKey","_this$translator","_this$translator2","_this6","fallbackLng","lastLng","loadNotPending","loadState","preResult","_this7","preloaded","newLngs","rtlLngs","_this8","mergedOptions","clone","membersToCopy","instance","en","initReactI18next","withI18next","Story","locale","useEffect","jsx","Suspense","globalTypes","decorators"],"mappings":"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"}